import{r as n,j as t}from"./index.DdH5x3BZ.js";const p=()=>{const[d,h]=n.useState([]),[u,x]=n.useState([]),[o,i]=n.useState(""),[j,c]=n.useState(!0);n.useEffect(()=>{const e=async()=>{try{c(!0);const[s,a]=await Promise.all([fetch("/api/trade-history"),fetch("/api/manual-trade-history")]);if(!s.ok)throw new Error(`Failed to fetch bot history: ${s.status} ${s.statusText}`);if(!a.ok)throw new Error(`Failed to fetch manual history: ${a.status} ${a.statusText}`);const f=await s.json(),m=await a.json();h(f),x(m),i("")}catch(s){console.error("Error fetching trade history:",s),i("Could not load trade history. The backend may be offline or starting up.")}finally{c(!1)}};e();const r=setInterval(e,3e4);return()=>clearInterval(r)},[]);const y=e=>{const r=e==="Success"?"status-success":"status-failed";return t.jsx("span",{className:r,children:e})},l=(e,r)=>t.jsxs("div",{id:"trade-history-section",children:[t.jsx("h3",{children:e}),r.length===0?t.jsx("div",{id:"empty-state",children:t.jsx("p",{children:"No trade history found."})}):t.jsx("div",{id:"table-responsive",children:t.jsxs("table",{children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Timestamp"}),t.jsx("th",{children:"Status"}),t.jsx("th",{children:"Pair"}),t.jsx("th",{children:"Route"}),t.jsx("th",{children:"Details"})]})}),t.jsx("tbody",{children:r.map((s,a)=>t.jsxs("tr",{children:[t.jsx("td",{children:new Date(s.timestamp).toLocaleString()}),t.jsx("td",{children:y(s.status)}),t.jsx("td",{children:s.pair}),t.jsx("td",{children:s.route}),t.jsxs("td",{children:[s.status==="Success"?`Profit: ${s.actualProfit}`:`Error: ${s.error||"N/A"}`,t.jsx("br",{}),t.jsxs("small",{children:["Loan: ",s.loanAmount]}),s.txHash&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("a",{href:`https://basescan.org/tx/${s.txHash}`,target:"_blank",rel:"noopener noreferrer",children:"View Tx"})]})]})]},a))})]})})]});return j?t.jsx("div",{id:"loading-message",children:"Loading history..."}):o?t.jsx("div",{id:"error-message",children:o}):t.jsxs("div",{id:"trade-history-container",children:[l("Automated Bot Trade History",d),l("Manual Trade History",u)]})},g=()=>t.jsx(p,{});export{g as default};
