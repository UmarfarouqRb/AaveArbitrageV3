import{cW as n,cX as s}from"./index-LR5GKwfl.js";const p=()=>{const[h,d]=n.useState([]),[u,x]=n.useState([]),[o,i]=n.useState(""),[j,c]=n.useState(!0);n.useEffect(()=>{const e=async()=>{try{c(!0);const[t,a]=await Promise.all([fetch("/api/trade-history"),fetch("/api/manual-trade-history")]);if(!t.ok)throw new Error(`Failed to fetch bot history: ${t.status} ${t.statusText}`);if(!a.ok)throw new Error(`Failed to fetch manual history: ${a.status} ${a.statusText}`);const y=await t.json(),f=await a.json();d(y),x(f),i("")}catch(t){console.error("Error fetching trade history:",t),i("Could not load trade history. The backend may be offline or starting up.")}finally{c(!1)}};e();const r=setInterval(e,3e4);return()=>clearInterval(r)},[]);const m=e=>{const r=e==="Success"?"status-success":"status-failed";return s.jsx("span",{className:r,children:e})},l=(e,r)=>s.jsxs("div",{className:"trade-history-section",children:[s.jsx("h3",{children:e}),r.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:"No trade history found."})}):s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Timestamp"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Pair"}),s.jsx("th",{children:"Route"}),s.jsx("th",{children:"Details"})]})}),s.jsx("tbody",{children:r.map((t,a)=>s.jsxs("tr",{children:[s.jsx("td",{children:new Date(t.timestamp).toLocaleString()}),s.jsx("td",{children:m(t.status)}),s.jsx("td",{children:t.pair}),s.jsx("td",{children:t.route}),s.jsxs("td",{children:[t.status==="Success"?`Profit: ${t.actualProfit}`:`Error: ${t.error||"N/A"}`,s.jsx("br",{}),s.jsxs("small",{children:["Loan: ",t.loanAmount]}),t.txHash&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),s.jsx("a",{href:`https://basescan.org/tx/${t.txHash}`,target:"_blank",rel:"noopener noreferrer",children:"View Tx"})]})]})]},a))})]})})]});return j?s.jsx("div",{className:"loading-message",children:"Loading history..."}):o?s.jsx("div",{className:"error-message",children:o}):s.jsxs("div",{className:"trade-history-container",children:[l("Automated Bot Trade History",h),l("Manual Trade History",u)]})},g=()=>s.jsx(p,{});export{g as default};
