{"ast":null,"code":"import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Suspense, useRef, useState } from \"react\";\nimport { defineChain } from \"../../../../chains/utils.js\";\nimport { getDefaultWallets } from \"../../../../wallets/defaultWallets.js\";\nimport { isEcosystemWallet } from \"../../../../wallets/ecosystem/is-ecosystem-wallet.js\";\nimport { linkProfile } from \"../../../../wallets/in-app/web/lib/auth/index.js\";\nimport { iconSize } from \"../../../core/design-system/index.js\";\nimport { useAddConnectedWallet } from \"../../../core/hooks/wallets/useAddConnectedWallet.js\";\nimport AllWalletsUI from \"../../ui/ConnectWallet/Modal/AllWalletsUI.js\";\nimport { WalletSelector } from \"../../ui/ConnectWallet/WalletSelector.js\";\nimport { Container, ModalHeader } from \"../../ui/components/basic.js\";\nimport { Spacer } from \"../../ui/components/Spacer.js\";\nimport { WalletImage } from \"../../ui/components/WalletImage.js\";\nimport { ErrorState } from \"../shared/ErrorState.js\";\nimport { LoadingScreen } from \"../shared/LoadingScreen.js\";\nimport { LoadingState } from \"../shared/LoadingState.js\";\nexport function WalletAuth(props) {\n  var _wallet$getConfig, _walletToConnect$curr;\n  const {\n    wallet,\n    done\n  } = props;\n  const addConnectedWallet = useAddConnectedWallet();\n  const walletToConnect = useRef(undefined);\n  const [status, setStatus] = useState(\"selecting\");\n  const [error, setError] = useState();\n  const [showAll, setShowAll] = useState(false);\n  const ecosystem = isEcosystemWallet(wallet) ? {\n    id: wallet.id,\n    partnerId: (_wallet$getConfig = wallet.getConfig()) === null || _wallet$getConfig === void 0 ? void 0 : _wallet$getConfig.partnerId\n  } : undefined;\n  const back = () => {\n    setStatus(\"selecting\");\n    walletToConnect.current = undefined;\n    props.onBack();\n  };\n  async function login(walletToLink) {\n    setStatus(\"loading\");\n    setError(undefined);\n    walletToConnect.current = walletToLink;\n    try {\n      if (props.isLinking) {\n        await linkProfile({\n          chain: props.chain || wallet.getChain() || defineChain(1),\n          client: props.client,\n          ecosystem,\n          strategy: \"wallet\",\n          wallet: walletToLink\n        });\n      } else {\n        await wallet.connect({\n          chain: props.chain || walletToLink.getChain() || defineChain(1),\n          client: props.client,\n          strategy: \"wallet\",\n          wallet: walletToLink\n        });\n      }\n      addConnectedWallet(walletToLink);\n      done();\n    } catch (e) {\n      setError(e instanceof Error ? e.message : \"Unknown error\");\n      setStatus(\"error\");\n    }\n  }\n  if (!walletToConnect.current) {\n    if (showAll) {\n      return _jsx(Suspense, {\n        fallback: _jsx(LoadingScreen, {}),\n        children: _jsx(AllWalletsUI, {\n          client: props.client,\n          connectLocale: props.locale,\n          disableSelectionDataReset: true,\n          onBack: () => setShowAll(false),\n          onSelect: async newWallet => {\n            login(newWallet);\n            setShowAll(false);\n          },\n          recommendedWallets: undefined,\n          size: props.size\n        })\n      });\n    }\n    return _jsx(WalletSelector, {\n      chain: wallet.getChain(),\n      chains: [],\n      client: props.client,\n      connectLocale: props.locale,\n      disableSelectionDataReset: true,\n      done: () => {},\n      goBack: back,\n      hideHeader: false,\n      meta: props.meta || {},\n      modalHeader: {\n        onBack: back,\n        title: props.isLinking ? props.inAppLocale.linkWallet : props.inAppLocale.signInWithWallet\n      },\n      onShowAll: () => {\n        setShowAll(true);\n      },\n      recommendedWallets: undefined,\n      selectWallet: async newWallet => {\n        login(newWallet);\n      },\n      setModalVisibility: () => {},\n      showAllWallets: true,\n      size: props.size,\n      title: props.locale.connectAWallet,\n      walletConnect: props.walletConnect,\n      walletIdsToHide: [\"inApp\"],\n      wallets: getDefaultWallets()\n    });\n  }\n  return _jsxs(Container, {\n    animate: \"fadein\",\n    flex: \"column\",\n    fullHeight: true,\n    children: [_jsx(Container, {\n      p: \"lg\",\n      children: _jsx(ModalHeader, {\n        onBack: back,\n        title: props.isLinking ? props.inAppLocale.linkWallet : props.inAppLocale.signInWithWallet\n      })\n    }), _jsx(Container, {\n      center: \"y\",\n      expand: true,\n      flex: \"column\",\n      px: props.size === \"wide\" ? \"xxl\" : \"lg\",\n      children: _jsx(\"div\", {\n        children: status === \"error\" ? _jsxs(_Fragment, {\n          children: [_jsx(ErrorState, {\n            onTryAgain: () => {\n              if (!walletToConnect.current) {\n                throw new Error(\"Failed to connect to unknown wallet\");\n              }\n              login(walletToConnect.current);\n            },\n            title: error || \"Failed to Login\"\n          }), _jsx(Spacer, {\n            y: \"lg\"\n          })]\n        }) : _jsx(LoadingState, {\n          icon: _jsx(WalletImage, {\n            client: props.client,\n            id: (_walletToConnect$curr = walletToConnect.current.id) !== null && _walletToConnect$curr !== void 0 ? _walletToConnect$curr : \"\",\n            size: iconSize.xl\n          }),\n          subtitle: \"A pop-up prompt will appear to sign-in and verify your wallet\",\n          title: \"Sign in with your wallet\"\n        })\n      })\n    })]\n  });\n}","map":{"version":3,"names":["Suspense","useRef","useState","defineChain","getDefaultWallets","isEcosystemWallet","linkProfile","iconSize","useAddConnectedWallet","AllWalletsUI","WalletSelector","Container","ModalHeader","Spacer","WalletImage","ErrorState","LoadingScreen","LoadingState","WalletAuth","props","_wallet$getConfig","_walletToConnect$curr","wallet","done","addConnectedWallet","walletToConnect","undefined","status","setStatus","error","setError","showAll","setShowAll","ecosystem","id","partnerId","getConfig","back","current","onBack","login","walletToLink","isLinking","chain","getChain","client","strategy","connect","e","Error","message","_jsx","fallback","children","connectLocale","locale","disableSelectionDataReset","onSelect","newWallet","recommendedWallets","size","chains","goBack","hideHeader","meta","modalHeader","title","inAppLocale","linkWallet","signInWithWallet","onShowAll","selectWallet","setModalVisibility","showAllWallets","connectAWallet","walletConnect","walletIdsToHide","wallets","_jsxs","animate","flex","fullHeight","p","center","expand","px","_Fragment","onTryAgain","y","icon","xl","subtitle"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/web/wallets/in-app/WalletAuth.tsx"],"sourcesContent":["import { Suspense, useRef, useState } from \"react\";\nimport type { Chain } from \"../../../../chains/types.js\";\nimport { defineChain } from \"../../../../chains/utils.js\";\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\nimport { getDefaultWallets } from \"../../../../wallets/defaultWallets.js\";\nimport { isEcosystemWallet } from \"../../../../wallets/ecosystem/is-ecosystem-wallet.js\";\nimport { linkProfile } from \"../../../../wallets/in-app/web/lib/auth/index.js\";\nimport type { Wallet } from \"../../../../wallets/interfaces/wallet.js\";\nimport type { EcosystemWalletId } from \"../../../../wallets/wallet-types.js\";\nimport { iconSize } from \"../../../core/design-system/index.js\";\nimport { useAddConnectedWallet } from \"../../../core/hooks/wallets/useAddConnectedWallet.js\";\nimport type { ConnectLocale } from \"../../ui/ConnectWallet/locale/types.js\";\nimport AllWalletsUI from \"../../ui/ConnectWallet/Modal/AllWalletsUI.js\";\nimport { WalletSelector } from \"../../ui/ConnectWallet/WalletSelector.js\";\nimport { Container, ModalHeader } from \"../../ui/components/basic.js\";\nimport { Spacer } from \"../../ui/components/Spacer.js\";\nimport { WalletImage } from \"../../ui/components/WalletImage.js\";\nimport { ErrorState } from \"../shared/ErrorState.js\";\nimport { LoadingScreen } from \"../shared/LoadingScreen.js\";\nimport { LoadingState } from \"../shared/LoadingState.js\";\nimport type { InAppWalletLocale } from \"../shared/locale/types.js\";\n\nexport function WalletAuth(props: {\n  wallet: Wallet<\"inApp\" | EcosystemWalletId>;\n  chain: Chain | undefined;\n  client: ThirdwebClient;\n  done: () => void;\n  size: \"compact\" | \"wide\";\n  locale: ConnectLocale;\n  inAppLocale: InAppWalletLocale;\n  onBack: () => void;\n  walletConnect: { projectId?: string } | undefined;\n  isLinking: boolean;\n  meta?: {\n    title?: string;\n    titleIconUrl?: string;\n    showThirdwebBranding?: boolean;\n    termsOfServiceUrl?: string;\n    privacyPolicyUrl?: string;\n  };\n}) {\n  const { wallet, done } = props;\n  const addConnectedWallet = useAddConnectedWallet();\n  const walletToConnect = useRef<Wallet>(undefined);\n  const [status, setStatus] = useState<\"loading\" | \"error\" | \"selecting\">(\n    \"selecting\",\n  );\n  const [error, setError] = useState<string | undefined>();\n  const [showAll, setShowAll] = useState<boolean>(false);\n  const ecosystem = isEcosystemWallet(wallet)\n    ? {\n        id: wallet.id,\n        partnerId: wallet.getConfig()?.partnerId,\n      }\n    : undefined;\n\n  const back = () => {\n    setStatus(\"selecting\");\n    walletToConnect.current = undefined;\n    props.onBack();\n  };\n\n  async function login(walletToLink: Wallet) {\n    setStatus(\"loading\");\n    setError(undefined);\n    walletToConnect.current = walletToLink;\n    try {\n      if (props.isLinking) {\n        await linkProfile({\n          chain: props.chain || wallet.getChain() || defineChain(1),\n          client: props.client,\n          ecosystem,\n          strategy: \"wallet\",\n          wallet: walletToLink,\n        });\n      } else {\n        await wallet.connect({\n          chain: props.chain || walletToLink.getChain() || defineChain(1),\n          client: props.client,\n          strategy: \"wallet\",\n          wallet: walletToLink,\n        });\n      }\n      addConnectedWallet(walletToLink);\n      done();\n    } catch (e) {\n      setError(e instanceof Error ? e.message : \"Unknown error\");\n      setStatus(\"error\");\n    }\n  }\n\n  if (!walletToConnect.current) {\n    if (showAll) {\n      return (\n        <Suspense fallback={<LoadingScreen />}>\n          <AllWalletsUI\n            client={props.client}\n            connectLocale={props.locale}\n            disableSelectionDataReset={true}\n            onBack={() => setShowAll(false)}\n            onSelect={async (newWallet) => {\n              login(newWallet);\n              setShowAll(false);\n            }}\n            recommendedWallets={undefined}\n            size={props.size}\n          />\n        </Suspense>\n      );\n    }\n    return (\n      <WalletSelector\n        chain={wallet.getChain()}\n        chains={[]}\n        client={props.client}\n        connectLocale={props.locale}\n        disableSelectionDataReset={true}\n        done={() => {}}\n        goBack={back}\n        hideHeader={false}\n        meta={props.meta || {}}\n        modalHeader={{\n          onBack: back,\n          title: props.isLinking\n            ? props.inAppLocale.linkWallet\n            : props.inAppLocale.signInWithWallet,\n        }}\n        onShowAll={() => {\n          setShowAll(true);\n        }}\n        recommendedWallets={undefined}\n        selectWallet={async (newWallet) => {\n          login(newWallet);\n        }}\n        setModalVisibility={() => {}}\n        showAllWallets={true}\n        size={props.size}\n        title={props.locale.connectAWallet}\n        walletConnect={props.walletConnect}\n        walletIdsToHide={[\"inApp\"]}\n        wallets={getDefaultWallets()}\n      />\n    );\n  }\n\n  return (\n    <Container animate=\"fadein\" flex=\"column\" fullHeight>\n      <Container p=\"lg\">\n        <ModalHeader\n          onBack={back}\n          title={\n            props.isLinking\n              ? props.inAppLocale.linkWallet\n              : props.inAppLocale.signInWithWallet\n          }\n        />\n      </Container>\n\n      <Container\n        center=\"y\"\n        expand\n        flex=\"column\"\n        px={props.size === \"wide\" ? \"xxl\" : \"lg\"}\n      >\n        <div>\n          {status === \"error\" ? (\n            <>\n              <ErrorState\n                onTryAgain={() => {\n                  if (!walletToConnect.current) {\n                    throw new Error(\"Failed to connect to unknown wallet\");\n                  }\n                  login(walletToConnect.current);\n                }}\n                title={error || \"Failed to Login\"}\n              />\n              <Spacer y=\"lg\" />\n            </>\n          ) : (\n            <LoadingState\n              icon={\n                <WalletImage\n                  client={props.client}\n                  id={walletToConnect.current.id ?? \"\"}\n                  size={iconSize.xl}\n                />\n              }\n              subtitle=\"A pop-up prompt will appear to sign-in and verify your wallet\"\n              title=\"Sign in with your wallet\"\n            />\n          )}\n        </div>\n      </Container>\n    </Container>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}