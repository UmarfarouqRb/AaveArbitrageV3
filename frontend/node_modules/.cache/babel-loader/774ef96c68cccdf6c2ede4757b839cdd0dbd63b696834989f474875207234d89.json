{"ast":null,"code":"import { getClientFetch } from \"../../utils/fetch.js\";\nimport { getPayBuyWithCryptoHistoryEndpoint } from \"../utils/definitions.js\";\n/**\n * Gets the History of purchases for a given wallet address\n * @param params Object of type [`BuyWithCryptoHistoryParams`](https://portal.thirdweb.com/references/typescript/v5/BuyWithCryptoHistoryParams)\n * @example\n *\n * ```ts\n * import { createThirdwebClient } from \"thirdweb\";\n * import { BuyWithCryptoHistoryData } from \"thirdweb/pay\";\n *\n * const client = createThirdwebClient({ clientId: \"...\" });\n * const walletAddress = \"0x...\";\n * const params = {\n *  client,\n *  walletAddress,\n * };\n *\n * // grabs the history of purchase transactions for the wallet address\n * const status = await getBuyWithCryptoHistory(params)\n * ```\n * @returns Object of type [`BuyWithCryptoHistoryData`](https://portal.thirdweb.com/references/typescript/v5/BuyWithCryptoHistoryData)\n * @deprecated\n * @buyCrypto\n */\nexport async function getBuyWithCryptoHistory(params) {\n  try {\n    const queryParams = new URLSearchParams();\n    queryParams.append(\"walletAddress\", params.walletAddress);\n    queryParams.append(\"start\", params.start.toString());\n    queryParams.append(\"count\", params.count.toString());\n    const queryString = queryParams.toString();\n    const url = \"\".concat(getPayBuyWithCryptoHistoryEndpoint(), \"?\").concat(queryString);\n    const response = await getClientFetch(params.client)(url);\n    // Assuming the response directly matches the SwapResponse interface\n    if (!response.ok) {\n      const error = await response.text().catch(() => null);\n      throw new Error(\"HTTP error! status: \".concat(response.status, \" - \").concat(response.statusText, \": \").concat(error || \"unknown error\"));\n    }\n    const data = (await response.json()).result;\n    return data;\n  } catch (error) {\n    throw new Error(\"Fetch failed: \".concat(error));\n  }\n}","map":{"version":3,"names":["getClientFetch","getPayBuyWithCryptoHistoryEndpoint","getBuyWithCryptoHistory","params","queryParams","URLSearchParams","append","walletAddress","start","toString","count","queryString","url","concat","response","client","ok","error","text","catch","Error","status","statusText","data","json","result"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/pay/buyWithCrypto/getHistory.ts"],"sourcesContent":["import type { ThirdwebClient } from \"../../client/client.js\";\nimport { getClientFetch } from \"../../utils/fetch.js\";\nimport { getPayBuyWithCryptoHistoryEndpoint } from \"../utils/definitions.js\";\nimport type { BuyWithCryptoStatus } from \"./getStatus.js\";\n\n/**\n * The parameters for [`getBuyWithCryptoHistory`](https://portal.thirdweb.com/references/typescript/v5/getBuyWithCryptoHistory) function\n * It takes the wallet history address and optional cursor and page size. for paginated results.\n * @buyCrypto\n */\nexport type BuyWithCryptoHistoryParams = {\n  /**\n   * A client is the entry point to the thirdweb SDK. It is required for all other actions.\n   *\n   * You can create a client using the `createThirdwebClient` function.\n   * Refer to the [Creating a Client](https://portal.thirdweb.com/typescript/v5/client) documentation for more information.\n   *\n   */\n  client: ThirdwebClient;\n  /**\n   * The address of the wallet to get the wallet history for\n   */\n  walletAddress: string;\n  /**\n   * The number of results to return in a single page. The default value is 10.\n   */\n  count: number;\n  /**\n   * The cursor for the page of results to return. The default value is `undefined`.\n   */\n  start: number;\n};\n\n/**\n * The results for [`getBuyWithCryptoHistory`](https://portal.thirdweb.com/references/typescript/v5/getBuyWithCryptoHistory) function\n * It includes information about transactions that the wallet address has made through thirdweb buy with crypto.\n * @buyCrypto\n */\nexport type BuyWithCryptoHistoryData = {\n  page: BuyWithCryptoStatus[];\n  hasNextPage: boolean;\n};\n\n/**\n * Gets the History of purchases for a given wallet address\n * @param params Object of type [`BuyWithCryptoHistoryParams`](https://portal.thirdweb.com/references/typescript/v5/BuyWithCryptoHistoryParams)\n * @example\n *\n * ```ts\n * import { createThirdwebClient } from \"thirdweb\";\n * import { BuyWithCryptoHistoryData } from \"thirdweb/pay\";\n *\n * const client = createThirdwebClient({ clientId: \"...\" });\n * const walletAddress = \"0x...\";\n * const params = {\n *  client,\n *  walletAddress,\n * };\n *\n * // grabs the history of purchase transactions for the wallet address\n * const status = await getBuyWithCryptoHistory(params)\n * ```\n * @returns Object of type [`BuyWithCryptoHistoryData`](https://portal.thirdweb.com/references/typescript/v5/BuyWithCryptoHistoryData)\n * @deprecated\n * @buyCrypto\n */\nexport async function getBuyWithCryptoHistory(\n  params: BuyWithCryptoHistoryParams,\n): Promise<BuyWithCryptoHistoryData> {\n  try {\n    const queryParams = new URLSearchParams();\n    queryParams.append(\"walletAddress\", params.walletAddress);\n    queryParams.append(\"start\", params.start.toString());\n    queryParams.append(\"count\", params.count.toString());\n\n    const queryString = queryParams.toString();\n    const url = `${getPayBuyWithCryptoHistoryEndpoint()}?${queryString}`;\n\n    const response = await getClientFetch(params.client)(url);\n\n    // Assuming the response directly matches the SwapResponse interface\n    if (!response.ok) {\n      const error = await response.text().catch(() => null);\n      throw new Error(\n        `HTTP error! status: ${response.status} - ${response.statusText}: ${error || \"unknown error\"}`,\n      );\n    }\n\n    const data: BuyWithCryptoHistoryData = (await response.json()).result;\n    return data;\n  } catch (error) {\n    throw new Error(`Fetch failed: ${error}`);\n  }\n}\n"],"mappings":"AACA,SAASA,cAAc,QAAQ,sBAAsB;AACrD,SAASC,kCAAkC,QAAQ,yBAAyB;AAyC5E;;;;;;;;;;;;;;;;;;;;;;;AAuBA,OAAO,eAAeC,uBAAuBA,CAC3CC,MAAkC;EAElC,IAAI;IACF,MAAMC,WAAW,GAAG,IAAIC,eAAe,EAAE;IACzCD,WAAW,CAACE,MAAM,CAAC,eAAe,EAAEH,MAAM,CAACI,aAAa,CAAC;IACzDH,WAAW,CAACE,MAAM,CAAC,OAAO,EAAEH,MAAM,CAACK,KAAK,CAACC,QAAQ,EAAE,CAAC;IACpDL,WAAW,CAACE,MAAM,CAAC,OAAO,EAAEH,MAAM,CAACO,KAAK,CAACD,QAAQ,EAAE,CAAC;IAEpD,MAAME,WAAW,GAAGP,WAAW,CAACK,QAAQ,EAAE;IAC1C,MAAMG,GAAG,MAAAC,MAAA,CAAMZ,kCAAkC,EAAE,OAAAY,MAAA,CAAIF,WAAW,CAAE;IAEpE,MAAMG,QAAQ,GAAG,MAAMd,cAAc,CAACG,MAAM,CAACY,MAAM,CAAC,CAACH,GAAG,CAAC;IAEzD;IACA,IAAI,CAACE,QAAQ,CAACE,EAAE,EAAE;MAChB,MAAMC,KAAK,GAAG,MAAMH,QAAQ,CAACI,IAAI,EAAE,CAACC,KAAK,CAAC,MAAM,IAAI,CAAC;MACrD,MAAM,IAAIC,KAAK,wBAAAP,MAAA,CACUC,QAAQ,CAACO,MAAM,SAAAR,MAAA,CAAMC,QAAQ,CAACQ,UAAU,QAAAT,MAAA,CAAKI,KAAK,IAAI,eAAe,CAAE,CAC/F;IACH;IAEA,MAAMM,IAAI,GAA6B,CAAC,MAAMT,QAAQ,CAACU,IAAI,EAAE,EAAEC,MAAM;IACrE,OAAOF,IAAI;EACb,CAAC,CAAC,OAAON,KAAK,EAAE;IACd,MAAM,IAAIG,KAAK,kBAAAP,MAAA,CAAkBI,KAAK,CAAE,CAAC;EAC3C;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}