{"ast":null,"code":"\"use client\";\n\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useConnectionManager } from \"../../../../core/providers/connection-manager.js\";\nimport { useWalletInfo } from \"../../../../core/utils/wallet.js\";\nimport { LoadingScreen } from \"../../../wallets/shared/LoadingScreen.js\";\nimport { getSmartWalletLocale } from \"../../../wallets/smartWallet/locale/getSmartWalletLocale.js\";\nimport { Container } from \"../../components/basic.js\";\nimport { Spacer } from \"../../components/Spacer.js\";\nimport { Spinner } from \"../../components/Spinner.js\";\nimport { Text } from \"../../components/text.js\";\nimport { AnyWalletConnectUI } from \"./AnyWalletConnectUI.js\";\n/**\n * @internal\n */\nexport function SmartConnectUI(props) {\n  const personalWalletInfo = useWalletInfo(props.personalWallet.id);\n  const [keyConnected, setKeyConnected] = useState(false);\n  if (!personalWalletInfo.data) {\n    return _jsx(LoadingScreen, {});\n  }\n  // connect personal wallet\n  if (!keyConnected) {\n    return _jsx(AnyWalletConnectUI, {\n      chain: props.chain,\n      chains: props.chains,\n      client: props.client,\n      connectLocale: props.connectLocale,\n      done: () => {\n        setKeyConnected(true);\n      },\n      meta: props.meta,\n      onBack: props.onBack,\n      setModalVisibility: props.setModalVisibility,\n      size: props.size,\n      wallet: props.personalWallet,\n      walletConnect: props.walletConnect\n    });\n  }\n  return _jsx(SmartWalletConnecting, {\n    accountAbstraction: props.accountAbstraction,\n    client: props.client,\n    done: props.done,\n    localeId: props.connectLocale.id,\n    onBack: props.onBack,\n    personalWallet: props.personalWallet,\n    personalWalletInfo: personalWalletInfo.data,\n    size: props.size\n  });\n}\nfunction SmartWalletConnecting(props) {\n  const localeQuery = useQuery({\n    queryFn: () => getSmartWalletLocale(props.localeId),\n    queryKey: [\"getSmartWalletLocale\", props.localeId]\n  });\n  const {\n    personalWallet\n  } = props;\n  const {\n    done\n  } = props;\n  const [smartWalletConnectionStatus, setSmartWalletConnectionStatus] = useState(\"idle\");\n  const connectionManager = useConnectionManager();\n  const handleConnect = useCallback(async () => {\n    if (!personalWallet) {\n      throw new Error(\"No personal wallet\");\n    }\n    setSmartWalletConnectionStatus(\"connecting\");\n    try {\n      const connected = await connectionManager.handleConnection(personalWallet, {\n        accountAbstraction: props.accountAbstraction,\n        client: props.client\n      });\n      done(connected);\n      setSmartWalletConnectionStatus(\"idle\");\n    } catch (e) {\n      console.error(e);\n      setSmartWalletConnectionStatus(\"connect-error\");\n    }\n  }, [done, personalWallet, props.client, props.accountAbstraction, connectionManager]);\n  const connectStarted = useRef(false);\n  useEffect(() => {\n    if (!connectStarted.current) {\n      handleConnect();\n      connectStarted.current = true;\n    }\n  }, [handleConnect]);\n  if (!localeQuery.data) {\n    return _jsx(LoadingScreen, {});\n  }\n  if (smartWalletConnectionStatus === \"connect-error\") {\n    return _jsx(Container, {\n      animate: \"fadein\",\n      center: \"both\",\n      flex: \"column\",\n      fullHeight: true,\n      p: \"lg\",\n      style: {\n        minHeight: \"300px\"\n      },\n      children: _jsx(Text, {\n        color: \"danger\",\n        children: localeQuery.data.failedToConnect\n      })\n    });\n  }\n  return _jsxs(Container, {\n    center: \"both\",\n    flex: \"column\",\n    fullHeight: true,\n    style: {\n      minHeight: \"300px\"\n    },\n    children: [_jsx(Text, {\n      center: true,\n      color: \"primaryText\",\n      multiline: true,\n      children: localeQuery.data.connecting\n    }), _jsx(Spacer, {\n      y: \"lg\"\n    }), _jsx(Spinner, {\n      color: \"accentText\",\n      size: \"lg\"\n    })]\n  });\n}","map":{"version":3,"names":["useQuery","useCallback","useEffect","useRef","useState","useConnectionManager","useWalletInfo","LoadingScreen","getSmartWalletLocale","Container","Spacer","Spinner","Text","AnyWalletConnectUI","SmartConnectUI","props","personalWalletInfo","personalWallet","id","keyConnected","setKeyConnected","data","_jsx","chain","chains","client","connectLocale","done","meta","onBack","setModalVisibility","size","wallet","walletConnect","SmartWalletConnecting","accountAbstraction","localeId","localeQuery","queryFn","queryKey","smartWalletConnectionStatus","setSmartWalletConnectionStatus","connectionManager","handleConnect","Error","connected","handleConnection","e","console","error","connectStarted","current","animate","center","flex","fullHeight","p","style","minHeight","children","color","failedToConnect","_jsxs","multiline","connecting","y"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/web/ui/ConnectWallet/Modal/SmartWalletConnectUI.tsx"],"sourcesContent":["\"use client\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport type { Chain } from \"../../../../../chains/types.js\";\nimport type { ThirdwebClient } from \"../../../../../client/client.js\";\nimport type { Wallet } from \"../../../../../wallets/interfaces/wallet.js\";\nimport type { SmartWalletOptions } from \"../../../../../wallets/smart/types.js\";\nimport type { WalletInfo } from \"../../../../../wallets/wallet-info.js\";\nimport { useConnectionManager } from \"../../../../core/providers/connection-manager.js\";\nimport { useWalletInfo } from \"../../../../core/utils/wallet.js\";\nimport { LoadingScreen } from \"../../../wallets/shared/LoadingScreen.js\";\nimport { getSmartWalletLocale } from \"../../../wallets/smartWallet/locale/getSmartWalletLocale.js\";\nimport type { SmartWalletLocale } from \"../../../wallets/smartWallet/locale/types.js\";\nimport { Container } from \"../../components/basic.js\";\nimport { Spacer } from \"../../components/Spacer.js\";\nimport { Spinner } from \"../../components/Spinner.js\";\nimport { Text } from \"../../components/text.js\";\nimport type { LocaleId } from \"../../types.js\";\nimport type { ConnectLocale } from \"../locale/types.js\";\nimport { AnyWalletConnectUI } from \"./AnyWalletConnectUI.js\";\n\n/**\n * @internal\n */\nexport function SmartConnectUI(props: {\n  personalWallet: Wallet;\n  done: (smartWallet: Wallet) => void;\n  onBack?: () => void;\n  accountAbstraction: SmartWalletOptions;\n  setModalVisibility: (value: boolean) => void;\n  meta: {\n    title?: string;\n    titleIconUrl?: string;\n    showThirdwebBranding?: boolean;\n    termsOfServiceUrl?: string;\n    privacyPolicyUrl?: string;\n  };\n  size: \"compact\" | \"wide\";\n  client: ThirdwebClient;\n  chain: Chain | undefined;\n  chains: Chain[] | undefined;\n  connectLocale: ConnectLocale;\n  walletConnect:\n    | {\n        projectId?: string;\n      }\n    | undefined;\n}) {\n  const personalWalletInfo = useWalletInfo(props.personalWallet.id);\n  const [keyConnected, setKeyConnected] = useState(false);\n\n  if (!personalWalletInfo.data) {\n    return <LoadingScreen />;\n  }\n\n  // connect personal wallet\n  if (!keyConnected) {\n    return (\n      <AnyWalletConnectUI\n        chain={props.chain}\n        chains={props.chains}\n        client={props.client}\n        connectLocale={props.connectLocale}\n        done={() => {\n          setKeyConnected(true);\n        }}\n        meta={props.meta}\n        onBack={props.onBack}\n        setModalVisibility={props.setModalVisibility}\n        size={props.size}\n        wallet={props.personalWallet}\n        walletConnect={props.walletConnect}\n      />\n    );\n  }\n\n  return (\n    <SmartWalletConnecting\n      accountAbstraction={props.accountAbstraction}\n      client={props.client}\n      done={props.done}\n      localeId={props.connectLocale.id}\n      onBack={props.onBack}\n      personalWallet={props.personalWallet}\n      personalWalletInfo={personalWalletInfo.data}\n      size={props.size}\n    />\n  );\n}\n\nfunction SmartWalletConnecting(props: {\n  done: (smartWallet: Wallet) => void;\n  personalWallet: Wallet;\n  accountAbstraction: SmartWalletOptions;\n  onBack?: () => void;\n  personalWalletInfo: WalletInfo;\n  localeId: LocaleId;\n  size: \"compact\" | \"wide\";\n  client: ThirdwebClient;\n}) {\n  const localeQuery = useQuery<SmartWalletLocale>({\n    queryFn: () => getSmartWalletLocale(props.localeId),\n    queryKey: [\"getSmartWalletLocale\", props.localeId],\n  });\n  const { personalWallet } = props;\n  const { done } = props;\n\n  const [smartWalletConnectionStatus, setSmartWalletConnectionStatus] =\n    useState<\"connecting\" | \"connect-error\" | \"idle\">(\"idle\");\n  const connectionManager = useConnectionManager();\n\n  const handleConnect = useCallback(async () => {\n    if (!personalWallet) {\n      throw new Error(\"No personal wallet\");\n    }\n\n    setSmartWalletConnectionStatus(\"connecting\");\n\n    try {\n      const connected = await connectionManager.handleConnection(\n        personalWallet,\n        {\n          accountAbstraction: props.accountAbstraction,\n          client: props.client,\n        },\n      );\n      done(connected);\n      setSmartWalletConnectionStatus(\"idle\");\n    } catch (e) {\n      console.error(e);\n      setSmartWalletConnectionStatus(\"connect-error\");\n    }\n  }, [\n    done,\n    personalWallet,\n    props.client,\n    props.accountAbstraction,\n    connectionManager,\n  ]);\n\n  const connectStarted = useRef(false);\n  useEffect(() => {\n    if (!connectStarted.current) {\n      handleConnect();\n      connectStarted.current = true;\n    }\n  }, [handleConnect]);\n\n  if (!localeQuery.data) {\n    return <LoadingScreen />;\n  }\n\n  if (smartWalletConnectionStatus === \"connect-error\") {\n    return (\n      <Container\n        animate=\"fadein\"\n        center=\"both\"\n        flex=\"column\"\n        fullHeight\n        p=\"lg\"\n        style={{\n          minHeight: \"300px\",\n        }}\n      >\n        <Text color=\"danger\">{localeQuery.data.failedToConnect}</Text>\n      </Container>\n    );\n  }\n\n  return (\n    <Container\n      center=\"both\"\n      flex=\"column\"\n      fullHeight\n      style={{\n        minHeight: \"300px\",\n      }}\n    >\n      <Text center color=\"primaryText\" multiline>\n        {localeQuery.data.connecting}\n      </Text>\n      <Spacer y=\"lg\" />\n      <Spinner color=\"accentText\" size=\"lg\" />\n    </Container>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}