{"ast":null,"code":"import _objectSpread from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { getBuyWithFiatStatus } from \"../../../../pay/buyWithFiat/getStatus.js\";\n/**\n * A hook to get a status of a \"Buy with Fiat\" transaction to determine if the transaction is completed, failed or pending.\n *\n * This hook is a React Query wrapper of the [`getBuyWithFiatStatus`](https://portal.thirdweb.com/references/typescript/v5/getBuyWithCryptoStatus) function.\n * You can also use that function directly.\n *\n * `useBuyWithFiatStatus` refetches the status using `getBuyWithFiatStatus` every 5 seconds.\n *\n * @param params - object of type [`GetBuyWithFiatStatusParams`](https://portal.thirdweb.com/references/typescript/v5/BuyWithCryptoTransaction)\n * @returns A react query object which contains the data of type [`BuyWithFiatStatus`](https://portal.thirdweb.com/references/typescript/v5/BuyWithCryptoStatus)\n * @example\n * ```tsx\n * import { useBuyWithFiatStatus } from \"thirdweb/react\";\n * import { client } from \"./client\";\n *\n * function Example() {\n *   const fiatStatus = useBuyWithFiatStatus({\n *     client: client, // thirdweb client\n *     intentId: \"....\", // get the intentId from quote ( quote.intentId )\n *   });\n *\n *   console.log(fiatStatus.data);\n *\n *   return <div>...</div>;\n * }\n * ```\n * @deprecated\n * @buyCrypto\n */\nexport function useBuyWithFiatStatus(params) {\n  return useQuery(_objectSpread({\n    enabled: !!params,\n    queryFn: async () => {\n      if (!params) {\n        throw new Error(\"No params provided\");\n      }\n      return getBuyWithFiatStatus(params);\n    },\n    queryKey: [\"useBuyWithFiatStatus\", params],\n    refetchInterval: query => {\n      const data = query.state.data;\n      const status = data === null || data === void 0 ? void 0 : data.status;\n      if (status === \"PAYMENT_FAILED\" ||\n      // onRampToken and toToken being the same means there is no additional swap step\n      status === \"ON_RAMP_TRANSFER_COMPLETED\" && (data === null || data === void 0 ? void 0 : data.quote.toToken.chainId) === (data === null || data === void 0 ? void 0 : data.quote.onRampToken.chainId) && (data === null || data === void 0 ? void 0 : data.quote.toToken.tokenAddress.toLowerCase()) === (data === null || data === void 0 ? void 0 : data.quote.onRampToken.tokenAddress.toLowerCase())) {\n        return false;\n      }\n      return 5000;\n    },\n    refetchIntervalInBackground: true,\n    retry: true\n  }, params === null || params === void 0 ? void 0 : params.queryOptions));\n}","map":{"version":3,"names":["useQuery","getBuyWithFiatStatus","useBuyWithFiatStatus","params","_objectSpread","enabled","queryFn","Error","queryKey","refetchInterval","query","data","state","status","quote","toToken","chainId","onRampToken","tokenAddress","toLowerCase","refetchIntervalInBackground","retry","queryOptions"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/core/hooks/pay/useBuyWithFiatStatus.ts"],"sourcesContent":["import { type UseQueryResult, useQuery } from \"@tanstack/react-query\";\nimport {\n  type BuyWithFiatStatus,\n  type GetBuyWithFiatStatusParams,\n  getBuyWithFiatStatus,\n} from \"../../../../pay/buyWithFiat/getStatus.js\";\nimport type { WithPickedOnceQueryOptions } from \"../types.js\";\n\n/**\n * A hook to get a status of a \"Buy with Fiat\" transaction to determine if the transaction is completed, failed or pending.\n *\n * This hook is a React Query wrapper of the [`getBuyWithFiatStatus`](https://portal.thirdweb.com/references/typescript/v5/getBuyWithCryptoStatus) function.\n * You can also use that function directly.\n *\n * `useBuyWithFiatStatus` refetches the status using `getBuyWithFiatStatus` every 5 seconds.\n *\n * @param params - object of type [`GetBuyWithFiatStatusParams`](https://portal.thirdweb.com/references/typescript/v5/BuyWithCryptoTransaction)\n * @returns A react query object which contains the data of type [`BuyWithFiatStatus`](https://portal.thirdweb.com/references/typescript/v5/BuyWithCryptoStatus)\n * @example\n * ```tsx\n * import { useBuyWithFiatStatus } from \"thirdweb/react\";\n * import { client } from \"./client\";\n *\n * function Example() {\n *   const fiatStatus = useBuyWithFiatStatus({\n *     client: client, // thirdweb client\n *     intentId: \"....\", // get the intentId from quote ( quote.intentId )\n *   });\n *\n *   console.log(fiatStatus.data);\n *\n *   return <div>...</div>;\n * }\n * ```\n * @deprecated\n * @buyCrypto\n */\nexport function useBuyWithFiatStatus(\n  params?: WithPickedOnceQueryOptions<GetBuyWithFiatStatusParams>,\n): UseQueryResult<BuyWithFiatStatus> {\n  return useQuery({\n    enabled: !!params,\n    queryFn: async () => {\n      if (!params) {\n        throw new Error(\"No params provided\");\n      }\n      return getBuyWithFiatStatus(params);\n    },\n    queryKey: [\"useBuyWithFiatStatus\", params],\n    refetchInterval: (query) => {\n      const data = query.state.data as BuyWithFiatStatus;\n      const status = data?.status;\n      if (\n        status === \"PAYMENT_FAILED\" ||\n        // onRampToken and toToken being the same means there is no additional swap step\n        (status === \"ON_RAMP_TRANSFER_COMPLETED\" &&\n          data?.quote.toToken.chainId === data?.quote.onRampToken.chainId &&\n          data?.quote.toToken.tokenAddress.toLowerCase() ===\n            data?.quote.onRampToken.tokenAddress.toLowerCase())\n      ) {\n        return false;\n      }\n      return 5000;\n    },\n    refetchIntervalInBackground: true,\n    retry: true,\n    ...params?.queryOptions,\n  });\n}\n"],"mappings":";AAAA,SAA8BA,QAAQ,QAAQ,uBAAuB;AACrE,SAGEC,oBAAoB,QACf,0CAA0C;AAGjD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,OAAM,SAAUC,oBAAoBA,CAClCC,MAA+D;EAE/D,OAAOH,QAAQ,CAAAI,aAAA;IACbC,OAAO,EAAE,CAAC,CAACF,MAAM;IACjBG,OAAO,EAAE,MAAAA,CAAA,KAAW;MAClB,IAAI,CAACH,MAAM,EAAE;QACX,MAAM,IAAII,KAAK,CAAC,oBAAoB,CAAC;MACvC;MACA,OAAON,oBAAoB,CAACE,MAAM,CAAC;IACrC,CAAC;IACDK,QAAQ,EAAE,CAAC,sBAAsB,EAAEL,MAAM,CAAC;IAC1CM,eAAe,EAAGC,KAAK,IAAI;MACzB,MAAMC,IAAI,GAAGD,KAAK,CAACE,KAAK,CAACD,IAAyB;MAClD,MAAME,MAAM,GAAGF,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEE,MAAM;MAC3B,IACEA,MAAM,KAAK,gBAAgB;MAC3B;MACCA,MAAM,KAAK,4BAA4B,IACtC,CAAAF,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,KAAK,CAACC,OAAO,CAACC,OAAO,OAAKL,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,KAAK,CAACG,WAAW,CAACD,OAAO,KAC/D,CAAAL,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,KAAK,CAACC,OAAO,CAACG,YAAY,CAACC,WAAW,EAAE,OAC5CR,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,KAAK,CAACG,WAAW,CAACC,YAAY,CAACC,WAAW,EAAE,CAAC,EACvD;QACA,OAAO,KAAK;MACd;MACA,OAAO,IAAI;IACb,CAAC;IACDC,2BAA2B,EAAE,IAAI;IACjCC,KAAK,EAAE;EAAI,GACRlB,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEmB,YAAY,CACxB,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}