{"ast":null,"code":"\"use client\";\n\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect, useState } from \"react\";\nimport { getThirdwebBaseUrl } from \"../../../../../utils/domains.js\";\nimport { webLocalStorage } from \"../../../../../utils/storage/webStorage.js\";\nimport { isEcosystemWallet } from \"../../../../../wallets/ecosystem/is-ecosystem-wallet.js\";\nimport { ClientScopedStorage } from \"../../../../../wallets/in-app/core/authentication/client-scoped-storage.js\";\nimport { Container, Line, ModalHeader } from \"../../components/basic.js\";\nimport { Spacer } from \"../../components/Spacer.js\";\nimport { Spinner } from \"../../components/Spinner.js\";\n/**\n * @internal\n */\nexport function PrivateKey(props) {\n  var _props$wallet$getConf2;\n  const [isLoading, setLoading] = useState(true);\n  const baseDomain = getThirdwebBaseUrl(\"inAppWallet\");\n  useEffect(() => {\n    const loginReady = async e => {\n      if (typeof e.data === \"object\" && \"eventType\" in e.data && e.origin === baseDomain) {\n        if (e.data.eventType === \"exportPrivateKeyIframeLoaded\") {\n          var _props$wallet, _props$wallet$getConf;\n          const iframe = document.getElementById(\"export-wallet-\".concat((_props$wallet = props.wallet) === null || _props$wallet === void 0 ? void 0 : _props$wallet.id));\n          if (!(iframe instanceof HTMLIFrameElement)) {\n            return;\n          }\n          if (!props.wallet) {\n            return;\n          }\n          const clientStorage = new ClientScopedStorage({\n            clientId: props.client.clientId,\n            ecosystem: isEcosystemWallet(props.wallet) ? {\n              id: props.wallet.id,\n              partnerId: (_props$wallet$getConf = props.wallet.getConfig()) === null || _props$wallet$getConf === void 0 ? void 0 : _props$wallet$getConf.partnerId\n            } : undefined,\n            storage: webLocalStorage\n          });\n          if (iframe !== null && iframe !== void 0 && iframe.contentWindow) {\n            iframe.contentWindow.postMessage({\n              authToken: await clientStorage.getAuthCookie(),\n              eventType: \"initExportPrivateKey\"\n            }, e.origin);\n          }\n        }\n      }\n    };\n    window.addEventListener(\"message\", loginReady);\n    return () => {\n      window.removeEventListener(\"message\", loginReady);\n    };\n  }, [props.wallet, props.client.clientId, baseDomain]);\n  if (!props.wallet) {\n    throw new Error(\"[PrivateKey] No wallet found\");\n  }\n  const ecosystem = isEcosystemWallet(props.wallet) ? {\n    id: props.wallet.id,\n    partnerId: (_props$wallet$getConf2 = props.wallet.getConfig()) === null || _props$wallet$getConf2 === void 0 ? void 0 : _props$wallet$getConf2.partnerId\n  } : undefined;\n  return _jsxs(Container, {\n    style: {\n      minHeight: \"300px\"\n    },\n    children: [_jsx(Container, {\n      p: \"lg\",\n      children: _jsx(ModalHeader, {\n        onBack: props.onBack,\n        title: props.connectLocale.manageWallet.exportPrivateKey\n      })\n    }), _jsx(Line, {}), _jsxs(Container, {\n      px: \"sm\",\n      scrollY: true,\n      style: {\n        maxHeight: \"500px\"\n      },\n      children: [_jsx(Spacer, {\n        y: \"md\"\n      }), _jsxs(Container, {\n        style: {\n          height: \"250px\",\n          position: \"relative\"\n        },\n        children: [isLoading ? _jsx(Container, {\n          center: \"both\",\n          flex: \"column\",\n          style: {\n            height: \"100%\",\n            position: \"absolute\",\n            width: \"100%\"\n          },\n          children: _jsx(Spinner, {\n            color: \"primaryButtonBg\",\n            size: \"lg\"\n          })\n        }) : null, _jsx(Container, {\n          style: {\n            height: \"100%\",\n            position: \"absolute\",\n            width: \"100%\",\n            zIndex: 11\n          },\n          children: _jsx(\"iframe\", {\n            allow: \"clipboard-read; clipboard-write\",\n            id: \"export-wallet-\".concat(props.wallet.id),\n            onLoad: () => {\n              setLoading(false);\n            },\n            src: \"\".concat(baseDomain, \"/sdk/2022-08-12/embedded-wallet/export-private-key?clientId=\").concat(props.client.clientId, \"&theme=\").concat(typeof props.theme === \"string\" ? props.theme : props.theme.type).concat(ecosystem ? \"&ecosystemId=\".concat(ecosystem.id) : \"\").concat(ecosystem !== null && ecosystem !== void 0 && ecosystem.partnerId ? \"&partnerId=\".concat(ecosystem.partnerId) : \"\"),\n            style: {\n              height: \"250px\",\n              visibility: isLoading ? \"hidden\" : \"unset\",\n              width: \"100%\"\n            },\n            title: \"Export In-App Wallet\"\n          })\n        })]\n      }), _jsx(Spacer, {\n        y: \"lg\"\n      })]\n    })]\n  });\n}","map":{"version":3,"names":["useEffect","useState","getThirdwebBaseUrl","webLocalStorage","isEcosystemWallet","ClientScopedStorage","Container","Line","ModalHeader","Spacer","Spinner","PrivateKey","props","_props$wallet$getConf2","isLoading","setLoading","baseDomain","loginReady","e","data","origin","eventType","_props$wallet","_props$wallet$getConf","iframe","document","getElementById","concat","wallet","id","HTMLIFrameElement","clientStorage","clientId","client","ecosystem","partnerId","getConfig","undefined","storage","contentWindow","postMessage","authToken","getAuthCookie","window","addEventListener","removeEventListener","Error","_jsxs","style","minHeight","children","_jsx","p","onBack","title","connectLocale","manageWallet","exportPrivateKey","px","scrollY","maxHeight","y","height","position","center","flex","width","color","size","zIndex","allow","onLoad","src","theme","type","visibility"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/web/ui/ConnectWallet/screens/PrivateKey.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport type { ThirdwebClient } from \"../../../../../client/client.js\";\nimport { getThirdwebBaseUrl } from \"../../../../../utils/domains.js\";\nimport { webLocalStorage } from \"../../../../../utils/storage/webStorage.js\";\nimport { isEcosystemWallet } from \"../../../../../wallets/ecosystem/is-ecosystem-wallet.js\";\nimport { ClientScopedStorage } from \"../../../../../wallets/in-app/core/authentication/client-scoped-storage.js\";\nimport type { Wallet } from \"../../../../../wallets/interfaces/wallet.js\";\nimport type { Theme } from \"../../../../core/design-system/index.js\";\nimport { Container, Line, ModalHeader } from \"../../components/basic.js\";\nimport { Spacer } from \"../../components/Spacer.js\";\nimport { Spinner } from \"../../components/Spinner.js\";\nimport type { ConnectLocale } from \"../locale/types.js\";\n\n/**\n * @internal\n */\nexport function PrivateKey(props: {\n  onBack: () => void;\n  wallet?: Wallet;\n  theme: \"light\" | \"dark\" | Theme;\n  client: ThirdwebClient;\n  connectLocale: ConnectLocale;\n}) {\n  const [isLoading, setLoading] = useState(true);\n  const baseDomain = getThirdwebBaseUrl(\"inAppWallet\");\n\n  useEffect(() => {\n    const loginReady = async (e: MessageEvent<{ eventType: string }>) => {\n      if (\n        typeof e.data === \"object\" &&\n        \"eventType\" in e.data &&\n        e.origin === baseDomain\n      ) {\n        if (e.data.eventType === \"exportPrivateKeyIframeLoaded\") {\n          const iframe = document.getElementById(\n            `export-wallet-${props.wallet?.id}`,\n          );\n\n          if (!(iframe instanceof HTMLIFrameElement)) {\n            return;\n          }\n          if (!props.wallet) {\n            return;\n          }\n\n          const clientStorage = new ClientScopedStorage({\n            clientId: props.client.clientId,\n            ecosystem: isEcosystemWallet(props.wallet)\n              ? {\n                  id: props.wallet.id,\n                  partnerId: props.wallet.getConfig()?.partnerId,\n                }\n              : undefined,\n            storage: webLocalStorage,\n          });\n          if (iframe?.contentWindow) {\n            iframe.contentWindow.postMessage(\n              {\n                authToken: await clientStorage.getAuthCookie(),\n                eventType: \"initExportPrivateKey\",\n              },\n              e.origin,\n            );\n          }\n        }\n      }\n    };\n    window.addEventListener(\"message\", loginReady);\n\n    return () => {\n      window.removeEventListener(\"message\", loginReady);\n    };\n  }, [props.wallet, props.client.clientId, baseDomain]);\n\n  if (!props.wallet) {\n    throw new Error(\"[PrivateKey] No wallet found\");\n  }\n\n  const ecosystem = isEcosystemWallet(props.wallet)\n    ? { id: props.wallet.id, partnerId: props.wallet.getConfig()?.partnerId }\n    : undefined;\n\n  return (\n    <Container\n      style={{\n        minHeight: \"300px\",\n      }}\n    >\n      <Container p=\"lg\">\n        <ModalHeader\n          onBack={props.onBack}\n          title={props.connectLocale.manageWallet.exportPrivateKey}\n        />\n      </Container>\n      <Line />\n      <Container\n        px=\"sm\"\n        scrollY\n        style={{\n          maxHeight: \"500px\",\n        }}\n      >\n        <Spacer y=\"md\" />\n        <Container style={{ height: \"250px\", position: \"relative\" }}>\n          {isLoading ? (\n            <Container\n              center=\"both\"\n              flex=\"column\"\n              style={{ height: \"100%\", position: \"absolute\", width: \"100%\" }}\n            >\n              <Spinner color=\"primaryButtonBg\" size=\"lg\" />\n            </Container>\n          ) : null}\n\n          <Container\n            style={{\n              height: \"100%\",\n              position: \"absolute\",\n              width: \"100%\",\n              zIndex: 11,\n            }}\n          >\n            <iframe\n              allow=\"clipboard-read; clipboard-write\"\n              id={`export-wallet-${props.wallet.id}`}\n              onLoad={() => {\n                setLoading(false);\n              }}\n              src={`${baseDomain}/sdk/2022-08-12/embedded-wallet/export-private-key?clientId=${\n                props.client.clientId\n              }&theme=${\n                typeof props.theme === \"string\" ? props.theme : props.theme.type\n              }${ecosystem ? `&ecosystemId=${ecosystem.id}` : \"\"}${\n                ecosystem?.partnerId ? `&partnerId=${ecosystem.partnerId}` : \"\"\n              }`}\n              style={{\n                height: \"250px\",\n                visibility: isLoading ? \"hidden\" : \"unset\",\n                width: \"100%\",\n              }}\n              title=\"Export In-App Wallet\"\n            />\n          </Container>\n        </Container>\n        <Spacer y=\"lg\" />\n      </Container>\n    </Container>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}