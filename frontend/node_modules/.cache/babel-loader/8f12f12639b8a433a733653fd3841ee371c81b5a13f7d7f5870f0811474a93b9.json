{"ast":null,"code":"import { formatLog } from \"viem\";\nimport { getAddress } from \"../../utils/address.js\";\nimport { numberToHex } from \"../../utils/encoding/hex.js\";\n/**\n * Retrieves logs from the Ethereum blockchain based on the specified parameters.\n * @param request - The EIP1193 request function.\n * @param params - The parameters for retrieving logs.\n * @returns A promise that resolves to the retrieved logs.\n * @rpc\n * @example\n * ```ts\n * import { getRpcClient, eth_getLogs } from \"thirdweb/rpc\";\n * const rpcRequest = getRpcClient({ client, chain });\n * const logs = await eth_getLogs(rpcRequest, {\n *  address: \"0x...\",\n *  fromBlock: 123456n,\n *  toBlock: 123456n,\n * });\n * ```\n */\nexport async function eth_getLogs(request) {\n  var _params$topics;\n  let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const topics = (_params$topics = params.topics) !== null && _params$topics !== void 0 ? _params$topics : [];\n  let logs;\n  // in the case we have a blockHash\n  if (params.blockHash) {\n    const param = {\n      blockHash: params.blockHash,\n      topics\n    };\n    if (params.address) {\n      param.address = getAddress(params.address);\n    }\n    logs = await request({\n      method: \"eth_getLogs\",\n      params: [param]\n    });\n  }\n  // otherwise\n  else {\n    const param = {\n      topics\n    };\n    if (params.address) {\n      param.address = params.address;\n    }\n    if (params.fromBlock) {\n      param.fromBlock = typeof params.fromBlock === \"bigint\" ? numberToHex(params.fromBlock) : params.fromBlock;\n    }\n    if (params.toBlock) {\n      param.toBlock = typeof params.toBlock === \"bigint\" ? numberToHex(params.toBlock) : params.toBlock;\n    }\n    logs = await request({\n      method: \"eth_getLogs\",\n      params: [param]\n    });\n  }\n  return logs.map(log => formatLog(log));\n}","map":{"version":3,"names":["formatLog","getAddress","numberToHex","eth_getLogs","request","_params$topics","params","arguments","length","undefined","topics","logs","blockHash","param","address","method","fromBlock","toBlock","map","log"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/rpc/actions/eth_getLogs.ts"],"sourcesContent":["import {\n  type BlockNumber,\n  type BlockTag,\n  type EIP1193RequestFn,\n  type EIP1474Methods,\n  formatLog,\n  type Hash,\n  type LogTopic,\n  type RpcLog,\n} from \"viem\";\nimport { type Address, getAddress } from \"../../utils/address.js\";\nimport { numberToHex } from \"../../utils/encoding/hex.js\";\n\nexport type GetLogsBlockParams =\n  | {\n      fromBlock?: BlockNumber | BlockTag;\n      toBlock?: BlockNumber | BlockTag;\n      blockHash?: never;\n      blockRange?: never;\n    }\n  | {\n      fromBlock?: never;\n      toBlock?: never;\n      blockHash?: Hash;\n      blockRange?: never;\n    }\n  | {\n      fromBlock?: BlockNumber | \"latest\";\n      toBlock?: never;\n      blockRange: BlockNumber;\n      blockHash?: never;\n    }\n  | {\n      fromBlock?: never;\n      toBlock?: BlockNumber | \"latest\";\n      blockRange: BlockNumber;\n      blockHash?: never;\n    }\n  | {\n      fromBlock?: never;\n      toBlock?: never;\n      blockRange: BlockNumber;\n      blockHash?: never;\n    };\n\nexport type GetLogsParams = {\n  topics?: LogTopic[];\n  address?: Address;\n} & GetLogsBlockParams;\n\n/**\n * Retrieves logs from the Ethereum blockchain based on the specified parameters.\n * @param request - The EIP1193 request function.\n * @param params - The parameters for retrieving logs.\n * @returns A promise that resolves to the retrieved logs.\n * @rpc\n * @example\n * ```ts\n * import { getRpcClient, eth_getLogs } from \"thirdweb/rpc\";\n * const rpcRequest = getRpcClient({ client, chain });\n * const logs = await eth_getLogs(rpcRequest, {\n *  address: \"0x...\",\n *  fromBlock: 123456n,\n *  toBlock: 123456n,\n * });\n * ```\n */\nexport async function eth_getLogs(\n  request: EIP1193RequestFn<EIP1474Methods>,\n  params: GetLogsParams = {},\n) {\n  const topics = params.topics ?? [];\n\n  let logs: RpcLog[];\n  // in the case we have a blockHash\n  if (params.blockHash) {\n    const param: {\n      address?: Address | Address[];\n      topics: LogTopic[];\n      blockHash: `0x${string}`;\n    } = {\n      blockHash: params.blockHash,\n      topics,\n    };\n    if (params.address) {\n      param.address = getAddress(params.address);\n    }\n    logs = await request({\n      method: \"eth_getLogs\",\n      params: [param],\n    });\n  }\n  // otherwise\n  else {\n    const param: {\n      address?: Address | Address[];\n      topics?: LogTopic[];\n    } & (\n      | {\n          fromBlock?: BlockTag | `0x${string}`;\n          toBlock?: BlockTag | `0x${string}`;\n          blockHash?: never;\n        }\n      | {\n          fromBlock?: never;\n          toBlock?: never;\n          blockHash?: `0x${string}`;\n        }\n    ) = { topics };\n    if (params.address) {\n      param.address = params.address;\n    }\n\n    if (params.fromBlock) {\n      param.fromBlock =\n        typeof params.fromBlock === \"bigint\"\n          ? numberToHex(params.fromBlock)\n          : params.fromBlock;\n    }\n    if (params.toBlock) {\n      param.toBlock =\n        typeof params.toBlock === \"bigint\"\n          ? numberToHex(params.toBlock)\n          : params.toBlock;\n    }\n\n    logs = await request({\n      method: \"eth_getLogs\",\n      params: [param],\n    });\n  }\n\n  return logs.map((log) => formatLog(log));\n}\n"],"mappings":"AAAA,SAKEA,SAAS,QAIJ,MAAM;AACb,SAAuBC,UAAU,QAAQ,wBAAwB;AACjE,SAASC,WAAW,QAAQ,6BAA6B;AAuCzD;;;;;;;;;;;;;;;;;AAiBA,OAAO,eAAeC,WAAWA,CAC/BC,OAAyC,EACf;EAAA,IAAAC,cAAA;EAAA,IAA1BC,MAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAwB,EAAE;EAE1B,MAAMG,MAAM,IAAAL,cAAA,GAAGC,MAAM,CAACI,MAAM,cAAAL,cAAA,cAAAA,cAAA,GAAI,EAAE;EAElC,IAAIM,IAAc;EAClB;EACA,IAAIL,MAAM,CAACM,SAAS,EAAE;IACpB,MAAMC,KAAK,GAIP;MACFD,SAAS,EAAEN,MAAM,CAACM,SAAS;MAC3BF;KACD;IACD,IAAIJ,MAAM,CAACQ,OAAO,EAAE;MAClBD,KAAK,CAACC,OAAO,GAAGb,UAAU,CAACK,MAAM,CAACQ,OAAO,CAAC;IAC5C;IACAH,IAAI,GAAG,MAAMP,OAAO,CAAC;MACnBW,MAAM,EAAE,aAAa;MACrBT,MAAM,EAAE,CAACO,KAAK;KACf,CAAC;EACJ;EACA;EAAA,KACK;IACH,MAAMA,KAAK,GAcP;MAAEH;IAAM,CAAE;IACd,IAAIJ,MAAM,CAACQ,OAAO,EAAE;MAClBD,KAAK,CAACC,OAAO,GAAGR,MAAM,CAACQ,OAAO;IAChC;IAEA,IAAIR,MAAM,CAACU,SAAS,EAAE;MACpBH,KAAK,CAACG,SAAS,GACb,OAAOV,MAAM,CAACU,SAAS,KAAK,QAAQ,GAChCd,WAAW,CAACI,MAAM,CAACU,SAAS,CAAC,GAC7BV,MAAM,CAACU,SAAS;IACxB;IACA,IAAIV,MAAM,CAACW,OAAO,EAAE;MAClBJ,KAAK,CAACI,OAAO,GACX,OAAOX,MAAM,CAACW,OAAO,KAAK,QAAQ,GAC9Bf,WAAW,CAACI,MAAM,CAACW,OAAO,CAAC,GAC3BX,MAAM,CAACW,OAAO;IACtB;IAEAN,IAAI,GAAG,MAAMP,OAAO,CAAC;MACnBW,MAAM,EAAE,aAAa;MACrBT,MAAM,EAAE,CAACO,KAAK;KACf,CAAC;EACJ;EAEA,OAAOF,IAAI,CAACO,GAAG,CAAEC,GAAG,IAAKnB,SAAS,CAACmB,GAAG,CAAC,CAAC;AAC1C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}