{"ast":null,"code":"import { hashBytecode } from \"viem/zksync\";\nimport { toHex } from \"../../../utils/encoding/hex.js\";\nexport const gasPerPubdataDefault = 50000n;\nexport const getEip712Domain = transaction => {\n  const message = transactionToMessage(transaction);\n  return {\n    domain: {\n      chainId: transaction.chainId,\n      name: \"zkSync\",\n      version: \"2\"\n    },\n    message: message,\n    primaryType: \"Transaction\",\n    types: {\n      Transaction: [{\n        name: \"txType\",\n        type: \"uint256\"\n      }, {\n        name: \"from\",\n        type: \"uint256\"\n      }, {\n        name: \"to\",\n        type: \"uint256\"\n      }, {\n        name: \"gasLimit\",\n        type: \"uint256\"\n      }, {\n        name: \"gasPerPubdataByteLimit\",\n        type: \"uint256\"\n      }, {\n        name: \"maxFeePerGas\",\n        type: \"uint256\"\n      }, {\n        name: \"maxPriorityFeePerGas\",\n        type: \"uint256\"\n      }, {\n        name: \"paymaster\",\n        type: \"uint256\"\n      }, {\n        name: \"nonce\",\n        type: \"uint256\"\n      }, {\n        name: \"value\",\n        type: \"uint256\"\n      }, {\n        name: \"data\",\n        type: \"bytes\"\n      }, {\n        name: \"factoryDeps\",\n        type: \"bytes32[]\"\n      }, {\n        name: \"paymasterInput\",\n        type: \"bytes\"\n      }]\n    }\n  };\n};\nfunction transactionToMessage(transaction) {\n  var _factoryDeps$map;\n  const {\n    gas,\n    nonce,\n    to,\n    from,\n    value,\n    maxFeePerGas,\n    maxPriorityFeePerGas,\n    paymaster,\n    paymasterInput,\n    gasPerPubdata,\n    data,\n    factoryDeps\n  } = transaction;\n  return {\n    data: data ? data : \"0x0\",\n    factoryDeps: (_factoryDeps$map = factoryDeps === null || factoryDeps === void 0 ? void 0 : factoryDeps.map(dep => toHex(hashBytecode(dep)))) !== null && _factoryDeps$map !== void 0 ? _factoryDeps$map : [],\n    from: BigInt(from),\n    gasLimit: gas !== null && gas !== void 0 ? gas : 0n,\n    gasPerPubdataByteLimit: gasPerPubdata !== null && gasPerPubdata !== void 0 ? gasPerPubdata : gasPerPubdataDefault,\n    maxFeePerGas: maxFeePerGas !== null && maxFeePerGas !== void 0 ? maxFeePerGas : 0n,\n    maxPriorityFeePerGas: maxPriorityFeePerGas !== null && maxPriorityFeePerGas !== void 0 ? maxPriorityFeePerGas : 0n,\n    nonce: nonce ? BigInt(nonce) : 0n,\n    paymaster: paymaster ? BigInt(paymaster) : 0n,\n    paymasterInput: paymasterInput ? paymasterInput : \"0x\",\n    to: to ? BigInt(to) : 0n,\n    txType: 113n,\n    value: value !== null && value !== void 0 ? value : 0n\n  };\n}","map":{"version":3,"names":["hashBytecode","toHex","gasPerPubdataDefault","getEip712Domain","transaction","message","transactionToMessage","domain","chainId","name","version","primaryType","types","Transaction","type","_factoryDeps$map","gas","nonce","to","from","value","maxFeePerGas","maxPriorityFeePerGas","paymaster","paymasterInput","gasPerPubdata","data","factoryDeps","map","dep","BigInt","gasLimit","gasPerPubdataByteLimit","txType"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/transaction/actions/zksync/getEip721Domain.ts"],"sourcesContent":["import { hashBytecode } from \"viem/zksync\";\nimport type { Address } from \"../../../utils/address.js\";\nimport { toHex } from \"../../../utils/encoding/hex.js\";\nimport type {\n  EIP712SerializedTransaction,\n  EIP712TransactionOptions,\n} from \"../../prepare-transaction.js\";\nimport type { SerializableTransaction } from \"../../serialize-transaction.js\";\n\nexport type EIP721TransactionSerializable = SerializableTransaction & {\n  from: Address;\n} & EIP712TransactionOptions;\nexport const gasPerPubdataDefault = 50000n;\n\nexport const getEip712Domain = (transaction: EIP721TransactionSerializable) => {\n  const message = transactionToMessage(transaction);\n\n  return {\n    domain: {\n      chainId: transaction.chainId,\n      name: \"zkSync\",\n      version: \"2\",\n    },\n    message: message,\n    primaryType: \"Transaction\",\n    types: {\n      Transaction: [\n        { name: \"txType\", type: \"uint256\" },\n        { name: \"from\", type: \"uint256\" },\n        { name: \"to\", type: \"uint256\" },\n        { name: \"gasLimit\", type: \"uint256\" },\n        { name: \"gasPerPubdataByteLimit\", type: \"uint256\" },\n        { name: \"maxFeePerGas\", type: \"uint256\" },\n        { name: \"maxPriorityFeePerGas\", type: \"uint256\" },\n        { name: \"paymaster\", type: \"uint256\" },\n        { name: \"nonce\", type: \"uint256\" },\n        { name: \"value\", type: \"uint256\" },\n        { name: \"data\", type: \"bytes\" },\n        { name: \"factoryDeps\", type: \"bytes32[]\" },\n        { name: \"paymasterInput\", type: \"bytes\" },\n      ],\n    },\n  };\n};\n\nfunction transactionToMessage(\n  transaction: EIP721TransactionSerializable,\n): EIP712SerializedTransaction {\n  const {\n    gas,\n    nonce,\n    to,\n    from,\n    value,\n    maxFeePerGas,\n    maxPriorityFeePerGas,\n    paymaster,\n    paymasterInput,\n    gasPerPubdata,\n    data,\n    factoryDeps,\n  } = transaction;\n\n  return {\n    data: data ? data : \"0x0\",\n    factoryDeps: factoryDeps?.map((dep) => toHex(hashBytecode(dep))) ?? [],\n    from: BigInt(from),\n    gasLimit: gas ?? 0n,\n    gasPerPubdataByteLimit: gasPerPubdata ?? gasPerPubdataDefault,\n    maxFeePerGas: maxFeePerGas ?? 0n,\n    maxPriorityFeePerGas: maxPriorityFeePerGas ?? 0n,\n    nonce: nonce ? BigInt(nonce) : 0n,\n    paymaster: paymaster ? BigInt(paymaster) : 0n,\n    paymasterInput: paymasterInput ? paymasterInput : \"0x\",\n    to: to ? BigInt(to) : 0n,\n    txType: 113n,\n    value: value ?? 0n,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}