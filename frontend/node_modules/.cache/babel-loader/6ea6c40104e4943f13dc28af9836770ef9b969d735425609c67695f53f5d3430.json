{"ast":null,"code":"import { decodeErrorResult, stringify } from \"viem\";\nimport { isInsufficientFundsError } from \"../analytics/track/helpers.js\";\nimport { trackInsufficientFundsError } from \"../analytics/track/transaction.js\";\nimport { resolveContractAbi } from \"../contract/actions/resolve-abi.js\";\nimport { isHex } from \"../utils/encoding/hex.js\";\nimport { IS_DEV } from \"../utils/process.js\";\n/**\n * @internal\n */\nexport async function extractError(args) {\n  const {\n    error,\n    contract,\n    fromAddress\n  } = args;\n  // Track insufficient funds errors during transaction preparation\n  if (isInsufficientFundsError(error) && contract) {\n    var _contract$chain;\n    trackInsufficientFundsError({\n      chainId: (_contract$chain = contract.chain) === null || _contract$chain === void 0 ? void 0 : _contract$chain.id,\n      client: contract.client,\n      contractAddress: contract.address,\n      error,\n      walletAddress: fromAddress\n    });\n  }\n  const result = await extractErrorResult({\n    contract,\n    error\n  });\n  if (result) {\n    return new TransactionError(result, contract);\n  }\n  return error;\n}\nexport async function extractErrorResult(args) {\n  const {\n    error,\n    contract\n  } = args;\n  if (typeof error === \"object\") {\n    // try to parse RPC error\n    const errorObj = error;\n    if (errorObj.data) {\n      if (errorObj.data !== \"0x\" && isHex(errorObj.data)) {\n        let abi = contract === null || contract === void 0 ? void 0 : contract.abi;\n        if (contract && !abi) {\n          abi = await resolveContractAbi(contract).catch(() => undefined);\n        }\n        const parsedError = decodeErrorResult({\n          abi,\n          data: errorObj.data\n        });\n        return \"\".concat(parsedError.errorName).concat(parsedError.args ? \" - \".concat(parsedError.args) : \"\");\n      }\n    }\n  }\n  return \"Execution Reverted: \".concat(stringify(error));\n}\nclass TransactionError extends Error {\n  constructor(reason, contract) {\n    var _contract$chain3;\n    let message = reason;\n    if (IS_DEV && contract) {\n      var _contract$chain2;\n      // show more infor in dev\n      message = [reason, \"\", \"contract: \".concat(contract.address), \"chainId: \".concat((_contract$chain2 = contract.chain) === null || _contract$chain2 === void 0 ? void 0 : _contract$chain2.id)].join(\"\\n\");\n    }\n    super(message);\n    Object.defineProperty(this, \"contractAddress\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"chainId\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    this.name = \"TransactionError\";\n    this.contractAddress = contract === null || contract === void 0 ? void 0 : contract.address;\n    this.chainId = contract === null || contract === void 0 || (_contract$chain3 = contract.chain) === null || _contract$chain3 === void 0 ? void 0 : _contract$chain3.id;\n    this.message = message;\n  }\n}","map":{"version":3,"names":["decodeErrorResult","stringify","isInsufficientFundsError","trackInsufficientFundsError","resolveContractAbi","isHex","IS_DEV","extractError","args","error","contract","fromAddress","_contract$chain","chainId","chain","id","client","contractAddress","address","walletAddress","result","extractErrorResult","TransactionError","errorObj","data","abi","catch","undefined","parsedError","concat","errorName","Error","constructor","reason","_contract$chain3","message","_contract$chain2","join","Object","defineProperty","name"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/transaction/extract-error.ts"],"sourcesContent":["import type { Abi } from \"abitype\";\nimport { decodeErrorResult, type Hex, stringify } from \"viem\";\nimport { isInsufficientFundsError } from \"../analytics/track/helpers.js\";\nimport { trackInsufficientFundsError } from \"../analytics/track/transaction.js\";\nimport { resolveContractAbi } from \"../contract/actions/resolve-abi.js\";\nimport type { ThirdwebContract } from \"../contract/contract.js\";\nimport { isHex } from \"../utils/encoding/hex.js\";\nimport { IS_DEV } from \"../utils/process.js\";\n\n/**\n * @internal\n */\nexport async function extractError<abi extends Abi>(args: {\n  error: unknown;\n  contract?: ThirdwebContract<abi>;\n  fromAddress?: string;\n}) {\n  const { error, contract, fromAddress } = args;\n\n  // Track insufficient funds errors during transaction preparation\n  if (isInsufficientFundsError(error) && contract) {\n    trackInsufficientFundsError({\n      chainId: contract.chain?.id,\n      client: contract.client,\n      contractAddress: contract.address,\n      error,\n      walletAddress: fromAddress,\n    });\n  }\n\n  const result = await extractErrorResult({ contract, error });\n  if (result) {\n    return new TransactionError(result, contract);\n  }\n  return error;\n}\n\nexport async function extractErrorResult<abi extends Abi>(args: {\n  error: unknown;\n  contract?: ThirdwebContract<abi>;\n}): Promise<string | undefined> {\n  const { error, contract } = args;\n  if (typeof error === \"object\") {\n    // try to parse RPC error\n    const errorObj = error as {\n      message?: string;\n      code?: number;\n      data?: Hex;\n    };\n    if (errorObj.data) {\n      if (errorObj.data !== \"0x\" && isHex(errorObj.data)) {\n        let abi = contract?.abi;\n        if (contract && !abi) {\n          abi = await resolveContractAbi(contract).catch(() => undefined);\n        }\n        const parsedError = decodeErrorResult({\n          abi,\n          data: errorObj.data,\n        });\n        return `${parsedError.errorName}${parsedError.args ? ` - ${parsedError.args}` : \"\"}`;\n      }\n    }\n  }\n  return `Execution Reverted: ${stringify(error)}`;\n}\n\nclass TransactionError<abi extends Abi> extends Error {\n  public contractAddress: string | undefined;\n  public chainId: number | undefined;\n\n  constructor(reason: string, contract?: ThirdwebContract<abi>) {\n    let message = reason;\n    if (IS_DEV && contract) {\n      // show more infor in dev\n      message = [\n        reason,\n        \"\",\n        `contract: ${contract.address}`,\n        `chainId: ${contract.chain?.id}`,\n      ].join(\"\\n\");\n    }\n    super(message);\n    this.name = \"TransactionError\";\n    this.contractAddress = contract?.address;\n    this.chainId = contract?.chain?.id;\n    this.message = message;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}