{"ast":null,"code":"import { stringify } from \"../../../../../utils/json.js\";\nimport { getLoginCallbackUrl, getLoginUrl } from \"../../../core/authentication/getLoginPath.js\";\n/**\n * @internal\n */\nexport const sendOtp = async args => {\n  const {\n    client,\n    ecosystem\n  } = args;\n  const url = getLoginUrl({\n    authOption: args.strategy,\n    client,\n    ecosystem\n  });\n  const headers = {\n    \"Content-Type\": \"application/json\",\n    \"x-client-id\": client.clientId\n  };\n  if (ecosystem !== null && ecosystem !== void 0 && ecosystem.id) {\n    headers[\"x-ecosystem-id\"] = ecosystem.id;\n  }\n  if (ecosystem !== null && ecosystem !== void 0 && ecosystem.partnerId) {\n    headers[\"x-ecosystem-partner-id\"] = ecosystem.partnerId;\n  }\n  const body = (() => {\n    switch (args.strategy) {\n      case \"email\":\n        return {\n          email: args.email\n        };\n      case \"phone\":\n        return {\n          phone: args.phoneNumber\n        };\n    }\n  })();\n  const response = await fetch(url, {\n    body: stringify(body),\n    headers,\n    method: \"POST\"\n  });\n  if (!response.ok) {\n    throw new Error(\"Failed to send verification code\");\n  }\n  return await response.json();\n};\n/**\n * @internal\n */\nexport const verifyOtp = async args => {\n  const {\n    client,\n    ecosystem\n  } = args;\n  const url = getLoginCallbackUrl({\n    authOption: args.strategy,\n    client: args.client,\n    ecosystem: args.ecosystem\n  });\n  const headers = {\n    \"Content-Type\": \"application/json\",\n    \"x-client-id\": client.clientId\n  };\n  if (ecosystem !== null && ecosystem !== void 0 && ecosystem.id) {\n    headers[\"x-ecosystem-id\"] = ecosystem.id;\n  }\n  if (ecosystem !== null && ecosystem !== void 0 && ecosystem.partnerId) {\n    headers[\"x-ecosystem-partner-id\"] = ecosystem.partnerId;\n  }\n  const body = (() => {\n    switch (args.strategy) {\n      case \"email\":\n        return {\n          code: args.verificationCode,\n          email: args.email\n        };\n      case \"phone\":\n        return {\n          code: args.verificationCode,\n          phone: args.phoneNumber\n        };\n    }\n  })();\n  const response = await fetch(url, {\n    body: stringify(body),\n    headers,\n    method: \"POST\"\n  });\n  if (!response.ok) {\n    throw new Error(\"Failed to verify verification code\");\n  }\n  return await response.json();\n};","map":{"version":3,"names":["stringify","getLoginCallbackUrl","getLoginUrl","sendOtp","args","client","ecosystem","url","authOption","strategy","headers","clientId","id","partnerId","body","email","phone","phoneNumber","response","fetch","method","ok","Error","json","verifyOtp","code","verificationCode"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/wallets/in-app/web/lib/auth/otp.ts"],"sourcesContent":["import type { ThirdwebClient } from \"../../../../../client/client.js\";\nimport { stringify } from \"../../../../../utils/json.js\";\nimport {\n  getLoginCallbackUrl,\n  getLoginUrl,\n} from \"../../../core/authentication/getLoginPath.js\";\nimport type {\n  AuthStoredTokenWithCookieReturnType,\n  MultiStepAuthArgsType,\n  PreAuthArgsType,\n} from \"../../../core/authentication/types.js\";\nimport type { Ecosystem } from \"../../../core/wallet/types.js\";\n\n/**\n * @internal\n */\nexport const sendOtp = async (args: PreAuthArgsType): Promise<void> => {\n  const { client, ecosystem } = args;\n  const url = getLoginUrl({ authOption: args.strategy, client, ecosystem });\n\n  const headers: Record<string, string> = {\n    \"Content-Type\": \"application/json\",\n    \"x-client-id\": client.clientId,\n  };\n\n  if (ecosystem?.id) {\n    headers[\"x-ecosystem-id\"] = ecosystem.id;\n  }\n\n  if (ecosystem?.partnerId) {\n    headers[\"x-ecosystem-partner-id\"] = ecosystem.partnerId;\n  }\n\n  const body = (() => {\n    switch (args.strategy) {\n      case \"email\":\n        return {\n          email: args.email,\n        };\n      case \"phone\":\n        return {\n          phone: args.phoneNumber,\n        };\n    }\n  })();\n\n  const response = await fetch(url, {\n    body: stringify(body),\n    headers,\n    method: \"POST\",\n  });\n\n  if (!response.ok) {\n    throw new Error(\"Failed to send verification code\");\n  }\n\n  return await response.json();\n};\n\n/**\n * @internal\n */\nexport const verifyOtp = async (\n  args: MultiStepAuthArgsType & {\n    client: ThirdwebClient;\n    ecosystem?: Ecosystem;\n  },\n): Promise<AuthStoredTokenWithCookieReturnType> => {\n  const { client, ecosystem } = args;\n  const url = getLoginCallbackUrl({\n    authOption: args.strategy,\n    client: args.client,\n    ecosystem: args.ecosystem,\n  });\n\n  const headers: Record<string, string> = {\n    \"Content-Type\": \"application/json\",\n    \"x-client-id\": client.clientId,\n  };\n\n  if (ecosystem?.id) {\n    headers[\"x-ecosystem-id\"] = ecosystem.id;\n  }\n\n  if (ecosystem?.partnerId) {\n    headers[\"x-ecosystem-partner-id\"] = ecosystem.partnerId;\n  }\n\n  const body = (() => {\n    switch (args.strategy) {\n      case \"email\":\n        return {\n          code: args.verificationCode,\n          email: args.email,\n        };\n      case \"phone\":\n        return {\n          code: args.verificationCode,\n          phone: args.phoneNumber,\n        };\n    }\n  })();\n\n  const response = await fetch(url, {\n    body: stringify(body),\n    headers,\n    method: \"POST\",\n  });\n\n  if (!response.ok) {\n    throw new Error(\"Failed to verify verification code\");\n  }\n\n  return await response.json();\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}