{"ast":null,"code":"import _objectSpread from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"account\", \"chain\"];\nimport { parseAccount } from '../../accounts/utils/parseAccount.js';\nimport { getChainId } from '../../actions/public/getChainId.js';\nimport { signTypedData } from '../../actions/wallet/signTypedData.js';\nimport { AccountNotFoundError } from '../../errors/account.js';\nimport { BaseError } from '../../errors/base.js';\nimport { assertCurrentChain } from '../../utils/chain/assertCurrentChain.js';\nimport { getAction } from '../../utils/getAction.js';\nimport { assertEip712Request } from '../utils/assertEip712Request.js';\n/**\n * Signs an EIP712 transaction.\n *\n *\n * @param client - Client to use\n * @param args - {@link SignTransactionParameters}\n * @returns The signed serialized transaction. {@link SignTransactionReturnType}\n *\n * @example\n * import { createWalletClient, custom } from 'viem'\n * import { zksync } from 'viem/chains'\n * import { signEip712Transaction } from 'viem/zksync'\n *\n * const client = createWalletClient({\n *   chain: zksync,\n *   transport: custom(window.ethereum),\n * })\n * const signature = await signEip712Transaction(client, {\n *   account: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n *   to: '0x0000000000000000000000000000000000000000',\n *   value: 1n,\n * })\n *\n * @example\n * // Account Hoisting\n * import { createWalletClient, http } from 'viem'\n * import { privateKeyToAccount } from 'viem/accounts'\n * import { zksync } from 'viem/chains'\n * import { signEip712Transaction } from 'viem/zksync'\n *\n * const client = createWalletClient({\n *   account: privateKeyToAccount('0x…'),\n *   chain: zksync,\n *   transport: custom(window.ethereum),\n * })\n * const signature = await signEip712Transaction(client, {\n *   to: '0x0000000000000000000000000000000000000000',\n *   value: 1n,\n * })\n */\nexport async function signEip712Transaction(client, args) {\n  var _chain$custom, _chain$serializers, _chain$serializers2;\n  const {\n      account: account_ = client.account,\n      chain = client.chain\n    } = args,\n    transaction = _objectWithoutProperties(args, _excluded);\n  const account = account_ ? parseAccount(account_) : client.account;\n  if (!account) throw new AccountNotFoundError({\n    docsPath: '/docs/actions/wallet/signTransaction'\n  });\n  assertEip712Request(_objectSpread({\n    account,\n    chain\n  }, args));\n  if (!(chain !== null && chain !== void 0 && (_chain$custom = chain.custom) !== null && _chain$custom !== void 0 && _chain$custom.getEip712Domain)) throw new BaseError('`getEip712Domain` not found on chain.');\n  if (!(chain !== null && chain !== void 0 && (_chain$serializers = chain.serializers) !== null && _chain$serializers !== void 0 && _chain$serializers.transaction)) throw new BaseError('transaction serializer not found on chain.');\n  const chainId = await getAction(client, getChainId, 'getChainId')({});\n  if (chain !== null) assertCurrentChain({\n    currentChainId: chainId,\n    chain: chain\n  });\n  const eip712Domain = chain === null || chain === void 0 ? void 0 : chain.custom.getEip712Domain(_objectSpread(_objectSpread({}, transaction), {}, {\n    chainId,\n    from: account.address,\n    type: 'eip712'\n  }));\n  const customSignature = await signTypedData(client, _objectSpread(_objectSpread({}, eip712Domain), {}, {\n    account\n  }));\n  return chain === null || chain === void 0 || (_chain$serializers2 = chain.serializers) === null || _chain$serializers2 === void 0 ? void 0 : _chain$serializers2.transaction(_objectSpread(_objectSpread({\n    chainId\n  }, transaction), {}, {\n    customSignature,\n    type: 'eip712'\n  }), {\n    r: '0x0',\n    s: '0x0',\n    v: 0n\n  });\n}","map":{"version":3,"names":["parseAccount","getChainId","signTypedData","AccountNotFoundError","BaseError","assertCurrentChain","getAction","assertEip712Request","signEip712Transaction","client","args","_chain$custom","_chain$serializers","_chain$serializers2","account","account_","chain","transaction","_objectWithoutProperties","_excluded","docsPath","_objectSpread","custom","getEip712Domain","serializers","chainId","currentChainId","eip712Domain","from","address","type","customSignature","r","s","v"],"sources":["/home/user/Arbitrage/frontend/node_modules/viem/zksync/actions/signEip712Transaction.ts"],"sourcesContent":["import type { Account } from '../../accounts/types.js'\nimport { parseAccount } from '../../accounts/utils/parseAccount.js'\nimport { getChainId } from '../../actions/public/getChainId.js'\nimport type {\n  SignTransactionErrorType,\n  SignTransactionReturnType,\n} from '../../actions/wallet/signTransaction.js'\nimport { signTypedData } from '../../actions/wallet/signTypedData.js'\nimport type { Client } from '../../clients/createClient.js'\nimport type { Transport } from '../../clients/transports/createTransport.js'\nimport { AccountNotFoundError } from '../../errors/account.js'\nimport { BaseError } from '../../errors/base.js'\nimport type { GetAccountParameter } from '../../types/account.js'\nimport type {\n  ExtractChainFormatterParameters,\n  GetChainParameter,\n} from '../../types/chain.js'\nimport type { UnionOmit } from '../../types/utils.js'\nimport { assertCurrentChain } from '../../utils/chain/assertCurrentChain.js'\nimport { getAction } from '../../utils/getAction.js'\nimport type { ChainEIP712 } from '../types/chain.js'\nimport type { TransactionRequestEIP712 } from '../types/transaction.js'\nimport {\n  type AssertEip712RequestParameters,\n  assertEip712Request,\n} from '../utils/assertEip712Request.js'\n\ntype FormattedTransactionRequest<\n  chain extends ChainEIP712 | undefined = ChainEIP712 | undefined,\n> = ExtractChainFormatterParameters<\n  chain,\n  'transactionRequest',\n  TransactionRequestEIP712\n>\n\nexport type SignEip712TransactionParameters<\n  chain extends ChainEIP712 | undefined = ChainEIP712 | undefined,\n  account extends Account | undefined = Account | undefined,\n  chainOverride extends ChainEIP712 | undefined = ChainEIP712 | undefined,\n> = UnionOmit<\n  FormattedTransactionRequest<\n    chainOverride extends ChainEIP712 ? chainOverride : chain\n  >,\n  'from'\n> &\n  GetAccountParameter<account> &\n  GetChainParameter<chain, chainOverride>\n\nexport type SignEip712TransactionReturnType = SignTransactionReturnType\n\nexport type SignEip712TransactionErrorType = SignTransactionErrorType\n\n/**\n * Signs an EIP712 transaction.\n *\n *\n * @param client - Client to use\n * @param args - {@link SignTransactionParameters}\n * @returns The signed serialized transaction. {@link SignTransactionReturnType}\n *\n * @example\n * import { createWalletClient, custom } from 'viem'\n * import { zksync } from 'viem/chains'\n * import { signEip712Transaction } from 'viem/zksync'\n *\n * const client = createWalletClient({\n *   chain: zksync,\n *   transport: custom(window.ethereum),\n * })\n * const signature = await signEip712Transaction(client, {\n *   account: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n *   to: '0x0000000000000000000000000000000000000000',\n *   value: 1n,\n * })\n *\n * @example\n * // Account Hoisting\n * import { createWalletClient, http } from 'viem'\n * import { privateKeyToAccount } from 'viem/accounts'\n * import { zksync } from 'viem/chains'\n * import { signEip712Transaction } from 'viem/zksync'\n *\n * const client = createWalletClient({\n *   account: privateKeyToAccount('0x…'),\n *   chain: zksync,\n *   transport: custom(window.ethereum),\n * })\n * const signature = await signEip712Transaction(client, {\n *   to: '0x0000000000000000000000000000000000000000',\n *   value: 1n,\n * })\n */\nexport async function signEip712Transaction<\n  chain extends ChainEIP712 | undefined,\n  account extends Account | undefined,\n  chainOverride extends ChainEIP712 | undefined,\n>(\n  client: Client<Transport, chain, account>,\n  args: SignEip712TransactionParameters<chain, account, chainOverride>,\n): Promise<SignEip712TransactionReturnType> {\n  const {\n    account: account_ = client.account,\n    chain = client.chain,\n    ...transaction\n  } = args\n\n  const account = account_ ? parseAccount(account_) : client.account\n\n  if (!account)\n    throw new AccountNotFoundError({\n      docsPath: '/docs/actions/wallet/signTransaction',\n    })\n\n  assertEip712Request({\n    account,\n    chain,\n    ...(args as AssertEip712RequestParameters),\n  })\n\n  if (!chain?.custom?.getEip712Domain)\n    throw new BaseError('`getEip712Domain` not found on chain.')\n  if (!chain?.serializers?.transaction)\n    throw new BaseError('transaction serializer not found on chain.')\n\n  const chainId = await getAction(client, getChainId, 'getChainId')({})\n  if (chain !== null)\n    assertCurrentChain({\n      currentChainId: chainId,\n      chain: chain,\n    })\n\n  const eip712Domain = chain?.custom.getEip712Domain({\n    ...transaction,\n    chainId,\n    from: account.address,\n    type: 'eip712',\n  })\n\n  const customSignature = await signTypedData(client, {\n    ...eip712Domain,\n    account,\n  })\n\n  return chain?.serializers?.transaction(\n    {\n      chainId,\n      ...transaction,\n      customSignature,\n      type: 'eip712' as any,\n    },\n    { r: '0x0', s: '0x0', v: 0n },\n  ) as SignEip712TransactionReturnType\n}\n"],"mappings":";;;AACA,SAASA,YAAY,QAAQ,sCAAsC;AACnE,SAASC,UAAU,QAAQ,oCAAoC;AAK/D,SAASC,aAAa,QAAQ,uCAAuC;AAGrE,SAASC,oBAAoB,QAAQ,yBAAyB;AAC9D,SAASC,SAAS,QAAQ,sBAAsB;AAOhD,SAASC,kBAAkB,QAAQ,yCAAyC;AAC5E,SAASC,SAAS,QAAQ,0BAA0B;AAGpD,SAEEC,mBAAmB,QACd,iCAAiC;AA2BxC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,OAAO,eAAeC,qBAAqBA,CAKzCC,MAAyC,EACzCC,IAAoE;EAAA,IAAAC,aAAA,EAAAC,kBAAA,EAAAC,mBAAA;EAEpE,MAAM;MACJC,OAAO,EAAEC,QAAQ,GAAGN,MAAM,CAACK,OAAO;MAClCE,KAAK,GAAGP,MAAM,CAACO;IACD,CACf,GAAGN,IAAI;IADHO,WAAW,GAAAC,wBAAA,CACZR,IAAI,EAAAS,SAAA;EAER,MAAML,OAAO,GAAGC,QAAQ,GAAGf,YAAY,CAACe,QAAQ,CAAC,GAAGN,MAAM,CAACK,OAAO;EAElE,IAAI,CAACA,OAAO,EACV,MAAM,IAAIX,oBAAoB,CAAC;IAC7BiB,QAAQ,EAAE;GACX,CAAC;EAEJb,mBAAmB,CAAAc,aAAA;IACjBP,OAAO;IACPE;EAAK,GACDN,IAAsC,CAC3C,CAAC;EAEF,IAAI,EAACM,KAAK,aAALA,KAAK,gBAAAL,aAAA,GAALK,KAAK,CAAEM,MAAM,cAAAX,aAAA,eAAbA,aAAA,CAAeY,eAAe,GACjC,MAAM,IAAInB,SAAS,CAAC,uCAAuC,CAAC;EAC9D,IAAI,EAACY,KAAK,aAALA,KAAK,gBAAAJ,kBAAA,GAALI,KAAK,CAAEQ,WAAW,cAAAZ,kBAAA,eAAlBA,kBAAA,CAAoBK,WAAW,GAClC,MAAM,IAAIb,SAAS,CAAC,4CAA4C,CAAC;EAEnE,MAAMqB,OAAO,GAAG,MAAMnB,SAAS,CAACG,MAAM,EAAER,UAAU,EAAE,YAAY,CAAC,CAAC,EAAE,CAAC;EACrE,IAAIe,KAAK,KAAK,IAAI,EAChBX,kBAAkB,CAAC;IACjBqB,cAAc,EAAED,OAAO;IACvBT,KAAK,EAAEA;GACR,CAAC;EAEJ,MAAMW,YAAY,GAAGX,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEM,MAAM,CAACC,eAAe,CAAAF,aAAA,CAAAA,aAAA,KAC7CJ,WAAW;IACdQ,OAAO;IACPG,IAAI,EAAEd,OAAO,CAACe,OAAO;IACrBC,IAAI,EAAE;EAAQ,EACf,CAAC;EAEF,MAAMC,eAAe,GAAG,MAAM7B,aAAa,CAACO,MAAM,EAAAY,aAAA,CAAAA,aAAA,KAC7CM,YAAY;IACfb;EAAO,EACR,CAAC;EAEF,OAAOE,KAAK,aAALA,KAAK,gBAAAH,mBAAA,GAALG,KAAK,CAAEQ,WAAW,cAAAX,mBAAA,uBAAlBA,mBAAA,CAAoBI,WAAW,CAAAI,aAAA,CAAAA,aAAA;IAElCI;EAAO,GACJR,WAAW;IACdc,eAAe;IACfD,IAAI,EAAE;EAAe,IAEvB;IAAEE,CAAC,EAAE,KAAK;IAAEC,CAAC,EAAE,KAAK;IAAEC,CAAC,EAAE;EAAE,CAAE,CACK;AACtC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}