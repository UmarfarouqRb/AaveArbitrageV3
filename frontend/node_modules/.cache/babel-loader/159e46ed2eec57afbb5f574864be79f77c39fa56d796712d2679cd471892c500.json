{"ast":null,"code":"/**\n * Extracts the implementation address from a given bytecode string if it matches any of the known minimal proxy patterns.\n * @param bytecode The bytecode string to extract the implementation address from.\n * @returns The implementation address as a string if a match is found, otherwise undefined.\n * @example\n * ```ts\n * import { extractMinimalProxyImplementationAddress } from \"thirdweb/utils\";\n * const bytecode = \"0x363d3d373d3d3d363d73...\";\n * const implementationAddress = extractMinimalProxyImplementationAddress(bytecode);\n * ```\n * @utils\n */\nexport function extractMinimalProxyImplementationAddress(bytecode) {\n  if (!bytecode.startsWith(\"0x\")) {\n    bytecode = \"0x\".concat(bytecode);\n  }\n  // EIP-1167 clone minimal proxy - https://eips.ethereum.org/EIPS/eip-1167\n  if (bytecode.startsWith(\"0x363d3d373d3d3d363d73\")) {\n    const implementationAddress = bytecode.slice(22, 62);\n    return \"0x\".concat(implementationAddress);\n  }\n  // Minimal Proxy with receive() from 0xSplits - https://github.com/0xSplits/splits-contracts/blob/c7b741926ec9746182d0d1e2c4c2046102e5d337/contracts/libraries/Clones.sol\n  if (bytecode.startsWith(\"0x36603057343d5230\")) {\n    // +40 = size of addr\n    const implementationAddress = bytecode.slice(122, 122 + 40);\n    return \"0x\".concat(implementationAddress);\n  }\n  // 0age's minimal proxy - https://medium.com/coinmonks/the-more-minimal-proxy-5756ae08ee48\n  if (bytecode.startsWith(\"0x3d3d3d3d363d3d37363d73\")) {\n    // +40 = size of addr\n    const implementationAddress = bytecode.slice(24, 24 + 40);\n    return \"0x\".concat(implementationAddress);\n  }\n  // vyper's minimal proxy (uniswap v1) - https://etherscan.io/address/0x09cabec1ead1c0ba254b09efb3ee13841712be14#code\n  if (bytecode.startsWith(\"0x366000600037611000600036600073\")) {\n    const implementationAddress = bytecode.slice(32, 32 + 40);\n    return \"0x\".concat(implementationAddress);\n  }\n  if (bytecode.startsWith(\"0x36600080376020600036600073\")) {\n    const implementationAddress = bytecode.slice(28, 28 + 40);\n    return \"0x\".concat(implementationAddress);\n  }\n  // EIP-7511 minimal proxy with PUSH0 opcode - https://eips.ethereum.org/EIPS/eip-7511\n  if (bytecode.startsWith(\"0x365f5f375f5f365f73\")) {\n    const implementationAddress = bytecode.slice(20, 60);\n    return \"0x\".concat(implementationAddress);\n  }\n  // EIP-7702 - https://eips.ethereum.org/EIPS/eip-7702#abstract\n  if (bytecode.length === 48 && bytecode.startsWith(\"0xef0100\")) {\n    const implementationAddress = bytecode.slice(8, 48);\n    return \"0x\".concat(implementationAddress);\n  }\n  return undefined;\n}","map":{"version":3,"names":["extractMinimalProxyImplementationAddress","bytecode","startsWith","concat","implementationAddress","slice","length","undefined"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/utils/bytecode/extractMinimalProxyImplementationAddress.ts"],"sourcesContent":["/**\n * Extracts the implementation address from a given bytecode string if it matches any of the known minimal proxy patterns.\n * @param bytecode The bytecode string to extract the implementation address from.\n * @returns The implementation address as a string if a match is found, otherwise undefined.\n * @example\n * ```ts\n * import { extractMinimalProxyImplementationAddress } from \"thirdweb/utils\";\n * const bytecode = \"0x363d3d373d3d3d363d73...\";\n * const implementationAddress = extractMinimalProxyImplementationAddress(bytecode);\n * ```\n * @utils\n */\nexport function extractMinimalProxyImplementationAddress(\n  bytecode: string,\n): string | undefined {\n  if (!bytecode.startsWith(\"0x\")) {\n    bytecode = `0x${bytecode}`;\n  }\n  // EIP-1167 clone minimal proxy - https://eips.ethereum.org/EIPS/eip-1167\n  if (bytecode.startsWith(\"0x363d3d373d3d3d363d73\")) {\n    const implementationAddress = bytecode.slice(22, 62);\n    return `0x${implementationAddress}`;\n  }\n\n  // Minimal Proxy with receive() from 0xSplits - https://github.com/0xSplits/splits-contracts/blob/c7b741926ec9746182d0d1e2c4c2046102e5d337/contracts/libraries/Clones.sol\n  if (bytecode.startsWith(\"0x36603057343d5230\")) {\n    // +40 = size of addr\n    const implementationAddress = bytecode.slice(122, 122 + 40);\n    return `0x${implementationAddress}`;\n  }\n\n  // 0age's minimal proxy - https://medium.com/coinmonks/the-more-minimal-proxy-5756ae08ee48\n  if (bytecode.startsWith(\"0x3d3d3d3d363d3d37363d73\")) {\n    // +40 = size of addr\n    const implementationAddress = bytecode.slice(24, 24 + 40);\n    return `0x${implementationAddress}`;\n  }\n\n  // vyper's minimal proxy (uniswap v1) - https://etherscan.io/address/0x09cabec1ead1c0ba254b09efb3ee13841712be14#code\n  if (bytecode.startsWith(\"0x366000600037611000600036600073\")) {\n    const implementationAddress = bytecode.slice(32, 32 + 40);\n    return `0x${implementationAddress}`;\n  }\n\n  if (bytecode.startsWith(\"0x36600080376020600036600073\")) {\n    const implementationAddress = bytecode.slice(28, 28 + 40);\n    return `0x${implementationAddress}`;\n  }\n\n  // EIP-7511 minimal proxy with PUSH0 opcode - https://eips.ethereum.org/EIPS/eip-7511\n  if (bytecode.startsWith(\"0x365f5f375f5f365f73\")) {\n    const implementationAddress = bytecode.slice(20, 60);\n    return `0x${implementationAddress}`;\n  }\n\n  // EIP-7702 - https://eips.ethereum.org/EIPS/eip-7702#abstract\n  if (bytecode.length === 48 && bytecode.startsWith(\"0xef0100\")) {\n    const implementationAddress = bytecode.slice(8, 48);\n    return `0x${implementationAddress}`;\n  }\n\n  return undefined;\n}\n"],"mappings":"AAAA;;;;;;;;;;;;AAYA,OAAM,SAAUA,wCAAwCA,CACtDC,QAAgB;EAEhB,IAAI,CAACA,QAAQ,CAACC,UAAU,CAAC,IAAI,CAAC,EAAE;IAC9BD,QAAQ,QAAAE,MAAA,CAAQF,QAAQ,CAAE;EAC5B;EACA;EACA,IAAIA,QAAQ,CAACC,UAAU,CAAC,wBAAwB,CAAC,EAAE;IACjD,MAAME,qBAAqB,GAAGH,QAAQ,CAACI,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC;IACpD,YAAAF,MAAA,CAAYC,qBAAqB;EACnC;EAEA;EACA,IAAIH,QAAQ,CAACC,UAAU,CAAC,oBAAoB,CAAC,EAAE;IAC7C;IACA,MAAME,qBAAqB,GAAGH,QAAQ,CAACI,KAAK,CAAC,GAAG,EAAE,GAAG,GAAG,EAAE,CAAC;IAC3D,YAAAF,MAAA,CAAYC,qBAAqB;EACnC;EAEA;EACA,IAAIH,QAAQ,CAACC,UAAU,CAAC,0BAA0B,CAAC,EAAE;IACnD;IACA,MAAME,qBAAqB,GAAGH,QAAQ,CAACI,KAAK,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC;IACzD,YAAAF,MAAA,CAAYC,qBAAqB;EACnC;EAEA;EACA,IAAIH,QAAQ,CAACC,UAAU,CAAC,kCAAkC,CAAC,EAAE;IAC3D,MAAME,qBAAqB,GAAGH,QAAQ,CAACI,KAAK,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC;IACzD,YAAAF,MAAA,CAAYC,qBAAqB;EACnC;EAEA,IAAIH,QAAQ,CAACC,UAAU,CAAC,8BAA8B,CAAC,EAAE;IACvD,MAAME,qBAAqB,GAAGH,QAAQ,CAACI,KAAK,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC;IACzD,YAAAF,MAAA,CAAYC,qBAAqB;EACnC;EAEA;EACA,IAAIH,QAAQ,CAACC,UAAU,CAAC,sBAAsB,CAAC,EAAE;IAC/C,MAAME,qBAAqB,GAAGH,QAAQ,CAACI,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC;IACpD,YAAAF,MAAA,CAAYC,qBAAqB;EACnC;EAEA;EACA,IAAIH,QAAQ,CAACK,MAAM,KAAK,EAAE,IAAIL,QAAQ,CAACC,UAAU,CAAC,UAAU,CAAC,EAAE;IAC7D,MAAME,qBAAqB,GAAGH,QAAQ,CAACI,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;IACnD,YAAAF,MAAA,CAAYC,qBAAqB;EACnC;EAEA,OAAOG,SAAS;AAClB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}