{"ast":null,"code":"import _objectSpread from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { sendAndConfirmCalls } from \"../../../../wallets/eip5792/send-and-confirm-calls.js\";\nimport { invalidateWalletBalance } from \"../../providers/invalidateWalletBalance.js\";\nimport { useActiveWallet } from \"./useActiveWallet.js\";\n/**\n * A hook to send [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) calls to a wallet.\n * This hook works with all Thirdweb wallets (in-app and smart) and certain injected wallets that already support EIP-5792.\n * Transactions will be batched and sponsored when those capabilities are supported, otherwise they will be sent as individual transactions.\n *\n * When calls are sent, all contracts that are interacted with will have their corresponding reads revalidated via React Query.\n *\n * This hook is dependent on the wallet's support for EIP-5792 and could fail.\n * The mutation function will use your currently connected wallet by default, but you can pass it a specific wallet to use if you'd like.\n *\n * @returns A React Query mutation object to interact with {@link sendAndConfirmCalls}\n * @throws an error if the wallet does not support EIP-5792.\n * @returns The ID of the bundle of the calls.\n *\n * @beta\n * @example\n * ```tsx\n * import { useSendCalls } from \"thirdweb/react\";\n *\n * const sendTx1 = approve({\n      contract: USDT_CONTRACT,\n      amount: 100,\n      spender: \"0x33d9B8BEfE81027E2C859EDc84F5636cbb202Ed6\",\n    });\n * const sendTx2 = approve({\n      contract: USDT_CONTRACT,\n      amount: 100,\n      spender: \"0x2a4f24F935Eb178e3e7BA9B53A5Ee6d8407C0709\",\n    });\n * const { mutate: sendCalls, data: result } = useSendAndConfirmCalls();\n * await sendCalls({\n *   client,\n *   calls: [sendTx1, sendTx2],\n * });\n *\n * console.log(\"Transaction hash:\", result.receipts?.[0]?.transactionHash);\n * ```\n\n * Sponsor transactions with a paymaster:\n * ```ts\n * const { mutate: sendAndConfirmCalls, data: id } = useSendAndConfirmCalls();\n * const result = await sendAndConfirmCalls({\n *   client,\n *   calls: [sendTx1, sendTx2],\n *   capabilities: {\n *     paymasterService: {\n *       url: `https://${CHAIN.id}.bundler.thirdweb.com/${client.clientId}`\n *     }\n *   }\n * });\n * console.log(\"Transaction hash:\", result.receipts?.[0]?.transactionHash);\n * ```\n *\n *  We recommend proxying any paymaster calls via an API route you setup and control.\n * @extension EIP5792\n */\nexport function useSendAndConfirmCalls(args) {\n  const activeWallet = useActiveWallet();\n  const queryClient = useQueryClient();\n  return useMutation({\n    mutationFn: async options => {\n      const {\n        wallet = activeWallet\n      } = options;\n      if (!wallet) {\n        throw new Error(\"Failed to send transactions, no connected wallet found.\");\n      }\n      return sendAndConfirmCalls(_objectSpread(_objectSpread({}, options), {}, {\n        maxBlocksWaitTime: args === null || args === void 0 ? void 0 : args.maxBlocksWaitTime,\n        wallet\n      }));\n    },\n    onSettled: async (_result, _error, variables) => {\n      var _call$__contract;\n      // Attempt to invalidate any reads related to the sent transactions\n      const call = variables.calls[0];\n      if (!call) {\n        return;\n      }\n      const chain = ((_call$__contract = call.__contract) === null || _call$__contract === void 0 ? void 0 : _call$__contract.chain) || call.chain;\n      for (const call of variables.calls) {\n        var _call$__contract2, _call$__contract3;\n        queryClient.invalidateQueries({\n          queryKey: [\"readContract\", ((_call$__contract2 = call.__contract) === null || _call$__contract2 === void 0 ? void 0 : _call$__contract2.chain.id) || call.chain.id, ((_call$__contract3 = call.__contract) === null || _call$__contract3 === void 0 ? void 0 : _call$__contract3.address) || call.to]\n        });\n      }\n      invalidateWalletBalance(queryClient, chain.id);\n    }\n  });\n}","map":{"version":3,"names":["useMutation","useQueryClient","sendAndConfirmCalls","invalidateWalletBalance","useActiveWallet","useSendAndConfirmCalls","args","activeWallet","queryClient","mutationFn","options","wallet","Error","_objectSpread","maxBlocksWaitTime","onSettled","_result","_error","variables","_call$__contract","call","calls","chain","__contract","_call$__contract2","_call$__contract3","invalidateQueries","queryKey","id","address","to"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/core/hooks/wallets/useSendAndConfirmCalls.ts"],"sourcesContent":["import {\n  type UseMutationResult,\n  useMutation,\n  useQueryClient,\n} from \"@tanstack/react-query\";\nimport { sendAndConfirmCalls } from \"../../../../wallets/eip5792/send-and-confirm-calls.js\";\nimport type { SendCallsOptions } from \"../../../../wallets/eip5792/send-calls.js\";\nimport type { GetCallsStatusResponse } from \"../../../../wallets/eip5792/types.js\";\nimport type { Wallet } from \"../../../../wallets/interfaces/wallet.js\";\nimport { invalidateWalletBalance } from \"../../providers/invalidateWalletBalance.js\";\nimport { useActiveWallet } from \"./useActiveWallet.js\";\n\n/**\n * A hook to send [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) calls to a wallet.\n * This hook works with all Thirdweb wallets (in-app and smart) and certain injected wallets that already support EIP-5792.\n * Transactions will be batched and sponsored when those capabilities are supported, otherwise they will be sent as individual transactions.\n *\n * When calls are sent, all contracts that are interacted with will have their corresponding reads revalidated via React Query.\n *\n * This hook is dependent on the wallet's support for EIP-5792 and could fail.\n * The mutation function will use your currently connected wallet by default, but you can pass it a specific wallet to use if you'd like.\n *\n * @returns A React Query mutation object to interact with {@link sendAndConfirmCalls}\n * @throws an error if the wallet does not support EIP-5792.\n * @returns The ID of the bundle of the calls.\n *\n * @beta\n * @example\n * ```tsx\n * import { useSendCalls } from \"thirdweb/react\";\n *\n * const sendTx1 = approve({\n      contract: USDT_CONTRACT,\n      amount: 100,\n      spender: \"0x33d9B8BEfE81027E2C859EDc84F5636cbb202Ed6\",\n    });\n * const sendTx2 = approve({\n      contract: USDT_CONTRACT,\n      amount: 100,\n      spender: \"0x2a4f24F935Eb178e3e7BA9B53A5Ee6d8407C0709\",\n    });\n * const { mutate: sendCalls, data: result } = useSendAndConfirmCalls();\n * await sendCalls({\n *   client,\n *   calls: [sendTx1, sendTx2],\n * });\n * \n * console.log(\"Transaction hash:\", result.receipts?.[0]?.transactionHash);\n * ```\n\n * Sponsor transactions with a paymaster:\n * ```ts\n * const { mutate: sendAndConfirmCalls, data: id } = useSendAndConfirmCalls();\n * const result = await sendAndConfirmCalls({\n *   client,\n *   calls: [sendTx1, sendTx2],\n *   capabilities: {\n *     paymasterService: {\n *       url: `https://${CHAIN.id}.bundler.thirdweb.com/${client.clientId}`\n *     }\n *   }\n * });\n * console.log(\"Transaction hash:\", result.receipts?.[0]?.transactionHash);\n * ```\n *\n *  We recommend proxying any paymaster calls via an API route you setup and control.\n * @extension EIP5792\n */\nexport function useSendAndConfirmCalls(args?: {\n  maxBlocksWaitTime?: number;\n}): UseMutationResult<\n  GetCallsStatusResponse,\n  Error,\n  Omit<SendCallsOptions, \"chain\" | \"wallet\"> & { wallet?: Wallet } // Optional wallet override\n> {\n  const activeWallet = useActiveWallet();\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (options) => {\n      const { wallet = activeWallet } = options;\n      if (!wallet) {\n        throw new Error(\n          \"Failed to send transactions, no connected wallet found.\",\n        );\n      }\n\n      return sendAndConfirmCalls({\n        ...options,\n        maxBlocksWaitTime: args?.maxBlocksWaitTime,\n        wallet,\n      });\n    },\n    onSettled: async (_result, _error, variables) => {\n      // Attempt to invalidate any reads related to the sent transactions\n      const call = variables.calls[0];\n      if (!call) {\n        return;\n      }\n      const chain = call.__contract?.chain || call.chain;\n\n      for (const call of variables.calls) {\n        queryClient.invalidateQueries({\n          queryKey: [\n            \"readContract\",\n            call.__contract?.chain.id || call.chain.id,\n            call.__contract?.address || call.to,\n          ],\n        });\n      }\n      invalidateWalletBalance(queryClient, chain.id);\n    },\n  });\n}\n"],"mappings":";AAAA,SAEEA,WAAW,EACXC,cAAc,QACT,uBAAuB;AAC9B,SAASC,mBAAmB,QAAQ,uDAAuD;AAI3F,SAASC,uBAAuB,QAAQ,4CAA4C;AACpF,SAASC,eAAe,QAAQ,sBAAsB;AAEtD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA,OAAM,SAAUC,sBAAsBA,CAACC,IAEtC;EAKC,MAAMC,YAAY,GAAGH,eAAe,EAAE;EACtC,MAAMI,WAAW,GAAGP,cAAc,EAAE;EAEpC,OAAOD,WAAW,CAAC;IACjBS,UAAU,EAAE,MAAOC,OAAO,IAAI;MAC5B,MAAM;QAAEC,MAAM,GAAGJ;MAAY,CAAE,GAAGG,OAAO;MACzC,IAAI,CAACC,MAAM,EAAE;QACX,MAAM,IAAIC,KAAK,CACb,yDAAyD,CAC1D;MACH;MAEA,OAAOV,mBAAmB,CAAAW,aAAA,CAAAA,aAAA,KACrBH,OAAO;QACVI,iBAAiB,EAAER,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEQ,iBAAiB;QAC1CH;MAAM,EACP,CAAC;IACJ,CAAC;IACDI,SAAS,EAAE,MAAAA,CAAOC,OAAO,EAAEC,MAAM,EAAEC,SAAS,KAAI;MAAA,IAAAC,gBAAA;MAC9C;MACA,MAAMC,IAAI,GAAGF,SAAS,CAACG,KAAK,CAAC,CAAC,CAAC;MAC/B,IAAI,CAACD,IAAI,EAAE;QACT;MACF;MACA,MAAME,KAAK,GAAG,EAAAH,gBAAA,GAAAC,IAAI,CAACG,UAAU,cAAAJ,gBAAA,uBAAfA,gBAAA,CAAiBG,KAAK,KAAIF,IAAI,CAACE,KAAK;MAElD,KAAK,MAAMF,IAAI,IAAIF,SAAS,CAACG,KAAK,EAAE;QAAA,IAAAG,iBAAA,EAAAC,iBAAA;QAClCjB,WAAW,CAACkB,iBAAiB,CAAC;UAC5BC,QAAQ,EAAE,CACR,cAAc,EACd,EAAAH,iBAAA,GAAAJ,IAAI,CAACG,UAAU,cAAAC,iBAAA,uBAAfA,iBAAA,CAAiBF,KAAK,CAACM,EAAE,KAAIR,IAAI,CAACE,KAAK,CAACM,EAAE,EAC1C,EAAAH,iBAAA,GAAAL,IAAI,CAACG,UAAU,cAAAE,iBAAA,uBAAfA,iBAAA,CAAiBI,OAAO,KAAIT,IAAI,CAACU,EAAE;SAEtC,CAAC;MACJ;MACA3B,uBAAuB,CAACK,WAAW,EAAEc,KAAK,CAACM,EAAE,CAAC;IAChD;GACD,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}