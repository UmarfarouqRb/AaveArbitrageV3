{"ast":null,"code":"import { getClientFetch } from \"../utils/fetch.js\";\nimport { getPayBuyHistoryEndpoint } from \"./utils/definitions.js\";\n/**\n * Get Buy transaction history for a given wallet address.\n *\n * This includes both \"Buy with Cryto\" and \"Buy with Fiat\" transactions\n *\n * @param params Object of type [`BuyHistoryParams`](https://portal.thirdweb.com/references/typescript/v5/BuyHistoryParams)\n * @example\n * ```ts\n * import { createThirdwebClient } from \"thirdweb\";\n * import { getBuyHistory } from \"thirdweb/pay\";\n *\n * const client = createThirdwebClient({ clientId: \"...\" });\n *\n * const history = await getBuyHistory({\n *  client,\n *  walletAddress: \"0x...\",\n * })\n * ```\n * @buyCrypto\n */\nexport async function getBuyHistory(params) {\n  try {\n    const queryParams = new URLSearchParams();\n    queryParams.append(\"walletAddress\", params.walletAddress);\n    queryParams.append(\"start\", params.start.toString());\n    queryParams.append(\"count\", params.count.toString());\n    const queryString = queryParams.toString();\n    const url = \"\".concat(getPayBuyHistoryEndpoint(), \"?\").concat(queryString);\n    const response = await getClientFetch(params.client)(url);\n    // Assuming the response directly matches the SwapResponse interface\n    if (!response.ok) {\n      const error = await response.text().catch(() => null);\n      throw new Error(\"HTTP error! status: \".concat(response.status, \" - \").concat(response.statusText, \": \").concat(error || \"unknown error\"));\n    }\n    const data = (await response.json()).result;\n    return data;\n  } catch (error) {\n    throw new Error(\"Fetch failed: \".concat(error));\n  }\n}","map":{"version":3,"names":["getClientFetch","getPayBuyHistoryEndpoint","getBuyHistory","params","queryParams","URLSearchParams","append","walletAddress","start","toString","count","queryString","url","concat","response","client","ok","error","text","catch","Error","status","statusText","data","json","result"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/pay/getBuyHistory.ts"],"sourcesContent":["import type { ThirdwebClient } from \"../client/client.js\";\nimport { getClientFetch } from \"../utils/fetch.js\";\nimport type { BuyWithCryptoStatus } from \"./buyWithCrypto/getStatus.js\";\nimport type { BuyWithFiatStatus } from \"./buyWithFiat/getStatus.js\";\nimport { getPayBuyHistoryEndpoint } from \"./utils/definitions.js\";\n\n/**\n * The parameters for [`getBuyHistory`](https://portal.thirdweb.com/references/typescript/v5/getBuyHistory) function\n * @buyCrypto\n */\nexport type BuyHistoryParams = {\n  /**\n   * A client is the entry point to the thirdweb SDK. It is required for all other actions.\n   *\n   * You can create a client using the `createThirdwebClient` function.\n   * Refer to the [Creating a Client](https://portal.thirdweb.com/typescript/v5/client) documentation for more information.\n   */\n  client: ThirdwebClient;\n  /**\n   * The wallet address to get the buy history for.\n   */\n  walletAddress: string;\n  /**\n   * The number of results to return.\n   *\n   * The default value is `10`.\n   */\n  count: number;\n  /**\n   * Index of the first result to return. The default value is `0`.\n   */\n  start: number;\n};\n\n/**\n * The result for [`getBuyHistory`](https://portal.thirdweb.com/references/typescript/v5/getBuyWithCryptoHistory) function\n *\n * It includes both \"Buy with Crypto\" and \"Buy with Fiat\" transactions\n *\n * @buyCrypto\n */\nexport type BuyHistoryData = {\n  /**\n   * The list of buy transactions.\n   */\n  page: Array<\n    | {\n        buyWithFiatStatus: BuyWithFiatStatus;\n      }\n    | {\n        buyWithCryptoStatus: BuyWithCryptoStatus;\n      }\n  >;\n  /**\n   * Whether there are more pages of results.\n   */\n  hasNextPage: boolean;\n};\n\n/**\n * Get Buy transaction history for a given wallet address.\n *\n * This includes both \"Buy with Cryto\" and \"Buy with Fiat\" transactions\n *\n * @param params Object of type [`BuyHistoryParams`](https://portal.thirdweb.com/references/typescript/v5/BuyHistoryParams)\n * @example\n * ```ts\n * import { createThirdwebClient } from \"thirdweb\";\n * import { getBuyHistory } from \"thirdweb/pay\";\n *\n * const client = createThirdwebClient({ clientId: \"...\" });\n *\n * const history = await getBuyHistory({\n *  client,\n *  walletAddress: \"0x...\",\n * })\n * ```\n * @buyCrypto\n */\nexport async function getBuyHistory(\n  params: BuyHistoryParams,\n): Promise<BuyHistoryData> {\n  try {\n    const queryParams = new URLSearchParams();\n    queryParams.append(\"walletAddress\", params.walletAddress);\n    queryParams.append(\"start\", params.start.toString());\n    queryParams.append(\"count\", params.count.toString());\n\n    const queryString = queryParams.toString();\n    const url = `${getPayBuyHistoryEndpoint()}?${queryString}`;\n\n    const response = await getClientFetch(params.client)(url);\n\n    // Assuming the response directly matches the SwapResponse interface\n    if (!response.ok) {\n      const error = await response.text().catch(() => null);\n      throw new Error(\n        `HTTP error! status: ${response.status} - ${response.statusText}: ${error || \"unknown error\"}`,\n      );\n    }\n\n    const data: BuyHistoryData = (await response.json()).result;\n    return data;\n  } catch (error) {\n    throw new Error(`Fetch failed: ${error}`);\n  }\n}\n"],"mappings":"AACA,SAASA,cAAc,QAAQ,mBAAmB;AAGlD,SAASC,wBAAwB,QAAQ,wBAAwB;AAuDjE;;;;;;;;;;;;;;;;;;;;AAoBA,OAAO,eAAeC,aAAaA,CACjCC,MAAwB;EAExB,IAAI;IACF,MAAMC,WAAW,GAAG,IAAIC,eAAe,EAAE;IACzCD,WAAW,CAACE,MAAM,CAAC,eAAe,EAAEH,MAAM,CAACI,aAAa,CAAC;IACzDH,WAAW,CAACE,MAAM,CAAC,OAAO,EAAEH,MAAM,CAACK,KAAK,CAACC,QAAQ,EAAE,CAAC;IACpDL,WAAW,CAACE,MAAM,CAAC,OAAO,EAAEH,MAAM,CAACO,KAAK,CAACD,QAAQ,EAAE,CAAC;IAEpD,MAAME,WAAW,GAAGP,WAAW,CAACK,QAAQ,EAAE;IAC1C,MAAMG,GAAG,MAAAC,MAAA,CAAMZ,wBAAwB,EAAE,OAAAY,MAAA,CAAIF,WAAW,CAAE;IAE1D,MAAMG,QAAQ,GAAG,MAAMd,cAAc,CAACG,MAAM,CAACY,MAAM,CAAC,CAACH,GAAG,CAAC;IAEzD;IACA,IAAI,CAACE,QAAQ,CAACE,EAAE,EAAE;MAChB,MAAMC,KAAK,GAAG,MAAMH,QAAQ,CAACI,IAAI,EAAE,CAACC,KAAK,CAAC,MAAM,IAAI,CAAC;MACrD,MAAM,IAAIC,KAAK,wBAAAP,MAAA,CACUC,QAAQ,CAACO,MAAM,SAAAR,MAAA,CAAMC,QAAQ,CAACQ,UAAU,QAAAT,MAAA,CAAKI,KAAK,IAAI,eAAe,CAAE,CAC/F;IACH;IAEA,MAAMM,IAAI,GAAmB,CAAC,MAAMT,QAAQ,CAACU,IAAI,EAAE,EAAEC,MAAM;IAC3D,OAAOF,IAAI;EACb,CAAC,CAAC,OAAON,KAAK,EAAE;IACd,MAAM,IAAIG,KAAK,kBAAAP,MAAA,CAAkBI,KAAK,CAAE,CAAC;EAC3C;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}