{"ast":null,"code":"\"use client\";\n\nimport { createContext, useContext, useEffect, useRef, useState } from \"react\";\nimport { useActiveAccount } from \"../../../../core/hooks/wallets/useActiveAccount.js\";\nimport { reservedScreens } from \"../constants.js\";\nexport const ScreenSetupContext = /* @__PURE__ */createContext(undefined);\n/**\n * @internal\n */\nexport function useSetupScreen(props) {\n  let initialScreen = reservedScreens.main;\n  const socialLogin = props.wallets.find(w => w.id === \"embedded\" || w.id === \"inApp\");\n  if (props.wallets.length === 1 && props.wallets[0]) {\n    initialScreen = props.wallets[0];\n  } else if (props.size === \"wide\" && !props.welcomeScreen && socialLogin) {\n    initialScreen = socialLogin;\n  }\n  const [screen, setScreen] = useState(initialScreen);\n  const prevInitialScreen = useRef(initialScreen);\n  const activeAccount = useActiveAccount();\n  // when the initial screen changes, reset the screen to the initial screen ( if the modal is closed )\n  useEffect(() => {\n    if (initialScreen !== prevInitialScreen.current) {\n      prevInitialScreen.current = initialScreen;\n      setScreen(initialScreen);\n    }\n  }, [initialScreen]);\n  // if on signature screen and suddenly the wallet is disconnected, go back to the main screen\n  useEffect(() => {\n    if (!activeAccount && screen === reservedScreens.signIn) {\n      setScreen(reservedScreens.main);\n    }\n  }, [activeAccount, screen]);\n  return {\n    initialScreen,\n    screen,\n    setScreen\n  };\n}\n/**\n * @internal\n */\nexport function useScreenContext() {\n  const ctx = useContext(ScreenSetupContext);\n  if (!ctx) {\n    throw new Error(\"useScreenContext must be used within a <ScreenSetupContext.Provider />\");\n  }\n  return ctx;\n}","map":{"version":3,"names":["createContext","useContext","useEffect","useRef","useState","useActiveAccount","reservedScreens","ScreenSetupContext","undefined","useSetupScreen","props","initialScreen","main","socialLogin","wallets","find","w","id","length","size","welcomeScreen","screen","setScreen","prevInitialScreen","activeAccount","current","signIn","useScreenContext","ctx","Error"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/web/ui/ConnectWallet/Modal/screen.tsx"],"sourcesContent":["\"use client\";\nimport { createContext, useContext, useEffect, useRef, useState } from \"react\";\nimport type { Wallet } from \"../../../../../wallets/interfaces/wallet.js\";\nimport { useActiveAccount } from \"../../../../core/hooks/wallets/useActiveAccount.js\";\nimport { reservedScreens } from \"../constants.js\";\nimport type { WelcomeScreen } from \"../screens/types.js\";\n\ntype Screen = string | Wallet;\n\nexport type ScreenSetup = {\n  screen: Screen;\n  setScreen: (newSreen: Screen) => void;\n  initialScreen: Screen;\n};\n\nexport const ScreenSetupContext = /* @__PURE__ */ createContext<\n  ScreenSetup | undefined\n>(undefined);\n\n/**\n * @internal\n */\nexport function useSetupScreen(props: {\n  wallets: Wallet[];\n  size: \"compact\" | \"wide\";\n  welcomeScreen: WelcomeScreen | undefined;\n}) {\n  let initialScreen: Screen = reservedScreens.main;\n\n  const socialLogin = props.wallets.find(\n    (w) => w.id === \"embedded\" || w.id === \"inApp\",\n  );\n\n  if (props.wallets.length === 1 && props.wallets[0]) {\n    initialScreen = props.wallets[0];\n  } else if (props.size === \"wide\" && !props.welcomeScreen && socialLogin) {\n    initialScreen = socialLogin;\n  }\n\n  const [screen, setScreen] = useState<string | Wallet>(initialScreen);\n  const prevInitialScreen = useRef(initialScreen);\n  const activeAccount = useActiveAccount();\n\n  // when the initial screen changes, reset the screen to the initial screen ( if the modal is closed )\n  useEffect(() => {\n    if (initialScreen !== prevInitialScreen.current) {\n      prevInitialScreen.current = initialScreen;\n      setScreen(initialScreen);\n    }\n  }, [initialScreen]);\n\n  // if on signature screen and suddenly the wallet is disconnected, go back to the main screen\n  useEffect(() => {\n    if (!activeAccount && screen === reservedScreens.signIn) {\n      setScreen(reservedScreens.main);\n    }\n  }, [activeAccount, screen]);\n\n  return {\n    initialScreen,\n    screen,\n    setScreen,\n  };\n}\n\n/**\n * @internal\n */\nexport function useScreenContext() {\n  const ctx = useContext(ScreenSetupContext);\n  if (!ctx) {\n    throw new Error(\n      \"useScreenContext must be used within a <ScreenSetupContext.Provider />\",\n    );\n  }\n  return ctx;\n}\n"],"mappings":"AAAA,YAAY;;AACZ,SAASA,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAE9E,SAASC,gBAAgB,QAAQ,oDAAoD;AACrF,SAASC,eAAe,QAAQ,iBAAiB;AAWjD,OAAO,MAAMC,kBAAkB,GAAG,eAAgBP,aAAa,CAE7DQ,SAAS,CAAC;AAEZ;;;AAGA,OAAM,SAAUC,cAAcA,CAACC,KAI9B;EACC,IAAIC,aAAa,GAAWL,eAAe,CAACM,IAAI;EAEhD,MAAMC,WAAW,GAAGH,KAAK,CAACI,OAAO,CAACC,IAAI,CACnCC,CAAC,IAAKA,CAAC,CAACC,EAAE,KAAK,UAAU,IAAID,CAAC,CAACC,EAAE,KAAK,OAAO,CAC/C;EAED,IAAIP,KAAK,CAACI,OAAO,CAACI,MAAM,KAAK,CAAC,IAAIR,KAAK,CAACI,OAAO,CAAC,CAAC,CAAC,EAAE;IAClDH,aAAa,GAAGD,KAAK,CAACI,OAAO,CAAC,CAAC,CAAC;EAClC,CAAC,MAAM,IAAIJ,KAAK,CAACS,IAAI,KAAK,MAAM,IAAI,CAACT,KAAK,CAACU,aAAa,IAAIP,WAAW,EAAE;IACvEF,aAAa,GAAGE,WAAW;EAC7B;EAEA,MAAM,CAACQ,MAAM,EAAEC,SAAS,CAAC,GAAGlB,QAAQ,CAAkBO,aAAa,CAAC;EACpE,MAAMY,iBAAiB,GAAGpB,MAAM,CAACQ,aAAa,CAAC;EAC/C,MAAMa,aAAa,GAAGnB,gBAAgB,EAAE;EAExC;EACAH,SAAS,CAAC,MAAK;IACb,IAAIS,aAAa,KAAKY,iBAAiB,CAACE,OAAO,EAAE;MAC/CF,iBAAiB,CAACE,OAAO,GAAGd,aAAa;MACzCW,SAAS,CAACX,aAAa,CAAC;IAC1B;EACF,CAAC,EAAE,CAACA,aAAa,CAAC,CAAC;EAEnB;EACAT,SAAS,CAAC,MAAK;IACb,IAAI,CAACsB,aAAa,IAAIH,MAAM,KAAKf,eAAe,CAACoB,MAAM,EAAE;MACvDJ,SAAS,CAAChB,eAAe,CAACM,IAAI,CAAC;IACjC;EACF,CAAC,EAAE,CAACY,aAAa,EAAEH,MAAM,CAAC,CAAC;EAE3B,OAAO;IACLV,aAAa;IACbU,MAAM;IACNC;GACD;AACH;AAEA;;;AAGA,OAAM,SAAUK,gBAAgBA,CAAA;EAC9B,MAAMC,GAAG,GAAG3B,UAAU,CAACM,kBAAkB,CAAC;EAC1C,IAAI,CAACqB,GAAG,EAAE;IACR,MAAM,IAAIC,KAAK,CACb,wEAAwE,CACzE;EACH;EACA,OAAOD,GAAG;AACZ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}