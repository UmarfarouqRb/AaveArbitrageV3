{"ast":null,"code":"import { useQuery } from \"@tanstack/react-query\";\nimport { getBuyWithCryptoStatus } from \"../../../../pay/buyWithCrypto/getStatus.js\";\n/**\n * A hook to get a status of a \"Buy with crypto\" transaction to determine if the transaction is completed, failed or pending.\n *\n * This hook is a React Query wrapper of the [`getBuyWithCryptoStatus`](https://portal.thirdweb.com/references/typescript/v5/getBuyWithCryptoStatus) function.\n * You can also use that function directly.\n * @param params - object of type [`BuyWithCryptoTransaction`](https://portal.thirdweb.com/references/typescript/v5/BuyWithCryptoTransaction)\n * @returns A react query object which contains the data of type [`BuyWithCryptoStatus`](https://portal.thirdweb.com/references/typescript/v5/BuyWithCryptoStatus)\n * @example\n * ```tsx\n * import { useSendTransaction, useBuyWithCryptoQuote, useBuyWithCryptoStatus, type BuyWithCryptoStatusQueryParams, useActiveAccount } from \"thirdweb/react\";\n * import { sendTransaction } from 'thirdweb';\n *\n * function Component() {\n *  const buyWithCryptoQuoteQuery = useBuyWithCryptoQuote(swapParams);\n *  const [buyTxHash, setBuyTxHash] = useState<BuyWithCryptoStatusQueryParams | undefined>();\n *  const buyWithCryptoStatusQuery = useBuyWithCryptoStatus(buyTxHash ? {\n *    client,\n *    transactionHash: buyTxHash,\n *  }: undefined);\n *  const account = useActiveAccount();\n *\n *  async function handleBuyWithCrypto() {\n *\n *    // if approval is required\n *    if (buyWithCryptoQuoteQuery.data.approval) {\n *      const approveTx = await sendTransaction({\n *        account: account,\n *        transaction: swapQuote.data.approval,\n *      });\n *      await waitForApproval(approveTx);\n *    }\n *\n *    // send the transaction to buy crypto\n *    // this promise is resolved when user confirms the transaction in the wallet and the transaction is sent to the blockchain\n *    const buyTx = await sendTransactionMutation.mutateAsync({\n *      transaction: swapQuote.data.transactionRequest,\n *      account: account,\n *    });\n *    await waitForApproval(buyTx);\n *\n *    // set buyTx.transactionHash to poll the status of the swap transaction\n *    setBuyWithCryptoTx(buyTx.transactionHash);\n *  }\n *\n *  return <button onClick={handleBuyWithCrypto}>Swap</button>\n * }\n * ```\n * @deprecated\n * @buyCrypto\n */\nexport function useBuyWithCryptoStatus(params) {\n  return useQuery({\n    enabled: !!params,\n    queryFn: async () => {\n      if (!params) {\n        throw new Error(\"No params\");\n      }\n      return getBuyWithCryptoStatus(params);\n    },\n    queryKey: [\"getBuyWithCryptoStatus\", params === null || params === void 0 ? void 0 : params.transactionHash],\n    refetchInterval: query => {\n      var _query$state$data;\n      const status = (_query$state$data = query.state.data) === null || _query$state$data === void 0 ? void 0 : _query$state$data.status;\n      if (status === \"COMPLETED\" || status === \"FAILED\") {\n        return false;\n      }\n      return 5000;\n    },\n    refetchIntervalInBackground: true,\n    retry: true\n  });\n}","map":{"version":3,"names":["useQuery","getBuyWithCryptoStatus","useBuyWithCryptoStatus","params","enabled","queryFn","Error","queryKey","transactionHash","refetchInterval","query","_query$state$data","status","state","data","refetchIntervalInBackground","retry"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/core/hooks/pay/useBuyWithCryptoStatus.ts"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\";\nimport {\n  type BuyWithCryptoStatus,\n  type BuyWithCryptoTransaction,\n  getBuyWithCryptoStatus,\n} from \"../../../../pay/buyWithCrypto/getStatus.js\";\n\n/**\n * A hook to get a status of a \"Buy with crypto\" transaction to determine if the transaction is completed, failed or pending.\n *\n * This hook is a React Query wrapper of the [`getBuyWithCryptoStatus`](https://portal.thirdweb.com/references/typescript/v5/getBuyWithCryptoStatus) function.\n * You can also use that function directly.\n * @param params - object of type [`BuyWithCryptoTransaction`](https://portal.thirdweb.com/references/typescript/v5/BuyWithCryptoTransaction)\n * @returns A react query object which contains the data of type [`BuyWithCryptoStatus`](https://portal.thirdweb.com/references/typescript/v5/BuyWithCryptoStatus)\n * @example\n * ```tsx\n * import { useSendTransaction, useBuyWithCryptoQuote, useBuyWithCryptoStatus, type BuyWithCryptoStatusQueryParams, useActiveAccount } from \"thirdweb/react\";\n * import { sendTransaction } from 'thirdweb';\n *\n * function Component() {\n *  const buyWithCryptoQuoteQuery = useBuyWithCryptoQuote(swapParams);\n *  const [buyTxHash, setBuyTxHash] = useState<BuyWithCryptoStatusQueryParams | undefined>();\n *  const buyWithCryptoStatusQuery = useBuyWithCryptoStatus(buyTxHash ? {\n *    client,\n *    transactionHash: buyTxHash,\n *  }: undefined);\n *  const account = useActiveAccount();\n *\n *  async function handleBuyWithCrypto() {\n *\n *    // if approval is required\n *    if (buyWithCryptoQuoteQuery.data.approval) {\n *      const approveTx = await sendTransaction({\n *        account: account,\n *        transaction: swapQuote.data.approval,\n *      });\n *      await waitForApproval(approveTx);\n *    }\n *\n *    // send the transaction to buy crypto\n *    // this promise is resolved when user confirms the transaction in the wallet and the transaction is sent to the blockchain\n *    const buyTx = await sendTransactionMutation.mutateAsync({\n *      transaction: swapQuote.data.transactionRequest,\n *      account: account,\n *    });\n *    await waitForApproval(buyTx);\n *\n *    // set buyTx.transactionHash to poll the status of the swap transaction\n *    setBuyWithCryptoTx(buyTx.transactionHash);\n *  }\n *\n *  return <button onClick={handleBuyWithCrypto}>Swap</button>\n * }\n * ```\n * @deprecated\n * @buyCrypto\n */\nexport function useBuyWithCryptoStatus(params?: BuyWithCryptoTransaction) {\n  return useQuery<BuyWithCryptoStatus, Error>({\n    enabled: !!params,\n    queryFn: async () => {\n      if (!params) {\n        throw new Error(\"No params\");\n      }\n      return getBuyWithCryptoStatus(params);\n    },\n    queryKey: [\"getBuyWithCryptoStatus\", params?.transactionHash] as const,\n    refetchInterval: (query) => {\n      const status = (query.state.data as BuyWithCryptoStatus)?.status;\n      if (status === \"COMPLETED\" || status === \"FAILED\") {\n        return false;\n      }\n      return 5000;\n    },\n    refetchIntervalInBackground: true,\n    retry: true,\n  });\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,uBAAuB;AAChD,SAGEC,sBAAsB,QACjB,4CAA4C;AAEnD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,OAAM,SAAUC,sBAAsBA,CAACC,MAAiC;EACtE,OAAOH,QAAQ,CAA6B;IAC1CI,OAAO,EAAE,CAAC,CAACD,MAAM;IACjBE,OAAO,EAAE,MAAAA,CAAA,KAAW;MAClB,IAAI,CAACF,MAAM,EAAE;QACX,MAAM,IAAIG,KAAK,CAAC,WAAW,CAAC;MAC9B;MACA,OAAOL,sBAAsB,CAACE,MAAM,CAAC;IACvC,CAAC;IACDI,QAAQ,EAAE,CAAC,wBAAwB,EAAEJ,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEK,eAAe,CAAU;IACtEC,eAAe,EAAGC,KAAK,IAAI;MAAA,IAAAC,iBAAA;MACzB,MAAMC,MAAM,IAAAD,iBAAA,GAAID,KAAK,CAACG,KAAK,CAACC,IAA4B,cAAAH,iBAAA,uBAAxCA,iBAAA,CAA0CC,MAAM;MAChE,IAAIA,MAAM,KAAK,WAAW,IAAIA,MAAM,KAAK,QAAQ,EAAE;QACjD,OAAO,KAAK;MACd;MACA,OAAO,IAAI;IACb,CAAC;IACDG,2BAA2B,EAAE,IAAI;IACjCC,KAAK,EAAE;GACR,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}