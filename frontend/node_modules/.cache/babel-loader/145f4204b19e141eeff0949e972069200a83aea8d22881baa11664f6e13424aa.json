{"ast":null,"code":"import { eth_getBlockByNumber } from \"../rpc/actions/eth_getBlockByNumber.js\";\nimport { eth_maxPriorityFeePerGas } from \"../rpc/actions/eth_maxPriorityFeePerGas.js\";\nimport { getRpcClient } from \"../rpc/rpc.js\";\nimport { resolvePromisedValue } from \"../utils/promise/resolve-promised-value.js\";\nimport { toUnits } from \"../utils/units.js\";\nimport { getGasPrice } from \"./get-gas-price.js\";\nimport { roundUpGas } from \"./op-gas-fee-reducer.js\";\n// for these chains - always force pre eip1559 transactions\nconst FORCE_GAS_PRICE_CHAIN_IDS = [78600,\n// Vanar testnet\n2040,\n// Vanar mainnet\n248,\n// Oasys Mainnet\n9372,\n// Oasys Testnet\n841,\n// Taraxa Mainnet\n842,\n// Taraxa Testnet\n2016,\n// MainnetZ Mainnet\n9768,\n// MainnetZ Testnet\n2442,\n// Polygon zkEVM Cardona Testnet\n1942999413,\n// Humanity Testnet\n1952959480,\n// Lumia Testnet\n994873017,\n// Lumia Mainnet\n19011,\n// Homeverse Mainnet\n40875,\n// Homeverse Testnet\n1511670449,\n// GPT Mainnet\n5464,\n// Saga Mainnet\n2020,\n// Ronin Mainnet\n2021,\n// Ronin Testnet (Saigon)\n98866,\n// Plume mainnet\n1417429182 // Wilderworld Zephyr Testnet\n];\n/**\n *\n * @internal\n */\nexport async function getGasOverridesForTransaction(transaction) {\n  var _transaction$chain$ex;\n  // first check for explicit values\n  const [maxFeePerGas, maxPriorityFeePerGas, gasPrice, type] = await Promise.all([resolvePromisedValue(transaction.maxFeePerGas), resolvePromisedValue(transaction.maxPriorityFeePerGas), resolvePromisedValue(transaction.gasPrice), resolvePromisedValue(transaction.type)]);\n  // Exit early if the user explicitly provided enough options\n  if (maxFeePerGas !== undefined && maxPriorityFeePerGas !== undefined) {\n    return {\n      maxFeePerGas,\n      maxPriorityFeePerGas\n    };\n  }\n  if (typeof gasPrice === \"bigint\") {\n    return {\n      gasPrice\n    };\n  }\n  // If we don't have enough explicit values, get defaults\n  const defaultGasOverrides = await getDefaultGasOverrides(transaction.client, transaction.chain, type === \"legacy\" ? \"legacy\" : \"eip1559\");\n  if ((_transaction$chain$ex = transaction.chain.experimental) !== null && _transaction$chain$ex !== void 0 && _transaction$chain$ex.increaseZeroByteCount) {\n    var _defaultGasOverrides$, _defaultGasOverrides$2;\n    // otherwise adjust each value\n    if (defaultGasOverrides.gasPrice) {\n      return {\n        gasPrice: roundUpGas(defaultGasOverrides.gasPrice)\n      };\n    }\n    return {\n      maxFeePerGas: maxFeePerGas !== null && maxFeePerGas !== void 0 ? maxFeePerGas : roundUpGas((_defaultGasOverrides$ = defaultGasOverrides.maxFeePerGas) !== null && _defaultGasOverrides$ !== void 0 ? _defaultGasOverrides$ : 0n),\n      maxPriorityFeePerGas: maxPriorityFeePerGas !== null && maxPriorityFeePerGas !== void 0 ? maxPriorityFeePerGas : roundUpGas((_defaultGasOverrides$2 = defaultGasOverrides.maxPriorityFeePerGas) !== null && _defaultGasOverrides$2 !== void 0 ? _defaultGasOverrides$2 : 0n)\n    };\n  }\n  // return as is\n  if (defaultGasOverrides.gasPrice !== undefined) {\n    return defaultGasOverrides;\n  }\n  // Still check for explicit values in case one is provided and not the other\n  return {\n    maxFeePerGas: maxFeePerGas !== null && maxFeePerGas !== void 0 ? maxFeePerGas : defaultGasOverrides.maxFeePerGas,\n    maxPriorityFeePerGas: maxPriorityFeePerGas !== null && maxPriorityFeePerGas !== void 0 ? maxPriorityFeePerGas : defaultGasOverrides.maxPriorityFeePerGas\n  };\n}\n/**\n * Retrieves the default gas overrides for a given client and chain ID.\n * If the fee data contains both maxFeePerGas and maxPriorityFeePerGas, it returns an object with those values.\n * Otherwise, it returns an object with the gasPrice obtained from the client and chain ID.\n * @param client - The ThirdwebClient instance.\n * @param chain - The chain ID.\n * @returns An object containing the default gas overrides.\n * @internal\n */\nexport async function getDefaultGasOverrides(client, chain, feeType) {\n  // give priority to the transaction fee type over the chain fee type\n  const resolvedFeeType = feeType !== null && feeType !== void 0 ? feeType : chain.feeType;\n  // if chain is configured to force legacy transactions or is in the legacy chain list\n  if (resolvedFeeType === \"legacy\" || FORCE_GAS_PRICE_CHAIN_IDS.includes(chain.id)) {\n    return {\n      gasPrice: await getGasPrice({\n        chain,\n        client,\n        percentMultiplier: 10\n      })\n    };\n  }\n  const feeData = await getDynamicFeeData(client, chain);\n  if (feeData.maxFeePerGas !== null && feeData.maxPriorityFeePerGas !== null) {\n    return {\n      maxFeePerGas: feeData.maxFeePerGas,\n      maxPriorityFeePerGas: feeData.maxPriorityFeePerGas\n    };\n  }\n  // TODO: resolvedFeeType here could be \"EIP1559\", but we could not get EIP1559 fee data. should we throw?\n  return {\n    gasPrice: await getGasPrice({\n      chain,\n      client,\n      percentMultiplier: 10\n    })\n  };\n}\n/**\n * Retrieves dynamic fee data for a given chain.\n * @param client - The Thirdweb client.\n * @param chain - The chain ID.\n * @returns A promise that resolves to the fee data.\n * @internal\n */\nasync function getDynamicFeeData(client, chain) {\n  let percentMultiplier = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n  let maxFeePerGas = null;\n  let maxPriorityFeePerGas_ = null;\n  const rpcRequest = getRpcClient({\n    chain,\n    client\n  });\n  const [block, maxPriorityFeePerGas] = await Promise.all([eth_getBlockByNumber(rpcRequest, {\n    blockTag: \"latest\"\n  }), eth_maxPriorityFeePerGas(rpcRequest).catch(() => null)]);\n  const baseBlockFee = block === null || block === void 0 ? void 0 : block.baseFeePerGas;\n  const chainId = chain.id;\n  // flag chain testnet & flag chain\n  if (chainId === 220 || chainId === 1220) {\n    // these does not support eip-1559, for some reason even though `eth_maxPriorityFeePerGas` is available?!?\n    // return null because otherwise TX break\n    return {\n      maxFeePerGas: null,\n      maxPriorityFeePerGas: null\n    };\n    // mumbai & polygon\n  }\n  if (chainId === 80002 || chainId === 137) {\n    // for polygon, get fee data from gas station\n    maxPriorityFeePerGas_ = await getPolygonGasPriorityFee(chainId);\n  } else if (maxPriorityFeePerGas !== null) {\n    // prioritize fee from eth_maxPriorityFeePerGas\n    maxPriorityFeePerGas_ = maxPriorityFeePerGas;\n  }\n  if (maxPriorityFeePerGas_ == null || baseBlockFee == null) {\n    // chain does not support eip-1559, return null for both\n    return {\n      maxFeePerGas: null,\n      maxPriorityFeePerGas: null\n    };\n  }\n  // add 10% tip to maxPriorityFeePerGas for faster processing\n  maxPriorityFeePerGas_ = getPreferredPriorityFee(maxPriorityFeePerGas_, percentMultiplier);\n  // eip-1559 formula, doubling the base fee ensures that the tx can be included in the next 6 blocks no matter how busy the network is\n  // good article on the subject: https://www.blocknative.com/blog/eip-1559-fees\n  maxFeePerGas = baseBlockFee * 2n + maxPriorityFeePerGas_;\n  // special cased for Celo gas fees\n  if (chainId === 42220 || chainId === 44787 || chainId === 62320) {\n    maxPriorityFeePerGas_ = maxFeePerGas;\n  }\n  return {\n    maxFeePerGas,\n    maxPriorityFeePerGas: maxPriorityFeePerGas_\n  };\n}\n/**\n * Calculates the preferred priority fee based on the default priority fee per gas and a percent multiplier.\n * @param defaultPriorityFeePerGas - The default priority fee per gas.\n * @param percentMultiplier - The percent multiplier to calculate the extra tip. Default is 10.\n * @returns The total priority fee including the extra tip.\n * @internal\n */\nfunction getPreferredPriorityFee(defaultPriorityFeePerGas) {\n  let percentMultiplier = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n  const extraTip = defaultPriorityFeePerGas / BigInt(100) * BigInt(percentMultiplier);\n  const totalPriorityFee = defaultPriorityFeePerGas + extraTip;\n  return totalPriorityFee;\n}\n/**\n * @internal\n */\nfunction getGasStationUrl(chainId) {\n  switch (chainId) {\n    case 137:\n      return \"https://gasstation.polygon.technology/v2\";\n    case 80002:\n      return \"https://gasstation.polygon.technology/amoy\";\n  }\n}\nconst MIN_POLYGON_GAS_PRICE = 31n; // 31 gwei\n/**\n *\n * @returns The gas price\n * @internal\n */\nasync function getPolygonGasPriorityFee(chainId) {\n  const gasStationUrl = getGasStationUrl(chainId);\n  try {\n    const data = await (await fetch(gasStationUrl)).json();\n    // take the standard speed here, SDK options will define the extra tip\n    const priorityFee = data.fast.maxPriorityFee;\n    if (priorityFee > 0) {\n      const fixedFee = Number.parseFloat(priorityFee).toFixed(9);\n      return toUnits(fixedFee, 9);\n    }\n  } catch (e) {\n    console.error(\"failed to fetch gas\", e);\n  }\n  return MIN_POLYGON_GAS_PRICE;\n}","map":{"version":3,"names":["eth_getBlockByNumber","eth_maxPriorityFeePerGas","getRpcClient","resolvePromisedValue","toUnits","getGasPrice","roundUpGas","FORCE_GAS_PRICE_CHAIN_IDS","getGasOverridesForTransaction","transaction","_transaction$chain$ex","maxFeePerGas","maxPriorityFeePerGas","gasPrice","type","Promise","all","undefined","defaultGasOverrides","getDefaultGasOverrides","client","chain","experimental","increaseZeroByteCount","_defaultGasOverrides$","_defaultGasOverrides$2","feeType","resolvedFeeType","includes","id","percentMultiplier","feeData","getDynamicFeeData","arguments","length","maxPriorityFeePerGas_","rpcRequest","block","blockTag","catch","baseBlockFee","baseFeePerGas","chainId","getPolygonGasPriorityFee","getPreferredPriorityFee","defaultPriorityFeePerGas","extraTip","BigInt","totalPriorityFee","getGasStationUrl","MIN_POLYGON_GAS_PRICE","gasStationUrl","data","fetch","json","priorityFee","fast","maxPriorityFee","fixedFee","Number","parseFloat","toFixed","e","console","error"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/gas/fee-data.ts"],"sourcesContent":["import type { Chain } from \"../chains/types.js\";\nimport type { ThirdwebClient } from \"../client/client.js\";\nimport { eth_getBlockByNumber } from \"../rpc/actions/eth_getBlockByNumber.js\";\nimport { eth_maxPriorityFeePerGas } from \"../rpc/actions/eth_maxPriorityFeePerGas.js\";\nimport { getRpcClient } from \"../rpc/rpc.js\";\nimport type { PreparedTransaction } from \"../transaction/prepare-transaction.js\";\nimport { resolvePromisedValue } from \"../utils/promise/resolve-promised-value.js\";\nimport { toUnits } from \"../utils/units.js\";\nimport { getGasPrice } from \"./get-gas-price.js\";\nimport { roundUpGas } from \"./op-gas-fee-reducer.js\";\n\ntype FeeData = {\n  maxFeePerGas: null | bigint;\n  maxPriorityFeePerGas: null | bigint;\n};\n\ntype FeeDataParams =\n  | {\n      gasPrice?: never;\n      maxFeePerGas?: bigint;\n      maxPriorityFeePerGas?: bigint;\n    }\n  | {\n      gasPrice?: bigint;\n      maxFeePerGas?: never;\n      maxPriorityFeePerGas?: never;\n    };\n\n// for these chains - always force pre eip1559 transactions\nconst FORCE_GAS_PRICE_CHAIN_IDS = [\n  78600, // Vanar testnet\n  2040, // Vanar mainnet\n  248, // Oasys Mainnet\n  9372, // Oasys Testnet\n  841, // Taraxa Mainnet\n  842, // Taraxa Testnet\n  2016, // MainnetZ Mainnet\n  9768, // MainnetZ Testnet\n  2442, // Polygon zkEVM Cardona Testnet\n  1942999413, // Humanity Testnet\n  1952959480, // Lumia Testnet\n  994873017, // Lumia Mainnet\n  19011, // Homeverse Mainnet\n  40875, // Homeverse Testnet\n  1511670449, // GPT Mainnet\n  5464, // Saga Mainnet\n  2020, // Ronin Mainnet\n  2021, // Ronin Testnet (Saigon)\n  98866, // Plume mainnet\n  1417429182, // Wilderworld Zephyr Testnet\n];\n\n/**\n *\n * @internal\n */\nexport async function getGasOverridesForTransaction(\n  transaction: PreparedTransaction,\n): Promise<FeeDataParams> {\n  // first check for explicit values\n  const [maxFeePerGas, maxPriorityFeePerGas, gasPrice, type] =\n    await Promise.all([\n      resolvePromisedValue(transaction.maxFeePerGas),\n      resolvePromisedValue(transaction.maxPriorityFeePerGas),\n      resolvePromisedValue(transaction.gasPrice),\n      resolvePromisedValue(transaction.type),\n    ]);\n\n  // Exit early if the user explicitly provided enough options\n  if (maxFeePerGas !== undefined && maxPriorityFeePerGas !== undefined) {\n    return {\n      maxFeePerGas,\n      maxPriorityFeePerGas,\n    };\n  }\n\n  if (typeof gasPrice === \"bigint\") {\n    return { gasPrice };\n  }\n\n  // If we don't have enough explicit values, get defaults\n  const defaultGasOverrides = await getDefaultGasOverrides(\n    transaction.client,\n    transaction.chain,\n    type === \"legacy\" ? \"legacy\" : \"eip1559\", // 7702, 2930, and eip1559 all qualify as \"eip1559\" fee type\n  );\n\n  if (transaction.chain.experimental?.increaseZeroByteCount) {\n    // otherwise adjust each value\n    if (defaultGasOverrides.gasPrice) {\n      return { gasPrice: roundUpGas(defaultGasOverrides.gasPrice) };\n    }\n\n    return {\n      maxFeePerGas:\n        maxFeePerGas ?? roundUpGas(defaultGasOverrides.maxFeePerGas ?? 0n),\n      maxPriorityFeePerGas:\n        maxPriorityFeePerGas ??\n        roundUpGas(defaultGasOverrides.maxPriorityFeePerGas ?? 0n),\n    };\n  }\n\n  // return as is\n  if (defaultGasOverrides.gasPrice !== undefined) {\n    return defaultGasOverrides;\n  }\n\n  // Still check for explicit values in case one is provided and not the other\n  return {\n    maxFeePerGas: maxFeePerGas ?? defaultGasOverrides.maxFeePerGas,\n    maxPriorityFeePerGas:\n      maxPriorityFeePerGas ?? defaultGasOverrides.maxPriorityFeePerGas,\n  };\n}\n\nexport type FeeType = \"legacy\" | \"eip1559\";\n\n/**\n * Retrieves the default gas overrides for a given client and chain ID.\n * If the fee data contains both maxFeePerGas and maxPriorityFeePerGas, it returns an object with those values.\n * Otherwise, it returns an object with the gasPrice obtained from the client and chain ID.\n * @param client - The ThirdwebClient instance.\n * @param chain - The chain ID.\n * @returns An object containing the default gas overrides.\n * @internal\n */\nexport async function getDefaultGasOverrides(\n  client: ThirdwebClient,\n  chain: Chain,\n  feeType?: FeeType,\n) {\n  // give priority to the transaction fee type over the chain fee type\n  const resolvedFeeType = feeType ?? chain.feeType;\n  // if chain is configured to force legacy transactions or is in the legacy chain list\n  if (\n    resolvedFeeType === \"legacy\" ||\n    FORCE_GAS_PRICE_CHAIN_IDS.includes(chain.id)\n  ) {\n    return {\n      gasPrice: await getGasPrice({ chain, client, percentMultiplier: 10 }),\n    };\n  }\n  const feeData = await getDynamicFeeData(client, chain);\n  if (feeData.maxFeePerGas !== null && feeData.maxPriorityFeePerGas !== null) {\n    return {\n      maxFeePerGas: feeData.maxFeePerGas,\n      maxPriorityFeePerGas: feeData.maxPriorityFeePerGas,\n    };\n  }\n  // TODO: resolvedFeeType here could be \"EIP1559\", but we could not get EIP1559 fee data. should we throw?\n  return {\n    gasPrice: await getGasPrice({ chain, client, percentMultiplier: 10 }),\n  };\n}\n\n/**\n * Retrieves dynamic fee data for a given chain.\n * @param client - The Thirdweb client.\n * @param chain - The chain ID.\n * @returns A promise that resolves to the fee data.\n * @internal\n */\nasync function getDynamicFeeData(\n  client: ThirdwebClient,\n  chain: Chain,\n  percentMultiplier = 10,\n): Promise<FeeData> {\n  let maxFeePerGas: null | bigint = null;\n  let maxPriorityFeePerGas_: null | bigint = null;\n\n  const rpcRequest = getRpcClient({ chain, client });\n\n  const [block, maxPriorityFeePerGas] = await Promise.all([\n    eth_getBlockByNumber(rpcRequest, { blockTag: \"latest\" }),\n    eth_maxPriorityFeePerGas(rpcRequest).catch(() => null),\n  ]);\n\n  const baseBlockFee = block?.baseFeePerGas;\n\n  const chainId = chain.id;\n  // flag chain testnet & flag chain\n  if (chainId === 220 || chainId === 1220) {\n    // these does not support eip-1559, for some reason even though `eth_maxPriorityFeePerGas` is available?!?\n    // return null because otherwise TX break\n    return { maxFeePerGas: null, maxPriorityFeePerGas: null };\n    // mumbai & polygon\n  }\n  if (chainId === 80002 || chainId === 137) {\n    // for polygon, get fee data from gas station\n    maxPriorityFeePerGas_ = await getPolygonGasPriorityFee(chainId);\n  } else if (maxPriorityFeePerGas !== null) {\n    // prioritize fee from eth_maxPriorityFeePerGas\n    maxPriorityFeePerGas_ = maxPriorityFeePerGas;\n  }\n\n  if (maxPriorityFeePerGas_ == null || baseBlockFee == null) {\n    // chain does not support eip-1559, return null for both\n    return { maxFeePerGas: null, maxPriorityFeePerGas: null };\n  }\n\n  // add 10% tip to maxPriorityFeePerGas for faster processing\n  maxPriorityFeePerGas_ = getPreferredPriorityFee(\n    maxPriorityFeePerGas_,\n    percentMultiplier,\n  );\n  // eip-1559 formula, doubling the base fee ensures that the tx can be included in the next 6 blocks no matter how busy the network is\n  // good article on the subject: https://www.blocknative.com/blog/eip-1559-fees\n  maxFeePerGas = baseBlockFee * 2n + maxPriorityFeePerGas_;\n\n  // special cased for Celo gas fees\n  if (chainId === 42220 || chainId === 44787 || chainId === 62320) {\n    maxPriorityFeePerGas_ = maxFeePerGas;\n  }\n\n  return {\n    maxFeePerGas,\n    maxPriorityFeePerGas: maxPriorityFeePerGas_,\n  };\n}\n\n/**\n * Calculates the preferred priority fee based on the default priority fee per gas and a percent multiplier.\n * @param defaultPriorityFeePerGas - The default priority fee per gas.\n * @param percentMultiplier - The percent multiplier to calculate the extra tip. Default is 10.\n * @returns The total priority fee including the extra tip.\n * @internal\n */\nfunction getPreferredPriorityFee(\n  defaultPriorityFeePerGas: bigint,\n  percentMultiplier = 10,\n): bigint {\n  const extraTip =\n    (defaultPriorityFeePerGas / BigInt(100)) * BigInt(percentMultiplier);\n  const totalPriorityFee = defaultPriorityFeePerGas + extraTip;\n  return totalPriorityFee;\n}\n\n/**\n * @internal\n */\nfunction getGasStationUrl(chainId: 137 | 80002): string {\n  switch (chainId) {\n    case 137:\n      return \"https://gasstation.polygon.technology/v2\";\n    case 80002:\n      return \"https://gasstation.polygon.technology/amoy\";\n  }\n}\n\nconst MIN_POLYGON_GAS_PRICE = 31n; // 31 gwei\n\n/**\n *\n * @returns The gas price\n * @internal\n */\nasync function getPolygonGasPriorityFee(chainId: 137 | 80002): Promise<bigint> {\n  const gasStationUrl = getGasStationUrl(chainId);\n  try {\n    const data = await (await fetch(gasStationUrl)).json();\n    // take the standard speed here, SDK options will define the extra tip\n    const priorityFee = data.fast.maxPriorityFee;\n    if (priorityFee > 0) {\n      const fixedFee = Number.parseFloat(priorityFee).toFixed(9);\n      return toUnits(fixedFee, 9);\n    }\n  } catch (e) {\n    console.error(\"failed to fetch gas\", e);\n  }\n  return MIN_POLYGON_GAS_PRICE;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}