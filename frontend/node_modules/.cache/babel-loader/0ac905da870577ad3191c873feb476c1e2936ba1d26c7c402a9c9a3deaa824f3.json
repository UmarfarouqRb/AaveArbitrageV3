{"ast":null,"code":"import { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { useEffect, useMemo } from \"react\";\nimport { eth_blockNumber } from \"../../../../rpc/actions/eth_blockNumber.js\";\nimport { getRpcClient } from \"../../../../rpc/rpc.js\";\nimport { watchBlockNumber } from \"../../../../rpc/watchBlockNumber.js\";\n/**\n * Hook that watches for changes in the block number on a given chain.\n * @param options - The options for the hook.\n * @returns The latest block number.\n * @example\n * ```ts\n * import { useBlockNumber } from \"thirdweb/react\";\n * const blockNumber = useBlockNumber({client, chain});\n * ```\n * @utils\n */\nexport function useBlockNumber(options) {\n  const {\n    client,\n    chain,\n    enabled = true,\n    watch = true\n  } = options;\n  const queryClient = useQueryClient();\n  const queryKey = useMemo(() => [chain.id, \"blockNumber\"], [chain]);\n  const query = useQuery({\n    enabled,\n    queryFn: async () => {\n      const rpcRequest = getRpcClient({\n        chain,\n        client\n      });\n      return await eth_blockNumber(rpcRequest);\n    },\n    // TODO: technically client should be part of the queryKey here...\n    queryKey: queryKey\n  });\n  useEffect(() => {\n    if (!enabled || !watch) {\n      // don't watch if not enabled or not watching\n      return;\n    }\n    return watchBlockNumber({\n      chain,\n      client,\n      onNewBlockNumber: newBlockNumber => {\n        queryClient.setQueryData(queryKey, newBlockNumber);\n      }\n    });\n  }, [client, chain, enabled, queryClient, queryKey, watch]);\n  return query.data;\n}","map":{"version":3,"names":["useQuery","useQueryClient","useEffect","useMemo","eth_blockNumber","getRpcClient","watchBlockNumber","useBlockNumber","options","client","chain","enabled","watch","queryClient","queryKey","id","query","queryFn","rpcRequest","onNewBlockNumber","newBlockNumber","setQueryData","data"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/core/hooks/rpc/useBlockNumber.ts"],"sourcesContent":["import { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { useEffect, useMemo } from \"react\";\nimport type { Chain } from \"../../../../chains/types.js\";\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\nimport { eth_blockNumber } from \"../../../../rpc/actions/eth_blockNumber.js\";\nimport { getRpcClient } from \"../../../../rpc/rpc.js\";\nimport { watchBlockNumber } from \"../../../../rpc/watchBlockNumber.js\";\n\nexport type UseBlockNumberOptions = {\n  client: ThirdwebClient;\n  chain: Chain;\n  enabled?: boolean;\n  watch?: boolean;\n};\n\n/**\n * Hook that watches for changes in the block number on a given chain.\n * @param options - The options for the hook.\n * @returns The latest block number.\n * @example\n * ```ts\n * import { useBlockNumber } from \"thirdweb/react\";\n * const blockNumber = useBlockNumber({client, chain});\n * ```\n * @utils\n */\nexport function useBlockNumber(options: UseBlockNumberOptions) {\n  const { client, chain, enabled = true, watch = true } = options;\n\n  const queryClient = useQueryClient();\n\n  const queryKey = useMemo(() => [chain.id, \"blockNumber\"] as const, [chain]);\n  const query = useQuery({\n    enabled,\n    queryFn: async () => {\n      const rpcRequest = getRpcClient({ chain, client });\n      return await eth_blockNumber(rpcRequest);\n    },\n    // TODO: technically client should be part of the queryKey here...\n\n    queryKey: queryKey,\n  });\n\n  useEffect(() => {\n    if (!enabled || !watch) {\n      // don't watch if not enabled or not watching\n      return;\n    }\n    return watchBlockNumber({\n      chain,\n      client,\n      onNewBlockNumber: (newBlockNumber) => {\n        queryClient.setQueryData(queryKey, newBlockNumber);\n      },\n    });\n  }, [client, chain, enabled, queryClient, queryKey, watch]);\n\n  return query.data;\n}\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,cAAc,QAAQ,uBAAuB;AAChE,SAASC,SAAS,EAAEC,OAAO,QAAQ,OAAO;AAG1C,SAASC,eAAe,QAAQ,4CAA4C;AAC5E,SAASC,YAAY,QAAQ,wBAAwB;AACrD,SAASC,gBAAgB,QAAQ,qCAAqC;AAStE;;;;;;;;;;;AAWA,OAAM,SAAUC,cAAcA,CAACC,OAA8B;EAC3D,MAAM;IAAEC,MAAM;IAAEC,KAAK;IAAEC,OAAO,GAAG,IAAI;IAAEC,KAAK,GAAG;EAAI,CAAE,GAAGJ,OAAO;EAE/D,MAAMK,WAAW,GAAGZ,cAAc,EAAE;EAEpC,MAAMa,QAAQ,GAAGX,OAAO,CAAC,MAAM,CAACO,KAAK,CAACK,EAAE,EAAE,aAAa,CAAU,EAAE,CAACL,KAAK,CAAC,CAAC;EAC3E,MAAMM,KAAK,GAAGhB,QAAQ,CAAC;IACrBW,OAAO;IACPM,OAAO,EAAE,MAAAA,CAAA,KAAW;MAClB,MAAMC,UAAU,GAAGb,YAAY,CAAC;QAAEK,KAAK;QAAED;MAAM,CAAE,CAAC;MAClD,OAAO,MAAML,eAAe,CAACc,UAAU,CAAC;IAC1C,CAAC;IACD;IAEAJ,QAAQ,EAAEA;GACX,CAAC;EAEFZ,SAAS,CAAC,MAAK;IACb,IAAI,CAACS,OAAO,IAAI,CAACC,KAAK,EAAE;MACtB;MACA;IACF;IACA,OAAON,gBAAgB,CAAC;MACtBI,KAAK;MACLD,MAAM;MACNU,gBAAgB,EAAGC,cAAc,IAAI;QACnCP,WAAW,CAACQ,YAAY,CAACP,QAAQ,EAAEM,cAAc,CAAC;MACpD;KACD,CAAC;EACJ,CAAC,EAAE,CAACX,MAAM,EAAEC,KAAK,EAAEC,OAAO,EAAEE,WAAW,EAAEC,QAAQ,EAAEF,KAAK,CAAC,CAAC;EAE1D,OAAOI,KAAK,CAACM,IAAI;AACnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}