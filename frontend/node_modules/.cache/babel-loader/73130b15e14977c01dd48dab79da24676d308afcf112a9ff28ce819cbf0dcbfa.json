{"ast":null,"code":"import { NATIVE_TOKEN_ADDRESS } from \"../../../constants/addresses.js\";\nimport { convertCryptoToFiat } from \"../../../pay/convert/cryptoToFiat.js\";\nimport { getFiatSymbol } from \"../../../pay/convert/type.js\";\nimport { isAddress } from \"../../../utils/address.js\";\nimport { formatNumber } from \"../../../utils/formatNumber.js\";\nimport { shortenLargeNumber } from \"../../../utils/shortenLargeNumber.js\";\nimport { getWalletBalance } from \"../../../wallets/utils/getWalletBalance.js\";\nexport const COLOR_OPTIONS = [[\"#fca5a5\", \"#b91c1c\"], [\"#fdba74\", \"#c2410c\"], [\"#fcd34d\", \"#b45309\"], [\"#fde047\", \"#a16207\"], [\"#a3e635\", \"#4d7c0f\"], [\"#86efac\", \"#15803d\"], [\"#67e8f9\", \"#0e7490\"], [\"#7dd3fc\", \"#0369a1\"], [\"#93c5fd\", \"#1d4ed8\"], [\"#a5b4fc\", \"#4338ca\"], [\"#c4b5fd\", \"#6d28d9\"], [\"#d8b4fe\", \"#7e22ce\"], [\"#f0abfc\", \"#a21caf\"], [\"#f9a8d4\", \"#be185d\"], [\"#fda4af\", \"#be123c\"]];\n/**\n * @internal Exported for tests\n */\nexport async function loadAccountBalance(props) {\n  const {\n    chain,\n    client,\n    address,\n    tokenAddress,\n    showBalanceInFiat\n  } = props;\n  if (!chain) {\n    throw new Error(\"chain is required\");\n  }\n  if (tokenAddress && (tokenAddress === null || tokenAddress === void 0 ? void 0 : tokenAddress.toLowerCase()) === NATIVE_TOKEN_ADDRESS.toLowerCase()) {\n    throw new Error(\"Invalid tokenAddress - cannot be \".concat(NATIVE_TOKEN_ADDRESS));\n  }\n  if (!isAddress(address)) {\n    throw new Error(\"Invalid wallet address. Expected an EVM address\");\n  }\n  if (tokenAddress && !isAddress(tokenAddress)) {\n    throw new Error(\"Invalid tokenAddress. Expected an EVM contract address\");\n  }\n  const tokenBalanceData = await getWalletBalance({\n    address,\n    chain,\n    client,\n    tokenAddress\n  }).catch(() => undefined);\n  if (!tokenBalanceData) {\n    throw new Error(\"Failed to retrieve \".concat(tokenAddress ? \"token: \".concat(tokenAddress) : \"native token\", \" balance for address: \").concat(address, \" on chainId:\").concat(chain.id));\n  }\n  if (showBalanceInFiat) {\n    const fiatData = await convertCryptoToFiat({\n      chain,\n      client,\n      fromAmount: Number(tokenBalanceData.displayValue),\n      fromTokenAddress: tokenAddress || NATIVE_TOKEN_ADDRESS,\n      to: showBalanceInFiat\n    }).catch(() => undefined);\n    if (fiatData === undefined) {\n      throw new Error(\"Failed to resolve fiat value for \".concat(tokenAddress ? \"token: \".concat(tokenAddress) : \"native token\", \" on chainId: \").concat(chain.id));\n    }\n    const result = {\n      balance: fiatData === null || fiatData === void 0 ? void 0 : fiatData.result,\n      symbol: getFiatSymbol(showBalanceInFiat)\n    };\n    return result;\n  }\n  return {\n    balance: Number(tokenBalanceData.displayValue),\n    symbol: tokenBalanceData.symbol\n  };\n}\n/**\n * Format the display balance for both crypto and fiat, in the Details button and Modal\n * If both crypto balance and fiat balance exist, we have to keep the string very short to avoid UI issues.\n * @internal\n * Used internally for the Details button and the Details Modal\n */\nexport function formatAccountTokenBalance(props) {\n  const formattedTokenBalance = formatNumber(props.balance, props.decimals);\n  return \"\".concat(formattedTokenBalance, \" \").concat(props.symbol);\n}\n/**\n * Used internally for the Details button and Details Modal\n * @internal\n */\nexport function formatAccountFiatBalance(props) {\n  const num = formatNumber(props.balance, props.decimals);\n  // Need to keep them short to avoid UI overflow issues\n  const formattedFiatBalance = shortenLargeNumber(num);\n  return \"\".concat(props.symbol).concat(formattedFiatBalance);\n}","map":{"version":3,"names":["NATIVE_TOKEN_ADDRESS","convertCryptoToFiat","getFiatSymbol","isAddress","formatNumber","shortenLargeNumber","getWalletBalance","COLOR_OPTIONS","loadAccountBalance","props","chain","client","address","tokenAddress","showBalanceInFiat","Error","toLowerCase","concat","tokenBalanceData","catch","undefined","id","fiatData","fromAmount","Number","displayValue","fromTokenAddress","to","result","balance","symbol","formatAccountTokenBalance","formattedTokenBalance","decimals","formatAccountFiatBalance","num","formattedFiatBalance"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/core/utils/account.ts"],"sourcesContent":["import type { Chain } from \"../../../chains/types.js\";\nimport type { ThirdwebClient } from \"../../../client/client.js\";\nimport { NATIVE_TOKEN_ADDRESS } from \"../../../constants/addresses.js\";\nimport { convertCryptoToFiat } from \"../../../pay/convert/cryptoToFiat.js\";\nimport {\n  getFiatSymbol,\n  type SupportedFiatCurrency,\n} from \"../../../pay/convert/type.js\";\nimport { type Address, isAddress } from \"../../../utils/address.js\";\nimport { formatNumber } from \"../../../utils/formatNumber.js\";\nimport { shortenLargeNumber } from \"../../../utils/shortenLargeNumber.js\";\nimport { getWalletBalance } from \"../../../wallets/utils/getWalletBalance.js\";\n\nexport const COLOR_OPTIONS = [\n  [\"#fca5a5\", \"#b91c1c\"],\n  [\"#fdba74\", \"#c2410c\"],\n  [\"#fcd34d\", \"#b45309\"],\n  [\"#fde047\", \"#a16207\"],\n  [\"#a3e635\", \"#4d7c0f\"],\n  [\"#86efac\", \"#15803d\"],\n  [\"#67e8f9\", \"#0e7490\"],\n  [\"#7dd3fc\", \"#0369a1\"],\n  [\"#93c5fd\", \"#1d4ed8\"],\n  [\"#a5b4fc\", \"#4338ca\"],\n  [\"#c4b5fd\", \"#6d28d9\"],\n  [\"#d8b4fe\", \"#7e22ce\"],\n  [\"#f0abfc\", \"#a21caf\"],\n  [\"#f9a8d4\", \"#be185d\"],\n  [\"#fda4af\", \"#be123c\"],\n];\n\n/**\n * @component\n * @wallet\n */\nexport type AccountBalanceInfo = {\n  /**\n   * Represents either token balance or fiat balance.\n   */\n  balance: number;\n  /**\n   * Represents either token symbol or fiat symbol\n   */\n  symbol: string;\n};\n\n/**\n * @internal Exported for tests\n */\nexport async function loadAccountBalance(props: {\n  chain?: Chain;\n  client: ThirdwebClient;\n  address: Address;\n  tokenAddress?: Address;\n  showBalanceInFiat?: SupportedFiatCurrency;\n}): Promise<AccountBalanceInfo> {\n  const { chain, client, address, tokenAddress, showBalanceInFiat } = props;\n  if (!chain) {\n    throw new Error(\"chain is required\");\n  }\n\n  if (\n    tokenAddress &&\n    tokenAddress?.toLowerCase() === NATIVE_TOKEN_ADDRESS.toLowerCase()\n  ) {\n    throw new Error(`Invalid tokenAddress - cannot be ${NATIVE_TOKEN_ADDRESS}`);\n  }\n\n  if (!isAddress(address)) {\n    throw new Error(\"Invalid wallet address. Expected an EVM address\");\n  }\n\n  if (tokenAddress && !isAddress(tokenAddress)) {\n    throw new Error(\"Invalid tokenAddress. Expected an EVM contract address\");\n  }\n\n  const tokenBalanceData = await getWalletBalance({\n    address,\n    chain,\n    client,\n    tokenAddress,\n  }).catch(() => undefined);\n\n  if (!tokenBalanceData) {\n    throw new Error(\n      `Failed to retrieve ${tokenAddress ? `token: ${tokenAddress}` : \"native token\"} balance for address: ${address} on chainId:${chain.id}`,\n    );\n  }\n\n  if (showBalanceInFiat) {\n    const fiatData = await convertCryptoToFiat({\n      chain,\n      client,\n      fromAmount: Number(tokenBalanceData.displayValue),\n      fromTokenAddress: tokenAddress || NATIVE_TOKEN_ADDRESS,\n      to: showBalanceInFiat,\n    }).catch(() => undefined);\n\n    if (fiatData === undefined) {\n      throw new Error(\n        `Failed to resolve fiat value for ${tokenAddress ? `token: ${tokenAddress}` : \"native token\"} on chainId: ${chain.id}`,\n      );\n    }\n    const result = {\n      balance: fiatData?.result,\n      symbol: getFiatSymbol(showBalanceInFiat),\n    };\n\n    return result;\n  }\n\n  return {\n    balance: Number(tokenBalanceData.displayValue),\n    symbol: tokenBalanceData.symbol,\n  };\n}\n\n/**\n * Format the display balance for both crypto and fiat, in the Details button and Modal\n * If both crypto balance and fiat balance exist, we have to keep the string very short to avoid UI issues.\n * @internal\n * Used internally for the Details button and the Details Modal\n */\nexport function formatAccountTokenBalance(\n  props: AccountBalanceInfo & { decimals: number },\n): string {\n  const formattedTokenBalance = formatNumber(props.balance, props.decimals);\n  return `${formattedTokenBalance} ${props.symbol}`;\n}\n\n/**\n * Used internally for the Details button and Details Modal\n * @internal\n */\nexport function formatAccountFiatBalance(\n  props: AccountBalanceInfo & { decimals: number },\n) {\n  const num = formatNumber(props.balance, props.decimals);\n  // Need to keep them short to avoid UI overflow issues\n  const formattedFiatBalance = shortenLargeNumber(num);\n  return `${props.symbol}${formattedFiatBalance}`;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}