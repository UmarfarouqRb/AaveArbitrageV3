{"ast":null,"code":"\"use client\";\n\nimport _objectSpread from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"loadingComponent\", \"fallbackComponent\", \"queryOptions\", \"descriptionResolver\"];\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { getFunctionId } from \"../../../../../utils/function-id.js\";\nimport { useNFTContext } from \"./provider.js\";\nimport { getNFTInfo } from \"./utils.js\";\n/**\n * This component fetches and displays an NFT's description. It inherits all the attributes of a <span>\n * so you can style it just like how you would style a <span> element.\n * @returns A <span> element containing the description of the NFT\n *\n * @example\n * ### Basic usage\n * ```tsx\n * import { NFTProvider, NFTDescription } from \"thirdweb/react\";\n *\n * <NFTProvider>\n *   <NFTDescription />\n * </NFTProvider>\n * ```\n *\n * ### Show a loading sign while the description is being fetched\n * ```tsx\n * import { NFTProvider, NFTDescription } from \"thirdweb/react\";\n *\n * <NFTProvider>\n *   <NFTDescription loadingComponent={<YourLoadingSign />} />\n * </NFTProvider>\n * ```\n *\n * ### Show something in case the description failed to resolve\n * ```tsx\n * import { NFTProvider, NFTDescription } from \"thirdweb/react\";\n *\n * <NFTProvider>\n *   <NFTDescription fallbackComponent={<span>Failed to load description</span>} />\n * </NFTProvider>\n * ```\n *\n * ### Custom query options for useQuery (tanstack-query)\n * ```tsx\n * import { NFTProvider, NFTDescription } from \"thirdweb/react\";\n *\n * <NFTProvider>\n *   <NFTDescription queryOptions={{ retry: 3, enabled: false, }} />\n * </NFTProvider>\n * ```\n *\n * ### Override the description with the `descriptionResolver` prop\n * If you already have the url, you can skip the network requests and pass it directly to the NFTDescription\n * ```tsx\n * <NFTDescription descriptionResolver=\"The desc of the NFT\" />\n * ```\n *\n * You can also pass in your own custom (async) function that retrieves the description\n * ```tsx\n * const getDescription = async () => {\n *   // ...\n *   return description;\n * };\n *\n * <NFTDescription descriptionResolver={getDescription} />\n * ```\n * @component\n * @nft\n * @beta\n */\nexport function NFTDescription(_ref) {\n  let {\n      loadingComponent,\n      fallbackComponent,\n      queryOptions,\n      descriptionResolver\n    } = _ref,\n    restProps = _objectWithoutProperties(_ref, _excluded);\n  const {\n    contract,\n    tokenId\n  } = useNFTContext();\n  const descQuery = useQuery(_objectSpread({\n    queryFn: async () => fetchNftDescription({\n      contract,\n      descriptionResolver,\n      tokenId\n    }),\n    queryKey: [\"_internal_nft_description_\", contract.chain.id, contract.address, tokenId.toString(), {\n      resolver: typeof descriptionResolver === \"string\" ? descriptionResolver : typeof descriptionResolver === \"function\" ? getFunctionId(descriptionResolver) : undefined\n    }]\n  }, queryOptions));\n  if (descQuery.isLoading) {\n    return loadingComponent || null;\n  }\n  if (!descQuery.data) {\n    return fallbackComponent || null;\n  }\n  return _jsx(\"span\", _objectSpread(_objectSpread({}, restProps), {}, {\n    children: descQuery.data\n  }));\n}\n/**\n * @internal Exported for tests\n */\nexport async function fetchNftDescription(props) {\n  const {\n    descriptionResolver,\n    contract,\n    tokenId\n  } = props;\n  if (typeof descriptionResolver === \"string\") {\n    return descriptionResolver;\n  }\n  if (typeof descriptionResolver === \"function\") {\n    return descriptionResolver();\n  }\n  const nft = await getNFTInfo({\n    contract,\n    tokenId\n  }).catch(() => undefined);\n  if (!nft) {\n    throw new Error(\"Failed to resolve NFT info\");\n  }\n  if (typeof nft.metadata.description !== \"string\") {\n    throw new Error(\"Failed to resolve NFT description\");\n  }\n  return nft.metadata.description;\n}","map":{"version":3,"names":["_objectSpread","_objectWithoutProperties","_excluded","useQuery","getFunctionId","useNFTContext","getNFTInfo","NFTDescription","_ref","loadingComponent","fallbackComponent","queryOptions","descriptionResolver","restProps","contract","tokenId","descQuery","queryFn","fetchNftDescription","queryKey","chain","id","address","toString","resolver","undefined","isLoading","data","_jsx","children","props","nft","catch","Error","metadata","description"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/web/ui/prebuilt/NFT/description.tsx"],"sourcesContent":["\"use client\";\n\nimport { type UseQueryOptions, useQuery } from \"@tanstack/react-query\";\nimport type { JSX } from \"react\";\nimport type { ThirdwebContract } from \"../../../../../contract/contract.js\";\nimport { getFunctionId } from \"../../../../../utils/function-id.js\";\nimport { useNFTContext } from \"./provider.js\";\nimport { getNFTInfo } from \"./utils.js\";\n\nexport interface NFTDescriptionProps\n  extends Omit<React.HTMLAttributes<HTMLSpanElement>, \"children\"> {\n  loadingComponent?: JSX.Element;\n  fallbackComponent?: JSX.Element;\n  /**\n   * Optional `useQuery` params\n   */\n  queryOptions?: Omit<UseQueryOptions<string>, \"queryFn\" | \"queryKey\">;\n  /**\n   * This prop can be a string or a (async) function that resolves to a string, representing the description of the NFT\n   * This is particularly useful if you already have a way to fetch the data.\n   */\n  descriptionResolver?: string | (() => string) | (() => Promise<string>);\n}\n\n/**\n * This component fetches and displays an NFT's description. It inherits all the attributes of a <span>\n * so you can style it just like how you would style a <span> element.\n * @returns A <span> element containing the description of the NFT\n *\n * @example\n * ### Basic usage\n * ```tsx\n * import { NFTProvider, NFTDescription } from \"thirdweb/react\";\n *\n * <NFTProvider>\n *   <NFTDescription />\n * </NFTProvider>\n * ```\n *\n * ### Show a loading sign while the description is being fetched\n * ```tsx\n * import { NFTProvider, NFTDescription } from \"thirdweb/react\";\n *\n * <NFTProvider>\n *   <NFTDescription loadingComponent={<YourLoadingSign />} />\n * </NFTProvider>\n * ```\n *\n * ### Show something in case the description failed to resolve\n * ```tsx\n * import { NFTProvider, NFTDescription } from \"thirdweb/react\";\n *\n * <NFTProvider>\n *   <NFTDescription fallbackComponent={<span>Failed to load description</span>} />\n * </NFTProvider>\n * ```\n *\n * ### Custom query options for useQuery (tanstack-query)\n * ```tsx\n * import { NFTProvider, NFTDescription } from \"thirdweb/react\";\n *\n * <NFTProvider>\n *   <NFTDescription queryOptions={{ retry: 3, enabled: false, }} />\n * </NFTProvider>\n * ```\n *\n * ### Override the description with the `descriptionResolver` prop\n * If you already have the url, you can skip the network requests and pass it directly to the NFTDescription\n * ```tsx\n * <NFTDescription descriptionResolver=\"The desc of the NFT\" />\n * ```\n *\n * You can also pass in your own custom (async) function that retrieves the description\n * ```tsx\n * const getDescription = async () => {\n *   // ...\n *   return description;\n * };\n *\n * <NFTDescription descriptionResolver={getDescription} />\n * ```\n * @component\n * @nft\n * @beta\n */\nexport function NFTDescription({\n  loadingComponent,\n  fallbackComponent,\n  queryOptions,\n  descriptionResolver,\n  ...restProps\n}: NFTDescriptionProps) {\n  const { contract, tokenId } = useNFTContext();\n  const descQuery = useQuery({\n    queryFn: async (): Promise<string> =>\n      fetchNftDescription({ contract, descriptionResolver, tokenId }),\n    queryKey: [\n      \"_internal_nft_description_\",\n      contract.chain.id,\n      contract.address,\n      tokenId.toString(),\n      {\n        resolver:\n          typeof descriptionResolver === \"string\"\n            ? descriptionResolver\n            : typeof descriptionResolver === \"function\"\n              ? getFunctionId(descriptionResolver)\n              : undefined,\n      },\n    ],\n    ...queryOptions,\n  });\n\n  if (descQuery.isLoading) {\n    return loadingComponent || null;\n  }\n\n  if (!descQuery.data) {\n    return fallbackComponent || null;\n  }\n\n  return <span {...restProps}>{descQuery.data}</span>;\n}\n\n/**\n * @internal Exported for tests\n */\nexport async function fetchNftDescription(props: {\n  descriptionResolver?: string | (() => string) | (() => Promise<string>);\n  contract: ThirdwebContract;\n  tokenId: bigint;\n}): Promise<string> {\n  const { descriptionResolver, contract, tokenId } = props;\n  if (typeof descriptionResolver === \"string\") {\n    return descriptionResolver;\n  }\n  if (typeof descriptionResolver === \"function\") {\n    return descriptionResolver();\n  }\n  const nft = await getNFTInfo({ contract, tokenId }).catch(() => undefined);\n  if (!nft) {\n    throw new Error(\"Failed to resolve NFT info\");\n  }\n  if (typeof nft.metadata.description !== \"string\") {\n    throw new Error(\"Failed to resolve NFT description\");\n  }\n  return nft.metadata.description;\n}\n"],"mappings":"AAAA,YAAY;;AAAC,OAAAA,aAAA;AAAA,OAAAC,wBAAA;AAAA,MAAAC,SAAA;;AAEb,SAA+BC,QAAQ,QAAQ,uBAAuB;AAGtE,SAASC,aAAa,QAAQ,qCAAqC;AACnE,SAASC,aAAa,QAAQ,eAAe;AAC7C,SAASC,UAAU,QAAQ,YAAY;AAiBvC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA,OAAM,SAAUC,cAAcA,CAAAC,IAAA,EAMR;EAAA,IANS;MAC7BC,gBAAgB;MAChBC,iBAAiB;MACjBC,YAAY;MACZC;IACY,CACQ,GAAAJ,IAAA;IADjBK,SAAS,GAAAZ,wBAAA,CAAAO,IAAA,EAAAN,SAAA;EAEZ,MAAM;IAAEY,QAAQ;IAAEC;EAAO,CAAE,GAAGV,aAAa,EAAE;EAC7C,MAAMW,SAAS,GAAGb,QAAQ,CAAAH,aAAA;IACxBiB,OAAO,EAAE,MAAAA,CAAA,KACPC,mBAAmB,CAAC;MAAEJ,QAAQ;MAAEF,mBAAmB;MAAEG;IAAO,CAAE,CAAC;IACjEI,QAAQ,EAAE,CACR,4BAA4B,EAC5BL,QAAQ,CAACM,KAAK,CAACC,EAAE,EACjBP,QAAQ,CAACQ,OAAO,EAChBP,OAAO,CAACQ,QAAQ,EAAE,EAClB;MACEC,QAAQ,EACN,OAAOZ,mBAAmB,KAAK,QAAQ,GACnCA,mBAAmB,GACnB,OAAOA,mBAAmB,KAAK,UAAU,GACvCR,aAAa,CAACQ,mBAAmB,CAAC,GAClCa;KACT;EACF,GACEd,YAAY,CAChB,CAAC;EAEF,IAAIK,SAAS,CAACU,SAAS,EAAE;IACvB,OAAOjB,gBAAgB,IAAI,IAAI;EACjC;EAEA,IAAI,CAACO,SAAS,CAACW,IAAI,EAAE;IACnB,OAAOjB,iBAAiB,IAAI,IAAI;EAClC;EAEA,OAAOkB,IAAA,SAAA5B,aAAA,CAAAA,aAAA,KAAUa,SAAS;IAAAgB,QAAA,EAAGb,SAAS,CAACW;EAAI,GAAQ;AACrD;AAEA;;;AAGA,OAAO,eAAeT,mBAAmBA,CAACY,KAIzC;EACC,MAAM;IAAElB,mBAAmB;IAAEE,QAAQ;IAAEC;EAAO,CAAE,GAAGe,KAAK;EACxD,IAAI,OAAOlB,mBAAmB,KAAK,QAAQ,EAAE;IAC3C,OAAOA,mBAAmB;EAC5B;EACA,IAAI,OAAOA,mBAAmB,KAAK,UAAU,EAAE;IAC7C,OAAOA,mBAAmB,EAAE;EAC9B;EACA,MAAMmB,GAAG,GAAG,MAAMzB,UAAU,CAAC;IAAEQ,QAAQ;IAAEC;EAAO,CAAE,CAAC,CAACiB,KAAK,CAAC,MAAMP,SAAS,CAAC;EAC1E,IAAI,CAACM,GAAG,EAAE;IACR,MAAM,IAAIE,KAAK,CAAC,4BAA4B,CAAC;EAC/C;EACA,IAAI,OAAOF,GAAG,CAACG,QAAQ,CAACC,WAAW,KAAK,QAAQ,EAAE;IAChD,MAAM,IAAIF,KAAK,CAAC,mCAAmC,CAAC;EACtD;EACA,OAAOF,GAAG,CAACG,QAAQ,CAACC,WAAW;AACjC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}