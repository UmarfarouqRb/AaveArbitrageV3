{"ast":null,"code":"/**\n * Get the capabilities of a wallet based on the [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) specification.\n *\n *  This function is dependent on the wallet's support for EIP-5792, but will not throw.\n * **The returned object contains a `message` field detailing any issues with the wallet's support for EIP-5792.**\n *\n * @param {GetCapabilitiesOptions} options\n * @param {Wallet} options.wallet - The wallet to get the capabilities of.\n * @returns {Promise<GetCapabilitiesResult>} - A promise that resolves to the capabilities of the wallet based on the [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) spec.\n * @beta\n * @example\n * ```ts\n * import { getCapabilities } from \"thirdweb/wallets/eip5792\";\n *\n * const wallet = createWallet(\"com.coinbase.wallet\");\n * const capabilities = await getCapabilities({ wallet });\n * ```\n *\n * @extension EIP5792\n */\nexport async function getCapabilities(_ref) {\n  let {\n    wallet,\n    chainId\n  } = _ref;\n  const account = wallet.getAccount();\n  if (!account) {\n    return {\n      message: \"Can't get capabilities, no account connected for wallet: \".concat(wallet.id)\n    };\n  }\n  if (account.getCapabilities) {\n    return account.getCapabilities({\n      chainId\n    });\n  }\n  throw new Error(\"Failed to get capabilities, wallet \".concat(wallet.id, \" does not support EIP-5792\"));\n}\nexport function toGetCapabilitiesResult(result, chainId) {\n  const capabilities = {};\n  for (const [chainId, capabilities_] of Object.entries(result)) {\n    capabilities[Number(chainId)] = {};\n    const capabilitiesCopy = {};\n    for (const [key, value] of Object.entries(capabilities_)) {\n      capabilitiesCopy[key] = value;\n    }\n    capabilities[Number(chainId)] = capabilitiesCopy;\n  }\n  return typeof chainId === \"number\" ? capabilities[chainId] : capabilities;\n}","map":{"version":3,"names":["getCapabilities","_ref","wallet","chainId","account","getAccount","message","concat","id","Error","toGetCapabilitiesResult","result","capabilities","capabilities_","Object","entries","Number","capabilitiesCopy","key","value"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/wallets/eip5792/get-capabilities.ts"],"sourcesContent":["import type { Prettify } from \"../../utils/type-utils.js\";\nimport type { Wallet } from \"../interfaces/wallet.js\";\nimport type { WalletId } from \"../wallet-types.js\";\nimport type { WalletCapabilities, WalletCapabilitiesRecord } from \"./types.js\";\n\nexport type GetCapabilitiesOptions<ID extends WalletId = WalletId> = {\n  wallet: Wallet<ID>;\n  chainId?: number;\n};\n\nexport type GetCapabilitiesResult = Prettify<\n  WalletCapabilitiesRecord<WalletCapabilities, number>\n>;\n\n/**\n * Get the capabilities of a wallet based on the [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) specification.\n *\n *  This function is dependent on the wallet's support for EIP-5792, but will not throw.\n * **The returned object contains a `message` field detailing any issues with the wallet's support for EIP-5792.**\n *\n * @param {GetCapabilitiesOptions} options\n * @param {Wallet} options.wallet - The wallet to get the capabilities of.\n * @returns {Promise<GetCapabilitiesResult>} - A promise that resolves to the capabilities of the wallet based on the [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) spec.\n * @beta\n * @example\n * ```ts\n * import { getCapabilities } from \"thirdweb/wallets/eip5792\";\n *\n * const wallet = createWallet(\"com.coinbase.wallet\");\n * const capabilities = await getCapabilities({ wallet });\n * ```\n *\n * @extension EIP5792\n */\nexport async function getCapabilities<const ID extends WalletId = WalletId>({\n  wallet,\n  chainId,\n}: GetCapabilitiesOptions<ID>): Promise<GetCapabilitiesResult> {\n  const account = wallet.getAccount();\n  if (!account) {\n    return {\n      message: `Can't get capabilities, no account connected for wallet: ${wallet.id}`,\n    };\n  }\n\n  if (account.getCapabilities) {\n    return account.getCapabilities({ chainId });\n  }\n\n  throw new Error(\n    `Failed to get capabilities, wallet ${wallet.id} does not support EIP-5792`,\n  );\n}\n\nexport function toGetCapabilitiesResult(\n  result: Record<string, WalletCapabilities>,\n  chainId?: number,\n): GetCapabilitiesResult {\n  const capabilities = {} as WalletCapabilitiesRecord<\n    WalletCapabilities,\n    number\n  >;\n  for (const [chainId, capabilities_] of Object.entries(result)) {\n    capabilities[Number(chainId)] = {};\n    const capabilitiesCopy = {} as WalletCapabilities;\n    for (const [key, value] of Object.entries(capabilities_)) {\n      capabilitiesCopy[key] = value;\n    }\n    capabilities[Number(chainId)] = capabilitiesCopy;\n  }\n  return (\n    typeof chainId === \"number\" ? capabilities[chainId] : capabilities\n  ) as never;\n}\n"],"mappings":"AAcA;;;;;;;;;;;;;;;;;;;;AAoBA,OAAO,eAAeA,eAAeA,CAAAC,IAAA,EAGR;EAAA,IAH+C;IAC1EC,MAAM;IACNC;EAAO,CACoB,GAAAF,IAAA;EAC3B,MAAMG,OAAO,GAAGF,MAAM,CAACG,UAAU,EAAE;EACnC,IAAI,CAACD,OAAO,EAAE;IACZ,OAAO;MACLE,OAAO,8DAAAC,MAAA,CAA8DL,MAAM,CAACM,EAAE;KAC/E;EACH;EAEA,IAAIJ,OAAO,CAACJ,eAAe,EAAE;IAC3B,OAAOI,OAAO,CAACJ,eAAe,CAAC;MAAEG;IAAO,CAAE,CAAC;EAC7C;EAEA,MAAM,IAAIM,KAAK,uCAAAF,MAAA,CACyBL,MAAM,CAACM,EAAE,+BAA4B,CAC5E;AACH;AAEA,OAAM,SAAUE,uBAAuBA,CACrCC,MAA0C,EAC1CR,OAAgB;EAEhB,MAAMS,YAAY,GAAG,EAGpB;EACD,KAAK,MAAM,CAACT,OAAO,EAAEU,aAAa,CAAC,IAAIC,MAAM,CAACC,OAAO,CAACJ,MAAM,CAAC,EAAE;IAC7DC,YAAY,CAACI,MAAM,CAACb,OAAO,CAAC,CAAC,GAAG,EAAE;IAClC,MAAMc,gBAAgB,GAAG,EAAwB;IACjD,KAAK,MAAM,CAACC,GAAG,EAAEC,KAAK,CAAC,IAAIL,MAAM,CAACC,OAAO,CAACF,aAAa,CAAC,EAAE;MACxDI,gBAAgB,CAACC,GAAG,CAAC,GAAGC,KAAK;IAC/B;IACAP,YAAY,CAACI,MAAM,CAACb,OAAO,CAAC,CAAC,GAAGc,gBAAgB;EAClD;EACA,OACE,OAAOd,OAAO,KAAK,QAAQ,GAAGS,YAAY,CAACT,OAAO,CAAC,GAAGS,YAAY;AAEtE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}