{"ast":null,"code":"import { getThirdwebBaseUrl } from \"../../../../utils/domains.js\";\nimport { authOptions } from \"../../../../wallets/types.js\";\nconst getLoginOptionRoute = option => {\n  if (!authOptions.includes(option)) {\n    throw new Error(\"Unknown auth option \".concat(option));\n  }\n  switch (option) {\n    case \"wallet\":\n      return \"siwe\";\n    default:\n      return option;\n  }\n};\nexport const getLoginUrl = _ref => {\n  let {\n    authOption,\n    client,\n    ecosystem,\n    mode = \"popup\",\n    redirectUrl\n  } = _ref;\n  if (mode === \"popup\" && redirectUrl) {\n    throw new Error(\"Redirect URL is not supported for popup mode\");\n  }\n  if (mode === \"window\" && !redirectUrl) {\n    throw new Error(\"Redirect URL is required for window mode\");\n  }\n  const route = getLoginOptionRoute(authOption);\n  let baseUrl = \"\".concat(getThirdwebBaseUrl(\"inAppWallet\"), \"/api/2024-05-05/login/\").concat(route, \"?clientId=\").concat(client.clientId);\n  if (ecosystem !== null && ecosystem !== void 0 && ecosystem.partnerId) {\n    baseUrl = \"\".concat(baseUrl, \"&ecosystemId=\").concat(ecosystem.id, \"&ecosystemPartnerId=\").concat(ecosystem.partnerId);\n  } else if (ecosystem) {\n    baseUrl = \"\".concat(baseUrl, \"&ecosystemId=\").concat(ecosystem.id);\n  }\n  // Always append redirectUrl to the baseUrl if mode is not popup\n  if (mode !== \"popup\") {\n    const formattedRedirectUrl = new URL(redirectUrl || window.location.href);\n    formattedRedirectUrl.searchParams.set(\"walletId\", (ecosystem === null || ecosystem === void 0 ? void 0 : ecosystem.id) || \"inApp\");\n    formattedRedirectUrl.searchParams.set(\"authProvider\", authOption);\n    baseUrl = \"\".concat(baseUrl, \"&redirectUrl=\").concat(encodeURIComponent(formattedRedirectUrl.toString()));\n  }\n  return baseUrl;\n};\nexport const getLoginCallbackUrl = _ref2 => {\n  let {\n    authOption,\n    client,\n    ecosystem\n  } = _ref2;\n  const route = getLoginOptionRoute(authOption);\n  let baseUrl = \"\".concat(getThirdwebBaseUrl(\"inAppWallet\"), \"/api/2024-05-05/login/\").concat(route, \"/callback?clientId=\").concat(client.clientId);\n  if (ecosystem !== null && ecosystem !== void 0 && ecosystem.partnerId) {\n    baseUrl = \"\".concat(baseUrl, \"&ecosystemId=\").concat(ecosystem.id, \"&ecosystemPartnerId=\").concat(ecosystem.partnerId);\n  } else if (ecosystem) {\n    baseUrl = \"\".concat(baseUrl, \"&ecosystemId=\").concat(ecosystem.id);\n  }\n  return baseUrl;\n};","map":{"version":3,"names":["getThirdwebBaseUrl","authOptions","getLoginOptionRoute","option","includes","Error","concat","getLoginUrl","_ref","authOption","client","ecosystem","mode","redirectUrl","route","baseUrl","clientId","partnerId","id","formattedRedirectUrl","URL","window","location","href","searchParams","set","encodeURIComponent","toString","getLoginCallbackUrl","_ref2"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/wallets/in-app/core/authentication/getLoginPath.ts"],"sourcesContent":["import type { ThirdwebClient } from \"../../../../client/client.js\";\nimport { getThirdwebBaseUrl } from \"../../../../utils/domains.js\";\nimport { type AuthOption, authOptions } from \"../../../../wallets/types.js\";\nimport type { Ecosystem } from \"../wallet/types.js\";\n\nconst getLoginOptionRoute = (option: AuthOption) => {\n  if (!authOptions.includes(option as AuthOption)) {\n    throw new Error(`Unknown auth option ${option}`);\n  }\n  switch (option) {\n    case \"wallet\":\n      return \"siwe\";\n    default:\n      return option;\n  }\n};\n\nexport const getLoginUrl = ({\n  authOption,\n  client,\n  ecosystem,\n  mode = \"popup\",\n  redirectUrl,\n}: {\n  authOption: AuthOption;\n  client: ThirdwebClient;\n  ecosystem?: Ecosystem;\n  mode?: \"popup\" | \"redirect\" | \"window\";\n  redirectUrl?: string;\n}) => {\n  if (mode === \"popup\" && redirectUrl) {\n    throw new Error(\"Redirect URL is not supported for popup mode\");\n  }\n\n  if (mode === \"window\" && !redirectUrl) {\n    throw new Error(\"Redirect URL is required for window mode\");\n  }\n\n  const route = getLoginOptionRoute(authOption);\n  let baseUrl = `${getThirdwebBaseUrl(\"inAppWallet\")}/api/2024-05-05/login/${route}?clientId=${client.clientId}`;\n  if (ecosystem?.partnerId) {\n    baseUrl = `${baseUrl}&ecosystemId=${ecosystem.id}&ecosystemPartnerId=${ecosystem.partnerId}`;\n  } else if (ecosystem) {\n    baseUrl = `${baseUrl}&ecosystemId=${ecosystem.id}`;\n  }\n\n  // Always append redirectUrl to the baseUrl if mode is not popup\n  if (mode !== \"popup\") {\n    const formattedRedirectUrl = new URL(redirectUrl || window.location.href);\n    formattedRedirectUrl.searchParams.set(\"walletId\", ecosystem?.id || \"inApp\");\n    formattedRedirectUrl.searchParams.set(\"authProvider\", authOption);\n    baseUrl = `${baseUrl}&redirectUrl=${encodeURIComponent(formattedRedirectUrl.toString())}`;\n  }\n\n  return baseUrl;\n};\n\nexport const getLoginCallbackUrl = ({\n  authOption,\n  client,\n  ecosystem,\n}: {\n  authOption: AuthOption;\n  client: ThirdwebClient;\n  ecosystem?: Ecosystem;\n}): string => {\n  const route = getLoginOptionRoute(authOption);\n  let baseUrl = `${getThirdwebBaseUrl(\"inAppWallet\")}/api/2024-05-05/login/${route}/callback?clientId=${client.clientId}`;\n  if (ecosystem?.partnerId) {\n    baseUrl = `${baseUrl}&ecosystemId=${ecosystem.id}&ecosystemPartnerId=${ecosystem.partnerId}`;\n  } else if (ecosystem) {\n    baseUrl = `${baseUrl}&ecosystemId=${ecosystem.id}`;\n  }\n\n  return baseUrl;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}