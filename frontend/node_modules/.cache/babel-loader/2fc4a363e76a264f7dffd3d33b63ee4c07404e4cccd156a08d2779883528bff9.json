{"ast":null,"code":"import _objectSpread from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport * as BlockOverrides from 'ox/BlockOverrides';\nimport { parseAccount } from '../../accounts/utils/parseAccount.js';\nimport { AbiDecodingZeroDataError } from '../../errors/abi.js';\nimport { RawContractError } from '../../errors/contract.js';\nimport { UnknownNodeError } from '../../errors/node.js';\nimport { decodeFunctionResult } from '../../utils/abi/decodeFunctionResult.js';\nimport { encodeFunctionData } from '../../utils/abi/encodeFunctionData.js';\nimport { numberToHex } from '../../utils/encoding/toHex.js';\nimport { getContractError } from '../../utils/errors/getContractError.js';\nimport { getNodeError } from '../../utils/errors/getNodeError.js';\nimport { formatBlock } from '../../utils/formatters/block.js';\nimport { formatLog } from '../../utils/formatters/log.js';\nimport { formatTransactionRequest } from '../../utils/formatters/transactionRequest.js';\nimport { serializeStateOverride } from '../../utils/stateOverride.js';\nimport { assertRequest } from '../../utils/transaction/assertRequest.js';\n/**\n * Simulates a set of calls on block(s) with optional block and state overrides.\n *\n * @example\n * ```ts\n * import { createClient, http, parseEther } from 'viem'\n * import { simulate } from 'viem/actions'\n * import { mainnet } from 'viem/chains'\n *\n * const client = createClient({\n *   chain: mainnet,\n *   transport: http(),\n * })\n *\n * const result = await simulate(client, {\n *   blocks: [{\n *     blockOverrides: {\n *       number: 69420n,\n *     },\n *     calls: [{\n *       {\n *         account: '0x5a0b54d5dc17e482fe8b0bdca5320161b95fb929',\n *         data: '0xdeadbeef',\n *         to: '0x70997970c51812dc3a010c7d01b50e0d17dc79c8',\n *       },\n *       {\n *         account: '0x5a0b54d5dc17e482fe8b0bdca5320161b95fb929',\n *         to: '0x70997970c51812dc3a010c7d01b50e0d17dc79c8',\n *         value: parseEther('1'),\n *       },\n *     }],\n *     stateOverrides: [{\n *       address: '0x5a0b54d5dc17e482fe8b0bdca5320161b95fb929',\n *       balance: parseEther('10'),\n *     }],\n *   }]\n * })\n * ```\n *\n * @param client - Client to use.\n * @param parameters - {@link SimulateBlocksParameters}\n * @returns Simulated blocks. {@link SimulateBlocksReturnType}\n */\nexport async function simulateBlocks(client, parameters) {\n  const {\n    blockNumber,\n    blockTag = 'latest',\n    blocks,\n    returnFullTransactions,\n    traceTransfers,\n    validation\n  } = parameters;\n  try {\n    const blockStateCalls = [];\n    for (const block of blocks) {\n      const blockOverrides = block.blockOverrides ? BlockOverrides.toRpc(block.blockOverrides) : undefined;\n      const calls = block.calls.map(call_ => {\n        var _call$from;\n        const call = call_;\n        const account = call.account ? parseAccount(call.account) : undefined;\n        const request = _objectSpread(_objectSpread({}, call), {}, {\n          data: call.abi ? encodeFunctionData(call) : call.data,\n          from: (_call$from = call.from) !== null && _call$from !== void 0 ? _call$from : account === null || account === void 0 ? void 0 : account.address\n        });\n        assertRequest(request);\n        return formatTransactionRequest(request);\n      });\n      const stateOverrides = block.stateOverrides ? serializeStateOverride(block.stateOverrides) : undefined;\n      blockStateCalls.push({\n        blockOverrides,\n        calls,\n        stateOverrides\n      });\n    }\n    const blockNumberHex = typeof blockNumber === 'bigint' ? numberToHex(blockNumber) : undefined;\n    const block = blockNumberHex || blockTag;\n    const result = await client.request({\n      method: 'eth_simulateV1',\n      params: [{\n        blockStateCalls,\n        returnFullTransactions,\n        traceTransfers,\n        validation\n      }, block]\n    });\n    return result.map((block, i) => _objectSpread(_objectSpread({}, formatBlock(block)), {}, {\n      calls: block.calls.map((call, j) => {\n        var _call$error$data, _call$error, _call$logs;\n        const {\n          abi,\n          args,\n          functionName,\n          to\n        } = blocks[i].calls[j];\n        const data = (_call$error$data = (_call$error = call.error) === null || _call$error === void 0 ? void 0 : _call$error.data) !== null && _call$error$data !== void 0 ? _call$error$data : call.returnData;\n        const gasUsed = BigInt(call.gasUsed);\n        const logs = (_call$logs = call.logs) === null || _call$logs === void 0 ? void 0 : _call$logs.map(log => formatLog(log));\n        const status = call.status === '0x1' ? 'success' : 'failure';\n        const result = abi && status === 'success' && data !== '0x' ? decodeFunctionResult({\n          abi,\n          data,\n          functionName\n        }) : null;\n        const error = (_call$error2 => {\n          if (status === 'success') return undefined;\n          let error = undefined;\n          if (((_call$error2 = call.error) === null || _call$error2 === void 0 ? void 0 : _call$error2.data) === '0x') error = new AbiDecodingZeroDataError();else if (call.error) error = new RawContractError(call.error);\n          if (!error) return undefined;\n          return getContractError(error, {\n            abi: abi !== null && abi !== void 0 ? abi : [],\n            address: to,\n            args,\n            functionName: functionName !== null && functionName !== void 0 ? functionName : '<unknown>'\n          });\n        })();\n        return _objectSpread({\n          data,\n          gasUsed,\n          logs,\n          status\n        }, status === 'success' ? {\n          result\n        } : {\n          error\n        });\n      })\n    }));\n  } catch (e) {\n    const cause = e;\n    const error = getNodeError(cause, {});\n    if (error instanceof UnknownNodeError) throw cause;\n    throw error;\n  }\n}","map":{"version":3,"names":["BlockOverrides","parseAccount","AbiDecodingZeroDataError","RawContractError","UnknownNodeError","decodeFunctionResult","encodeFunctionData","numberToHex","getContractError","getNodeError","formatBlock","formatLog","formatTransactionRequest","serializeStateOverride","assertRequest","simulateBlocks","client","parameters","blockNumber","blockTag","blocks","returnFullTransactions","traceTransfers","validation","blockStateCalls","block","blockOverrides","toRpc","undefined","calls","map","call_","_call$from","call","account","request","_objectSpread","data","abi","from","address","stateOverrides","push","blockNumberHex","result","method","params","i","j","_call$error$data","_call$error","_call$logs","args","functionName","to","error","returnData","gasUsed","BigInt","logs","log","status","_call$error2","e","cause"],"sources":["/home/user/Arbitrage/frontend/node_modules/@walletconnect/utils/node_modules/viem/actions/public/simulateBlocks.ts"],"sourcesContent":["import type { Abi, AbiStateMutability, Address, Narrow } from 'abitype'\nimport * as BlockOverrides from 'ox/BlockOverrides'\n\nimport {\n  type ParseAccountErrorType,\n  parseAccount,\n} from '../../accounts/utils/parseAccount.js'\nimport type { Client } from '../../clients/createClient.js'\nimport type { Transport } from '../../clients/transports/createTransport.js'\nimport { AbiDecodingZeroDataError } from '../../errors/abi.js'\nimport type { BaseError } from '../../errors/base.js'\nimport { RawContractError } from '../../errors/contract.js'\nimport { UnknownNodeError } from '../../errors/node.js'\nimport type { ErrorType } from '../../errors/utils.js'\nimport type { Account } from '../../types/account.js'\nimport type { Block, BlockTag } from '../../types/block.js'\nimport type { Call, Calls } from '../../types/calls.js'\nimport type { Chain } from '../../types/chain.js'\nimport type { Log } from '../../types/log.js'\nimport type { Hex } from '../../types/misc.js'\nimport type { MulticallResults } from '../../types/multicall.js'\nimport type { StateOverride } from '../../types/stateOverride.js'\nimport type { TransactionRequest } from '../../types/transaction.js'\nimport type { ExactPartial, UnionOmit } from '../../types/utils.js'\nimport {\n  type DecodeFunctionResultErrorType,\n  decodeFunctionResult,\n} from '../../utils/abi/decodeFunctionResult.js'\nimport {\n  type EncodeFunctionDataErrorType,\n  encodeFunctionData,\n} from '../../utils/abi/encodeFunctionData.js'\nimport {\n  type NumberToHexErrorType,\n  numberToHex,\n} from '../../utils/encoding/toHex.js'\nimport { getContractError } from '../../utils/errors/getContractError.js'\nimport {\n  type GetNodeErrorReturnType,\n  getNodeError,\n} from '../../utils/errors/getNodeError.js'\nimport {\n  type FormatBlockErrorType,\n  formatBlock,\n} from '../../utils/formatters/block.js'\nimport { formatLog } from '../../utils/formatters/log.js'\nimport {\n  type FormatTransactionRequestErrorType,\n  formatTransactionRequest,\n} from '../../utils/formatters/transactionRequest.js'\nimport {\n  type SerializeStateOverrideErrorType,\n  serializeStateOverride,\n} from '../../utils/stateOverride.js'\nimport {\n  type AssertRequestErrorType,\n  assertRequest,\n} from '../../utils/transaction/assertRequest.js'\n\ntype CallExtraProperties = ExactPartial<\n  UnionOmit<\n    TransactionRequest,\n    'blobs' | 'data' | 'kzg' | 'to' | 'sidecars' | 'value'\n  >\n> & {\n  /** Account attached to the call (msg.sender). */\n  account?: Account | Address | undefined\n}\n\nexport type SimulateBlocksParameters<\n  calls extends readonly unknown[] = readonly unknown[],\n> = {\n  /** Blocks to simulate. */\n  blocks: readonly {\n    /** Block overrides. */\n    blockOverrides?: BlockOverrides.BlockOverrides | undefined\n    /** Calls to execute. */\n    calls: Calls<Narrow<calls>, CallExtraProperties>\n    /** State overrides. */\n    stateOverrides?: StateOverride | undefined\n  }[]\n  /** Whether to return the full transactions. */\n  returnFullTransactions?: boolean | undefined\n  /** Whether to trace transfers. */\n  traceTransfers?: boolean | undefined\n  /** Whether to enable validation mode. */\n  validation?: boolean | undefined\n} & (\n  | {\n      /** The balance of the account at a block number. */\n      blockNumber?: bigint | undefined\n      blockTag?: undefined\n    }\n  | {\n      blockNumber?: undefined\n      /**\n       * The balance of the account at a block tag.\n       * @default 'latest'\n       */\n      blockTag?: BlockTag | undefined\n    }\n)\n\nexport type SimulateBlocksReturnType<\n  calls extends readonly unknown[] = readonly unknown[],\n> = readonly (Block & {\n  calls: MulticallResults<\n    Narrow<calls>,\n    true,\n    {\n      extraProperties: {\n        data: Hex\n        gasUsed: bigint\n        logs?: Log[] | undefined\n      }\n      error: Error\n      mutability: AbiStateMutability\n    }\n  >\n})[]\n\nexport type SimulateBlocksErrorType =\n  | AssertRequestErrorType\n  | DecodeFunctionResultErrorType\n  | EncodeFunctionDataErrorType\n  | FormatBlockErrorType\n  | FormatTransactionRequestErrorType\n  | GetNodeErrorReturnType\n  | ParseAccountErrorType\n  | SerializeStateOverrideErrorType\n  | NumberToHexErrorType\n  | ErrorType\n\n/**\n * Simulates a set of calls on block(s) with optional block and state overrides.\n *\n * @example\n * ```ts\n * import { createClient, http, parseEther } from 'viem'\n * import { simulate } from 'viem/actions'\n * import { mainnet } from 'viem/chains'\n *\n * const client = createClient({\n *   chain: mainnet,\n *   transport: http(),\n * })\n *\n * const result = await simulate(client, {\n *   blocks: [{\n *     blockOverrides: {\n *       number: 69420n,\n *     },\n *     calls: [{\n *       {\n *         account: '0x5a0b54d5dc17e482fe8b0bdca5320161b95fb929',\n *         data: '0xdeadbeef',\n *         to: '0x70997970c51812dc3a010c7d01b50e0d17dc79c8',\n *       },\n *       {\n *         account: '0x5a0b54d5dc17e482fe8b0bdca5320161b95fb929',\n *         to: '0x70997970c51812dc3a010c7d01b50e0d17dc79c8',\n *         value: parseEther('1'),\n *       },\n *     }],\n *     stateOverrides: [{\n *       address: '0x5a0b54d5dc17e482fe8b0bdca5320161b95fb929',\n *       balance: parseEther('10'),\n *     }],\n *   }]\n * })\n * ```\n *\n * @param client - Client to use.\n * @param parameters - {@link SimulateBlocksParameters}\n * @returns Simulated blocks. {@link SimulateBlocksReturnType}\n */\nexport async function simulateBlocks<\n  chain extends Chain | undefined,\n  const calls extends readonly unknown[],\n>(\n  client: Client<Transport, chain>,\n  parameters: SimulateBlocksParameters<calls>,\n): Promise<SimulateBlocksReturnType<calls>> {\n  const {\n    blockNumber,\n    blockTag = 'latest',\n    blocks,\n    returnFullTransactions,\n    traceTransfers,\n    validation,\n  } = parameters\n\n  try {\n    const blockStateCalls = []\n    for (const block of blocks) {\n      const blockOverrides = block.blockOverrides\n        ? BlockOverrides.toRpc(block.blockOverrides)\n        : undefined\n      const calls = block.calls.map((call_) => {\n        const call = call_ as Call<unknown, CallExtraProperties>\n        const account = call.account ? parseAccount(call.account) : undefined\n        const request = {\n          ...call,\n          data: call.abi ? encodeFunctionData(call) : call.data,\n          from: call.from ?? account?.address,\n        } as const\n        assertRequest(request)\n        return formatTransactionRequest(request)\n      })\n      const stateOverrides = block.stateOverrides\n        ? serializeStateOverride(block.stateOverrides)\n        : undefined\n\n      blockStateCalls.push({\n        blockOverrides,\n        calls,\n        stateOverrides,\n      })\n    }\n\n    const blockNumberHex =\n      typeof blockNumber === 'bigint' ? numberToHex(blockNumber) : undefined\n    const block = blockNumberHex || blockTag\n\n    const result = await client.request({\n      method: 'eth_simulateV1',\n      params: [\n        { blockStateCalls, returnFullTransactions, traceTransfers, validation },\n        block,\n      ],\n    })\n\n    return result.map((block, i) => ({\n      ...formatBlock(block),\n      calls: block.calls.map((call, j) => {\n        const { abi, args, functionName, to } = blocks[i].calls[j] as Call<\n          unknown,\n          CallExtraProperties\n        >\n\n        const data = call.error?.data ?? call.returnData\n        const gasUsed = BigInt(call.gasUsed)\n        const logs = call.logs?.map((log) => formatLog(log))\n        const status = call.status === '0x1' ? 'success' : 'failure'\n\n        const result =\n          abi && status === 'success' && data !== '0x'\n            ? decodeFunctionResult({\n                abi,\n                data,\n                functionName,\n              })\n            : null\n\n        const error = (() => {\n          if (status === 'success') return undefined\n\n          let error = undefined\n          if (call.error?.data === '0x') error = new AbiDecodingZeroDataError()\n          else if (call.error) error = new RawContractError(call.error)\n\n          if (!error) return undefined\n          return getContractError(error, {\n            abi: (abi ?? []) as Abi,\n            address: to,\n            args,\n            functionName: functionName ?? '<unknown>',\n          })\n        })()\n\n        return {\n          data,\n          gasUsed,\n          logs,\n          status,\n          ...(status === 'success'\n            ? {\n                result,\n              }\n            : {\n                error,\n              }),\n        }\n      }),\n    })) as unknown as SimulateBlocksReturnType<calls>\n  } catch (e) {\n    const cause = e as BaseError\n    const error = getNodeError(cause, {})\n    if (error instanceof UnknownNodeError) throw cause\n    throw error\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}