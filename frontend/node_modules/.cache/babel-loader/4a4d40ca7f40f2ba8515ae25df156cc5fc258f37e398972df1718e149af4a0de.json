{"ast":null,"code":"import { createStore } from \"mipd\";\nimport { isBrowser } from \"../../utils/platform.js\";\nimport { METAMASK } from \"../constants.js\";\nimport { createWallet } from \"../create-wallet.js\";\n// if we're in the browser -> create the store once immediately\nconst mipdStore = /* @__PURE__ */(() => isBrowser() ? createStore() : undefined)();\n/**\n * Get Injected Provider for given wallet by passing a wallet ID (rdns) using [EIP-6963](https://eips.ethereum.org/EIPS/eip-6963) Provider Discovery.\n * @param walletId - The Wallet Id (rdns) to check.\n * @example\n * ```ts\n * import { injectedProvider } from \"thirdweb/wallets\";\n *\n * const metamaskProvider = injectedProvider(\"io.metamask\");\n *\n * if (metamaskProvider) {\n *  console.log(\"Metamask is installed\");\n * }\n * ```\n * @returns The details of the Injected Provider if it exists. `undefined` otherwise.\n * @walletUtils\n */\nexport function injectedProvider(walletId) {\n  const injectedProviderDetail = getInstalledWalletProviders().find(p => p.info.rdns === walletId);\n  return injectedProviderDetail === null || injectedProviderDetail === void 0 ? void 0 : injectedProviderDetail.provider;\n}\n/**\n * Get All currently installed wallets.\n * Uses EIP-6963 to discover installed browser extension wallets.\n * @returns a list of installed wallets\n */\nexport function getInstalledWallets() {\n  const providers = getInstalledWalletProviders();\n  const walletIds = providers.map(provider => provider.info.rdns);\n  return walletIds.map(w => createWallet(w));\n}\n/**\n * Get Injected Provider Details for given wallet ID (rdns)\n * @internal\n */\nfunction getMIPDStore() {\n  if (!mipdStore) {\n    return undefined;\n  }\n  return mipdStore;\n}\nexport function getInstalledWalletProviders() {\n  var _getMIPDStore;\n  const providers = ((_getMIPDStore = getMIPDStore()) === null || _getMIPDStore === void 0 ? void 0 : _getMIPDStore.getProviders()) || [];\n  for (const provider of providers) {\n    // Map io.metamask.mobile to io.metamask rdns to fix double entry issue in MetaMask mobile browser\n    if (provider.info.rdns === \"io.metamask.mobile\") {\n      provider.info.rdns = METAMASK;\n      break;\n    }\n  }\n  return providers;\n}","map":{"version":3,"names":["createStore","isBrowser","METAMASK","createWallet","mipdStore","undefined","injectedProvider","walletId","injectedProviderDetail","getInstalledWalletProviders","find","p","info","rdns","provider","getInstalledWallets","providers","walletIds","map","w","getMIPDStore","_getMIPDStore","getProviders"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/wallets/injected/mipdStore.ts"],"sourcesContent":["import { createStore, type EIP6963ProviderDetail, type Store } from \"mipd\";\nimport { isBrowser } from \"../../utils/platform.js\";\nimport type { InjectedSupportedWalletIds } from \"../__generated__/wallet-ids.js\";\nimport { METAMASK } from \"../constants.js\";\nimport { createWallet } from \"../create-wallet.js\";\nimport type { Ethereum } from \"../interfaces/ethereum.js\";\nimport type { Wallet } from \"../interfaces/wallet.js\";\nimport type { WalletId } from \"../wallet-types.js\";\n\ndeclare module \"mipd\" {\n  export interface Register {\n    rdns: WalletId;\n  }\n}\n\n// if we're in the browser -> create the store once immediately\nconst mipdStore: Store | undefined = /* @__PURE__ */ (() =>\n  isBrowser() ? createStore() : undefined)();\n\n/**\n * Get Injected Provider for given wallet by passing a wallet ID (rdns) using [EIP-6963](https://eips.ethereum.org/EIPS/eip-6963) Provider Discovery.\n * @param walletId - The Wallet Id (rdns) to check.\n * @example\n * ```ts\n * import { injectedProvider } from \"thirdweb/wallets\";\n *\n * const metamaskProvider = injectedProvider(\"io.metamask\");\n *\n * if (metamaskProvider) {\n *  console.log(\"Metamask is installed\");\n * }\n * ```\n * @returns The details of the Injected Provider if it exists. `undefined` otherwise.\n * @walletUtils\n */\nexport function injectedProvider(walletId: WalletId): Ethereum | undefined {\n  const injectedProviderDetail = getInstalledWalletProviders().find(\n    (p) => p.info.rdns === walletId,\n  );\n\n  return injectedProviderDetail?.provider as Ethereum | undefined;\n}\n\n/**\n * Get All currently installed wallets.\n * Uses EIP-6963 to discover installed browser extension wallets.\n * @returns a list of installed wallets\n */\nexport function getInstalledWallets(): Wallet[] {\n  const providers = getInstalledWalletProviders();\n  const walletIds = providers.map((provider) => provider.info.rdns);\n  return walletIds.map((w) => createWallet(w as InjectedSupportedWalletIds));\n}\n\n/**\n * Get Injected Provider Details for given wallet ID (rdns)\n * @internal\n */\nfunction getMIPDStore() {\n  if (!mipdStore) {\n    return undefined;\n  }\n  return mipdStore;\n}\n\nexport function getInstalledWalletProviders(): readonly EIP6963ProviderDetail[] {\n  const providers = getMIPDStore()?.getProviders() || [];\n\n  for (const provider of providers) {\n    // Map io.metamask.mobile to io.metamask rdns to fix double entry issue in MetaMask mobile browser\n    if ((provider.info.rdns as string) === \"io.metamask.mobile\") {\n      provider.info.rdns = METAMASK;\n      break;\n    }\n  }\n\n  return providers;\n}\n"],"mappings":"AAAA,SAASA,WAAW,QAAgD,MAAM;AAC1E,SAASC,SAAS,QAAQ,yBAAyB;AAEnD,SAASC,QAAQ,QAAQ,iBAAiB;AAC1C,SAASC,YAAY,QAAQ,qBAAqB;AAWlD;AACA,MAAMC,SAAS,GAAsB,eAAgB,CAAC,MACpDH,SAAS,EAAE,GAAGD,WAAW,EAAE,GAAGK,SAAS,EAAC,CAAE;AAE5C;;;;;;;;;;;;;;;;AAgBA,OAAM,SAAUC,gBAAgBA,CAACC,QAAkB;EACjD,MAAMC,sBAAsB,GAAGC,2BAA2B,EAAE,CAACC,IAAI,CAC9DC,CAAC,IAAKA,CAAC,CAACC,IAAI,CAACC,IAAI,KAAKN,QAAQ,CAChC;EAED,OAAOC,sBAAsB,aAAtBA,sBAAsB,uBAAtBA,sBAAsB,CAAEM,QAAgC;AACjE;AAEA;;;;;AAKA,OAAM,SAAUC,mBAAmBA,CAAA;EACjC,MAAMC,SAAS,GAAGP,2BAA2B,EAAE;EAC/C,MAAMQ,SAAS,GAAGD,SAAS,CAACE,GAAG,CAAEJ,QAAQ,IAAKA,QAAQ,CAACF,IAAI,CAACC,IAAI,CAAC;EACjE,OAAOI,SAAS,CAACC,GAAG,CAAEC,CAAC,IAAKhB,YAAY,CAACgB,CAA+B,CAAC,CAAC;AAC5E;AAEA;;;;AAIA,SAASC,YAAYA,CAAA;EACnB,IAAI,CAAChB,SAAS,EAAE;IACd,OAAOC,SAAS;EAClB;EACA,OAAOD,SAAS;AAClB;AAEA,OAAM,SAAUK,2BAA2BA,CAAA;EAAA,IAAAY,aAAA;EACzC,MAAML,SAAS,GAAG,EAAAK,aAAA,GAAAD,YAAY,EAAE,cAAAC,aAAA,uBAAdA,aAAA,CAAgBC,YAAY,EAAE,KAAI,EAAE;EAEtD,KAAK,MAAMR,QAAQ,IAAIE,SAAS,EAAE;IAChC;IACA,IAAKF,QAAQ,CAACF,IAAI,CAACC,IAAe,KAAK,oBAAoB,EAAE;MAC3DC,QAAQ,CAACF,IAAI,CAACC,IAAI,GAAGX,QAAQ;MAC7B;IACF;EACF;EAEA,OAAOc,SAAS;AAClB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}