{"ast":null,"code":"import { isERC721 } from \"../erc721/read/isERC721.js\";\nimport { isERC1155 } from \"../erc1155/read/isERC1155.js\";\n/**\n * Retrieves the NFT asset based on the provided options.\n * @param options The transaction options.\n * @returns A promise that resolves to the NFT asset.\n * @extension MARKETPLACE\n * @example\n * ```ts\n * import { getNFTAsset } from \"thirdweb/extensions/marketplace\";\n *\n * const nft = await getNFTAsset({ contract, tokenId: 1n });\n * ```\n */\nexport async function getNFTAsset(options) {\n  const [erc721, erc1155] = await Promise.all([isERC721(options), isERC1155(options)]);\n  switch (true) {\n    case erc721:\n      {\n        const {\n          getNFT\n        } = await import(\"../erc721/read/getNFT.js\");\n        return getNFT(options);\n      }\n    case erc1155:\n      {\n        const {\n          getNFT\n        } = await import(\"../erc1155/read/getNFT.js\");\n        return getNFT(options);\n      }\n    default:\n      {\n        throw new Error(\"Contract is neither ERC721 nor ERC1155.\");\n      }\n  }\n}\nexport function computeStatus(options) {\n  switch (options.listingStatus) {\n    case 1:\n      {\n        if (options.startTimestamp > options.blockTimeStamp) {\n          return \"CREATED\";\n        }\n        if (options.endTimestamp < options.blockTimeStamp) {\n          return \"EXPIRED\";\n        }\n        return \"ACTIVE\";\n      }\n    case 2:\n      {\n        return \"COMPLETED\";\n      }\n    case 3:\n      {\n        return \"CANCELLED\";\n      }\n    default:\n      {\n        throw new Error(\"Invalid listing status: \\\"\".concat(options.listingStatus, \"\\\"\"));\n      }\n  }\n}\n/**\n * @internal\n */\nexport async function getAllInBatches(fn, options) {\n  let start = options.start;\n  const batches = [];\n  while (options.end - start > options.maxSize) {\n    batches.push(fn(start, start + options.maxSize - 1n));\n    start += options.maxSize;\n  }\n  batches.push(fn(start, options.end - 1n));\n  return await Promise.all(batches);\n}","map":{"version":3,"names":["isERC721","isERC1155","getNFTAsset","options","erc721","erc1155","Promise","all","getNFT","Error","computeStatus","listingStatus","startTimestamp","blockTimeStamp","endTimestamp","concat","getAllInBatches","fn","start","batches","end","maxSize","push"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/extensions/marketplace/utils.ts"],"sourcesContent":["import type { BaseTransactionOptions } from \"../../transaction/types.js\";\nimport type { NFT } from \"../../utils/nft/parseNft.js\";\nimport { isERC721 } from \"../erc721/read/isERC721.js\";\nimport { isERC1155 } from \"../erc1155/read/isERC1155.js\";\nimport type { ListingStatus } from \"./types.js\";\n\n/**\n * @extension MARKETPLACE\n */\ntype GetAssetParams = {\n  tokenId: bigint;\n};\n\n/**\n * Retrieves the NFT asset based on the provided options.\n * @param options The transaction options.\n * @returns A promise that resolves to the NFT asset.\n * @extension MARKETPLACE\n * @example\n * ```ts\n * import { getNFTAsset } from \"thirdweb/extensions/marketplace\";\n *\n * const nft = await getNFTAsset({ contract, tokenId: 1n });\n * ```\n */\nexport async function getNFTAsset(\n  options: BaseTransactionOptions<GetAssetParams>,\n): Promise<NFT> {\n  const [erc721, erc1155] = await Promise.all([\n    isERC721(options),\n    isERC1155(options),\n  ]);\n  switch (true) {\n    case erc721: {\n      const { getNFT } = await import(\"../erc721/read/getNFT.js\");\n      return getNFT(options);\n    }\n    case erc1155: {\n      const { getNFT } = await import(\"../erc1155/read/getNFT.js\");\n      return getNFT(options);\n    }\n    default: {\n      throw new Error(\"Contract is neither ERC721 nor ERC1155.\");\n    }\n  }\n}\n\nexport function computeStatus(options: {\n  listingStatus: number;\n  blockTimeStamp: bigint;\n  startTimestamp: bigint;\n  endTimestamp: bigint;\n}): ListingStatus {\n  switch (options.listingStatus) {\n    case 1: {\n      if (options.startTimestamp > options.blockTimeStamp) {\n        return \"CREATED\";\n      }\n      if (options.endTimestamp < options.blockTimeStamp) {\n        return \"EXPIRED\";\n      }\n      return \"ACTIVE\";\n    }\n    case 2: {\n      return \"COMPLETED\";\n    }\n    case 3: {\n      return \"CANCELLED\";\n    }\n    default: {\n      throw new Error(`Invalid listing status: \"${options.listingStatus}\"`);\n    }\n  }\n}\n\n/**\n * @internal\n */\nexport async function getAllInBatches<const T>(\n  fn: (start: bigint, end: bigint) => Promise<T>,\n  options: {\n    start: bigint;\n    end: bigint;\n    maxSize: bigint;\n  },\n): Promise<T[]> {\n  let start = options.start;\n  const batches: Promise<T>[] = [];\n  while (options.end - start > options.maxSize) {\n    batches.push(fn(start, start + options.maxSize - 1n));\n    start += options.maxSize;\n  }\n  batches.push(fn(start, options.end - 1n));\n\n  return await Promise.all(batches);\n}\n"],"mappings":"AAEA,SAASA,QAAQ,QAAQ,4BAA4B;AACrD,SAASC,SAAS,QAAQ,8BAA8B;AAUxD;;;;;;;;;;;;AAYA,OAAO,eAAeC,WAAWA,CAC/BC,OAA+C;EAE/C,MAAM,CAACC,MAAM,EAAEC,OAAO,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CAC1CP,QAAQ,CAACG,OAAO,CAAC,EACjBF,SAAS,CAACE,OAAO,CAAC,CACnB,CAAC;EACF,QAAQ,IAAI;IACV,KAAKC,MAAM;MAAE;QACX,MAAM;UAAEI;QAAM,CAAE,GAAG,MAAM,MAAM,CAAC,0BAA0B,CAAC;QAC3D,OAAOA,MAAM,CAACL,OAAO,CAAC;MACxB;IACA,KAAKE,OAAO;MAAE;QACZ,MAAM;UAAEG;QAAM,CAAE,GAAG,MAAM,MAAM,CAAC,2BAA2B,CAAC;QAC5D,OAAOA,MAAM,CAACL,OAAO,CAAC;MACxB;IACA;MAAS;QACP,MAAM,IAAIM,KAAK,CAAC,yCAAyC,CAAC;MAC5D;EACF;AACF;AAEA,OAAM,SAAUC,aAAaA,CAACP,OAK7B;EACC,QAAQA,OAAO,CAACQ,aAAa;IAC3B,KAAK,CAAC;MAAE;QACN,IAAIR,OAAO,CAACS,cAAc,GAAGT,OAAO,CAACU,cAAc,EAAE;UACnD,OAAO,SAAS;QAClB;QACA,IAAIV,OAAO,CAACW,YAAY,GAAGX,OAAO,CAACU,cAAc,EAAE;UACjD,OAAO,SAAS;QAClB;QACA,OAAO,QAAQ;MACjB;IACA,KAAK,CAAC;MAAE;QACN,OAAO,WAAW;MACpB;IACA,KAAK,CAAC;MAAE;QACN,OAAO,WAAW;MACpB;IACA;MAAS;QACP,MAAM,IAAIJ,KAAK,8BAAAM,MAAA,CAA6BZ,OAAO,CAACQ,aAAa,OAAG,CAAC;MACvE;EACF;AACF;AAEA;;;AAGA,OAAO,eAAeK,eAAeA,CACnCC,EAA8C,EAC9Cd,OAIC;EAED,IAAIe,KAAK,GAAGf,OAAO,CAACe,KAAK;EACzB,MAAMC,OAAO,GAAiB,EAAE;EAChC,OAAOhB,OAAO,CAACiB,GAAG,GAAGF,KAAK,GAAGf,OAAO,CAACkB,OAAO,EAAE;IAC5CF,OAAO,CAACG,IAAI,CAACL,EAAE,CAACC,KAAK,EAAEA,KAAK,GAAGf,OAAO,CAACkB,OAAO,GAAG,EAAE,CAAC,CAAC;IACrDH,KAAK,IAAIf,OAAO,CAACkB,OAAO;EAC1B;EACAF,OAAO,CAACG,IAAI,CAACL,EAAE,CAACC,KAAK,EAAEf,OAAO,CAACiB,GAAG,GAAG,EAAE,CAAC,CAAC;EAEzC,OAAO,MAAMd,OAAO,CAACC,GAAG,CAACY,OAAO,CAAC;AACnC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}