{"ast":null,"code":"\"use client\";\n\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useMemo } from \"react\";\nimport { checksumAddress } from \"../../../../../utils/address.js\";\nimport { formatNumber } from \"../../../../../utils/formatNumber.js\";\nimport { toTokens } from \"../../../../../utils/units.js\";\nimport { iconSize, radius, spacing } from \"../../../../core/design-system/index.js\";\nimport { useBuyWithFiatQuotesForProviders } from \"../../../../core/hooks/pay/useBuyWithFiatQuotesForProviders.js\";\nimport { formatCurrencyAmount } from \"../../ConnectWallet/screens/formatTokenBalance.js\";\nimport { Container } from \"../../components/basic.js\";\nimport { Button } from \"../../components/buttons.js\";\nimport { Img } from \"../../components/Img.js\";\nimport { Spacer } from \"../../components/Spacer.js\";\nimport { Spinner } from \"../../components/Spinner.js\";\nimport { Text } from \"../../components/text.js\";\nconst PROVIDERS = [{\n  description: \"Fast and secure payments\",\n  iconUri: \"https://i.ibb.co/LDJ3Rk2t/Frame-5.png\",\n  id: \"coinbase\",\n  name: \"Coinbase\"\n}, {\n  description: \"Trusted payment processing\",\n  iconUri: \"https://i.ibb.co/CpgQC2Lf/images-3.png\",\n  id: \"stripe\",\n  name: \"Stripe\"\n}, {\n  description: \"Global payment solution\",\n  iconUri: \"https://i.ibb.co/Xx2r882p/Transak-official-symbol-1.png\",\n  id: \"transak\",\n  name: \"Transak\"\n}];\nexport function FiatProviderSelection(_ref) {\n  let {\n    onProviderSelected,\n    client,\n    toChainId,\n    toTokenAddress,\n    toAddress,\n    toAmount,\n    currency,\n    country\n  } = _ref;\n  // Fetch quotes for all providers\n  const quoteQueries = useBuyWithFiatQuotesForProviders({\n    amount: toAmount || \"0\",\n    chainId: toChainId,\n    client,\n    currency: currency || \"USD\",\n    receiver: checksumAddress(toAddress),\n    tokenAddress: checksumAddress(toTokenAddress),\n    country\n  });\n  const quotes = useMemo(() => {\n    return quoteQueries.map(q => q.data).filter(q => !!q);\n  }, [quoteQueries]);\n  const isPending = quoteQueries.some(q => q.isLoading);\n  if (quoteQueries.every(q => q.isError)) {\n    return _jsx(Container, {\n      center: \"both\",\n      flex: \"column\",\n      style: {\n        minHeight: \"200px\",\n        flexGrow: 1\n      },\n      children: _jsx(Text, {\n        color: \"secondaryText\",\n        size: \"sm\",\n        children: \"No quotes available\"\n      })\n    });\n  }\n  // TODO: add a \"remember my choice\" checkbox\n  return _jsx(Container, {\n    flex: \"column\",\n    gap: \"xs\",\n    style: {\n      flexGrow: 1\n    },\n    children: !isPending ? quotes.sort((a, b) => a.currencyAmount - b.currencyAmount).map(quote => {\n      const provider = PROVIDERS.find(p => p.id === quote.intent.onramp);\n      if (!provider) {\n        return null;\n      }\n      return _jsx(Button, {\n        fullWidth: true,\n        onClick: () => onProviderSelected(provider.id),\n        style: {\n          borderRadius: radius.lg,\n          textAlign: \"left\",\n          padding: \"\".concat(spacing.md)\n        },\n        variant: \"secondary\",\n        children: _jsxs(Container, {\n          flex: \"row\",\n          gap: \"sm\",\n          style: {\n            alignItems: \"center\",\n            width: \"100%\"\n          },\n          children: [_jsx(Img, {\n            alt: provider.name,\n            client: client,\n            height: iconSize.lg,\n            src: provider.iconUri,\n            width: iconSize.lg,\n            style: {\n              borderRadius: radius.full\n            }\n          }), _jsx(Container, {\n            flex: \"column\",\n            gap: \"3xs\",\n            style: {\n              flex: 1\n            },\n            children: _jsx(Text, {\n              color: \"primaryText\",\n              size: \"md\",\n              weight: 500,\n              children: provider.name\n            })\n          }), _jsxs(Container, {\n            flex: \"column\",\n            gap: \"3xs\",\n            style: {\n              alignItems: \"flex-end\"\n            },\n            children: [_jsx(Text, {\n              color: \"primaryText\",\n              size: \"sm\",\n              style: {\n                fontWeight: 500\n              },\n              children: formatCurrencyAmount(currency || \"USD\", quote.currencyAmount)\n            }), _jsxs(Text, {\n              color: \"secondaryText\",\n              size: \"xs\",\n              children: [formatNumber(Number(toTokens(quote.destinationAmount, quote.destinationToken.decimals)), 4), \" \", quote.destinationToken.symbol]\n            })]\n          })]\n        })\n      }, provider.id);\n    }) : _jsxs(Container, {\n      center: \"both\",\n      flex: \"column\",\n      style: {\n        flexGrow: 1,\n        paddingBottom: spacing.lg\n      },\n      px: \"md\",\n      children: [_jsx(Spinner, {\n        color: \"secondaryText\",\n        size: \"xl\"\n      }), _jsx(Spacer, {\n        y: \"lg\"\n      }), _jsx(Text, {\n        center: true,\n        color: \"primaryText\",\n        size: \"lg\",\n        weight: 600,\n        trackingTight: true,\n        children: \"Searching Providers\"\n      }), _jsx(Spacer, {\n        y: \"xs\"\n      }), _jsx(Text, {\n        center: true,\n        color: \"secondaryText\",\n        size: \"sm\",\n        multiline: true,\n        style: {\n          textWrap: \"pretty\"\n        },\n        children: \"Searching for the best providers for this payment\"\n      })]\n    })\n  });\n}","map":{"version":3,"names":["useMemo","checksumAddress","formatNumber","toTokens","iconSize","radius","spacing","useBuyWithFiatQuotesForProviders","formatCurrencyAmount","Container","Button","Img","Spacer","Spinner","Text","PROVIDERS","description","iconUri","id","name","FiatProviderSelection","_ref","onProviderSelected","client","toChainId","toTokenAddress","toAddress","toAmount","currency","country","quoteQueries","amount","chainId","receiver","tokenAddress","quotes","map","q","data","filter","isPending","some","isLoading","every","isError","_jsx","center","flex","style","minHeight","flexGrow","children","color","size","gap","sort","a","b","currencyAmount","quote","provider","find","p","intent","onramp","fullWidth","onClick","borderRadius","lg","textAlign","padding","concat","md","variant","_jsxs","alignItems","width","alt","height","src","full","weight","fontWeight","Number","destinationAmount","destinationToken","decimals","symbol","paddingBottom","px","y","trackingTight","multiline","textWrap"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/web/ui/Bridge/payment-selection/FiatProviderSelection.tsx"],"sourcesContent":["\"use client\";\nimport { useMemo } from \"react\";\nimport type { ThirdwebClient } from \"../../../../../client/client.js\";\nimport type { SupportedFiatCurrency } from \"../../../../../pay/convert/type.js\";\nimport { checksumAddress } from \"../../../../../utils/address.js\";\nimport { formatNumber } from \"../../../../../utils/formatNumber.js\";\nimport { toTokens } from \"../../../../../utils/units.js\";\nimport {\n  iconSize,\n  radius,\n  spacing,\n} from \"../../../../core/design-system/index.js\";\nimport { useBuyWithFiatQuotesForProviders } from \"../../../../core/hooks/pay/useBuyWithFiatQuotesForProviders.js\";\nimport { formatCurrencyAmount } from \"../../ConnectWallet/screens/formatTokenBalance.js\";\nimport { Container } from \"../../components/basic.js\";\nimport { Button } from \"../../components/buttons.js\";\nimport { Img } from \"../../components/Img.js\";\nimport { Spacer } from \"../../components/Spacer.js\";\nimport { Spinner } from \"../../components/Spinner.js\";\nimport { Text } from \"../../components/text.js\";\n\ninterface FiatProviderSelectionProps {\n  client: ThirdwebClient;\n  onProviderSelected: (provider: \"coinbase\" | \"stripe\" | \"transak\") => void;\n  toChainId: number;\n  toTokenAddress: string;\n  toAddress: string;\n  toAmount?: string;\n  currency?: SupportedFiatCurrency;\n  country: string | undefined;\n}\n\nconst PROVIDERS = [\n  {\n    description: \"Fast and secure payments\",\n    iconUri: \"https://i.ibb.co/LDJ3Rk2t/Frame-5.png\",\n    id: \"coinbase\" as const,\n    name: \"Coinbase\",\n  },\n  {\n    description: \"Trusted payment processing\",\n    iconUri: \"https://i.ibb.co/CpgQC2Lf/images-3.png\",\n    id: \"stripe\" as const,\n    name: \"Stripe\",\n  },\n  {\n    description: \"Global payment solution\",\n    iconUri: \"https://i.ibb.co/Xx2r882p/Transak-official-symbol-1.png\",\n    id: \"transak\" as const,\n    name: \"Transak\",\n  },\n];\n\nexport function FiatProviderSelection({\n  onProviderSelected,\n  client,\n  toChainId,\n  toTokenAddress,\n  toAddress,\n  toAmount,\n  currency,\n  country,\n}: FiatProviderSelectionProps) {\n  // Fetch quotes for all providers\n  const quoteQueries = useBuyWithFiatQuotesForProviders({\n    amount: toAmount || \"0\",\n    chainId: toChainId,\n    client,\n    currency: currency || \"USD\",\n    receiver: checksumAddress(toAddress),\n    tokenAddress: checksumAddress(toTokenAddress),\n    country,\n  });\n\n  const quotes = useMemo(() => {\n    return quoteQueries.map((q) => q.data).filter((q) => !!q);\n  }, [quoteQueries]);\n\n  const isPending = quoteQueries.some((q) => q.isLoading);\n\n  if (quoteQueries.every((q) => q.isError)) {\n    return (\n      <Container\n        center=\"both\"\n        flex=\"column\"\n        style={{ minHeight: \"200px\", flexGrow: 1 }}\n      >\n        <Text color=\"secondaryText\" size=\"sm\">\n          No quotes available\n        </Text>\n      </Container>\n    );\n  }\n\n  // TODO: add a \"remember my choice\" checkbox\n\n  return (\n    <Container\n      flex=\"column\"\n      gap=\"xs\"\n      style={{\n        flexGrow: 1,\n      }}\n    >\n      {!isPending ? (\n        quotes\n          .sort((a, b) => a.currencyAmount - b.currencyAmount)\n          .map((quote) => {\n            const provider = PROVIDERS.find(\n              (p) => p.id === quote.intent.onramp,\n            );\n            if (!provider) {\n              return null;\n            }\n\n            return (\n              <Button\n                key={provider.id}\n                fullWidth\n                onClick={() => onProviderSelected(provider.id)}\n                style={{\n                  borderRadius: radius.lg,\n                  textAlign: \"left\",\n                  padding: `${spacing.md}`,\n                }}\n                variant=\"secondary\"\n              >\n                <Container\n                  flex=\"row\"\n                  gap=\"sm\"\n                  style={{ alignItems: \"center\", width: \"100%\" }}\n                >\n                  <Img\n                    alt={provider.name}\n                    client={client}\n                    height={iconSize.lg}\n                    src={provider.iconUri}\n                    width={iconSize.lg}\n                    style={{\n                      borderRadius: radius.full,\n                    }}\n                  />\n                  <Container flex=\"column\" gap=\"3xs\" style={{ flex: 1 }}>\n                    <Text color=\"primaryText\" size=\"md\" weight={500}>\n                      {provider.name}\n                    </Text>\n                  </Container>\n                  <Container\n                    flex=\"column\"\n                    gap=\"3xs\"\n                    style={{ alignItems: \"flex-end\" }}\n                  >\n                    <Text\n                      color=\"primaryText\"\n                      size=\"sm\"\n                      style={{ fontWeight: 500 }}\n                    >\n                      {formatCurrencyAmount(\n                        currency || \"USD\",\n                        quote.currencyAmount,\n                      )}\n                    </Text>\n                    <Text color=\"secondaryText\" size=\"xs\">\n                      {formatNumber(\n                        Number(\n                          toTokens(\n                            quote.destinationAmount,\n                            quote.destinationToken.decimals,\n                          ),\n                        ),\n                        4,\n                      )}{\" \"}\n                      {quote.destinationToken.symbol}\n                    </Text>\n                  </Container>\n                </Container>\n              </Button>\n            );\n          })\n      ) : (\n        <Container\n          center=\"both\"\n          flex=\"column\"\n          style={{ flexGrow: 1, paddingBottom: spacing.lg }}\n          px=\"md\"\n        >\n          <Spinner color=\"secondaryText\" size=\"xl\" />\n          <Spacer y=\"lg\" />\n          <Text center color=\"primaryText\" size=\"lg\" weight={600} trackingTight>\n            Searching Providers\n          </Text>\n          <Spacer y=\"xs\" />\n          <Text\n            center\n            color=\"secondaryText\"\n            size=\"sm\"\n            multiline\n            style={{\n              textWrap: \"pretty\",\n            }}\n          >\n            Searching for the best providers for this payment\n          </Text>\n        </Container>\n      )}\n    </Container>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}