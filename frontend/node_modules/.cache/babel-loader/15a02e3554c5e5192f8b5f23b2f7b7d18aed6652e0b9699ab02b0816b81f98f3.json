{"ast":null,"code":"import _objectSpread from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { getThirdwebBaseUrl } from \"../../../../utils/domains.js\";\nimport { getClientFetch } from \"../../../../utils/fetch.js\";\nimport { stringify } from \"../../../../utils/json.js\";\nexport async function signTypedData(_ref) {\n  let {\n    client,\n    payload,\n    storage\n  } = _ref;\n  const authToken = await storage.getAuthCookie();\n  const ecosystem = storage.ecosystem;\n  const clientFetch = getClientFetch(client, ecosystem);\n  if (!authToken) {\n    throw new Error(\"No auth token found when signing typed data\");\n  }\n  const response = await clientFetch(\"\".concat(getThirdwebBaseUrl(\"inAppWallet\"), \"/api/v1/enclave-wallet/sign-typed-data\"), {\n    body: stringify(_objectSpread({}, payload)),\n    headers: {\n      Authorization: \"Bearer embedded-wallet-token:\".concat(authToken),\n      \"Content-Type\": \"application/json\",\n      \"x-thirdweb-client-id\": client.clientId\n    },\n    method: \"POST\"\n  });\n  if (!response.ok) {\n    throw new Error(\"Failed to sign typed data - \".concat(response.status, \" \").concat(response.statusText));\n  }\n  const signedTypedData = await response.json();\n  return signedTypedData;\n}","map":{"version":3,"names":["getThirdwebBaseUrl","getClientFetch","stringify","signTypedData","_ref","client","payload","storage","authToken","getAuthCookie","ecosystem","clientFetch","Error","response","concat","body","_objectSpread","headers","Authorization","clientId","method","ok","status","statusText","signedTypedData","json"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/wallets/in-app/core/actions/sign-typed-data.enclave.ts"],"sourcesContent":["import type * as ox__TypedData from \"ox/TypedData\";\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\nimport { getThirdwebBaseUrl } from \"../../../../utils/domains.js\";\nimport { getClientFetch } from \"../../../../utils/fetch.js\";\nimport { stringify } from \"../../../../utils/json.js\";\nimport type { ClientScopedStorage } from \"../authentication/client-scoped-storage.js\";\n\nexport async function signTypedData<\n  const typedData extends ox__TypedData.TypedData | Record<string, unknown>,\n  primaryType extends keyof typedData | \"EIP712Domain\" = keyof typedData,\n>({\n  client,\n  payload,\n  storage,\n}: {\n  client: ThirdwebClient;\n  payload: ox__TypedData.Definition<typedData, primaryType>;\n  storage: ClientScopedStorage;\n}) {\n  const authToken = await storage.getAuthCookie();\n  const ecosystem = storage.ecosystem;\n  const clientFetch = getClientFetch(client, ecosystem);\n\n  if (!authToken) {\n    throw new Error(\"No auth token found when signing typed data\");\n  }\n\n  const response = await clientFetch(\n    `${getThirdwebBaseUrl(\"inAppWallet\")}/api/v1/enclave-wallet/sign-typed-data`,\n    {\n      body: stringify({\n        ...payload,\n      }),\n      headers: {\n        Authorization: `Bearer embedded-wallet-token:${authToken}`,\n        \"Content-Type\": \"application/json\",\n        \"x-thirdweb-client-id\": client.clientId,\n      },\n      method: \"POST\",\n    },\n  );\n\n  if (!response.ok) {\n    throw new Error(\n      `Failed to sign typed data - ${response.status} ${response.statusText}`,\n    );\n  }\n\n  const signedTypedData = (await response.json()) as {\n    r: string;\n    s: string;\n    v: number;\n    signature: string;\n    hash: string;\n  };\n  return signedTypedData;\n}\n"],"mappings":";AAEA,SAASA,kBAAkB,QAAQ,8BAA8B;AACjE,SAASC,cAAc,QAAQ,4BAA4B;AAC3D,SAASC,SAAS,QAAQ,2BAA2B;AAGrD,OAAO,eAAeC,aAAaA,CAAAC,IAAA,EAWlC;EAAA,IARC;IACAC,MAAM;IACNC,OAAO;IACPC;EAAO,CAKR,GAAAH,IAAA;EACC,MAAMI,SAAS,GAAG,MAAMD,OAAO,CAACE,aAAa,EAAE;EAC/C,MAAMC,SAAS,GAAGH,OAAO,CAACG,SAAS;EACnC,MAAMC,WAAW,GAAGV,cAAc,CAACI,MAAM,EAAEK,SAAS,CAAC;EAErD,IAAI,CAACF,SAAS,EAAE;IACd,MAAM,IAAII,KAAK,CAAC,6CAA6C,CAAC;EAChE;EAEA,MAAMC,QAAQ,GAAG,MAAMF,WAAW,IAAAG,MAAA,CAC7Bd,kBAAkB,CAAC,aAAa,CAAC,6CACpC;IACEe,IAAI,EAAEb,SAAS,CAAAc,aAAA,KACVV,OAAO,CACX,CAAC;IACFW,OAAO,EAAE;MACPC,aAAa,kCAAAJ,MAAA,CAAkCN,SAAS,CAAE;MAC1D,cAAc,EAAE,kBAAkB;MAClC,sBAAsB,EAAEH,MAAM,CAACc;KAChC;IACDC,MAAM,EAAE;GACT,CACF;EAED,IAAI,CAACP,QAAQ,CAACQ,EAAE,EAAE;IAChB,MAAM,IAAIT,KAAK,gCAAAE,MAAA,CACkBD,QAAQ,CAACS,MAAM,OAAAR,MAAA,CAAID,QAAQ,CAACU,UAAU,CAAE,CACxE;EACH;EAEA,MAAMC,eAAe,GAAI,MAAMX,QAAQ,CAACY,IAAI,EAM3C;EACD,OAAOD,eAAe;AACxB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}