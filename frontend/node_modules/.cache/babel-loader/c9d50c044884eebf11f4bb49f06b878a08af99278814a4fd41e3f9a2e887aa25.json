{"ast":null,"code":"// TODO - move this to chains subfolder\n/**\n * Remove client id from RPC url for given chain\n * @internal\n */\nexport function getValidPublicRPCUrl(chain) {\n  return getValidChainRPCs(chain).map(rpc => {\n    try {\n      const url = new URL(rpc);\n      // remove client id from url\n      if (url.hostname.endsWith(\".thirdweb.com\")) {\n        url.pathname = \"\";\n        url.search = \"\";\n      }\n      return url.toString();\n    } catch (_unused) {\n      return rpc;\n    }\n  });\n}\n// TODO - move this to chains/\n/**\n * Get valid RPCs for given chain\n * @internal\n */\nfunction getValidChainRPCs(chain, clientId) {\n  let mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"http\";\n  const processedRPCs = [];\n  for (const rpc of chain.rpc) {\n    // exclude RPC if mode mismatch\n    if (mode === \"http\" && !rpc.startsWith(\"http\")) {\n      continue;\n    }\n    if (mode === \"ws\" && !rpc.startsWith(\"ws\")) {\n      continue;\n    }\n    // Replace API_KEY placeholder with value\n    // biome-ignore lint/suspicious/noTemplateCurlyInString: this is valid\n    if (rpc.includes(\"${THIRDWEB_API_KEY}\")) {\n      if (clientId) {\n        processedRPCs.push(\n        // biome-ignore lint/suspicious/noTemplateCurlyInString: this is what the string to replace looks like in this case\n        rpc.replace(\"${THIRDWEB_API_KEY}\", clientId) + (typeof globalThis !== \"undefined\" && \"APP_BUNDLE_ID\" in globalThis ? // @ts-expect-error\n        \"/?bundleId=\".concat(globalThis.APP_BUNDLE_ID) : \"\"));\n      } else {\n        // if no client id, let it through with empty string\n        // if secretKey is present, it will be used in header\n        // if none are passed, will have reduced access\n        // biome-ignore lint/suspicious/noTemplateCurlyInString: this is what the string to replace looks like in this case\n        processedRPCs.push(rpc.replace(\"${THIRDWEB_API_KEY}\", \"\"));\n      }\n    }\n    // exclude RPCs with unknown placeholder\n    else if (rpc.includes(\"${\")) {\n      // do nothing (just don't add it to the list)\n    }\n    // add as is\n    else {\n      processedRPCs.push(rpc);\n    }\n  }\n  if (processedRPCs.length === 0) {\n    throw new Error(\"No RPC available for chainId \\\"\".concat(chain.chainId, \"\\\" with mode \").concat(mode));\n  }\n  return processedRPCs;\n}","map":{"version":3,"names":["getValidPublicRPCUrl","chain","getValidChainRPCs","map","rpc","url","URL","hostname","endsWith","pathname","search","toString","_unused","clientId","mode","arguments","length","undefined","processedRPCs","startsWith","includes","push","replace","globalThis","concat","APP_BUNDLE_ID","Error","chainId"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/wallets/utils/chains.ts"],"sourcesContent":["import type { ChainMetadata } from \"../../chains/types.js\";\n\n// TODO - move this to chains subfolder\n\n/**\n * Remove client id from RPC url for given chain\n * @internal\n */\nexport function getValidPublicRPCUrl(chain: ChainMetadata) {\n  return getValidChainRPCs(chain).map((rpc) => {\n    try {\n      const url = new URL(rpc);\n      // remove client id from url\n      if (url.hostname.endsWith(\".thirdweb.com\")) {\n        url.pathname = \"\";\n        url.search = \"\";\n      }\n      return url.toString();\n    } catch {\n      return rpc;\n    }\n  });\n}\n\n// TODO - move this to chains/\n/**\n * Get valid RPCs for given chain\n * @internal\n */\nfunction getValidChainRPCs(\n  chain: Pick<ChainMetadata, \"rpc\" | \"chainId\">,\n  clientId?: string,\n  mode: \"http\" | \"ws\" = \"http\",\n): string[] {\n  const processedRPCs: string[] = [];\n\n  for (const rpc of chain.rpc) {\n    // exclude RPC if mode mismatch\n    if (mode === \"http\" && !rpc.startsWith(\"http\")) {\n      continue;\n    }\n\n    if (mode === \"ws\" && !rpc.startsWith(\"ws\")) {\n      continue;\n    }\n\n    // Replace API_KEY placeholder with value\n    // biome-ignore lint/suspicious/noTemplateCurlyInString: this is valid\n    if (rpc.includes(\"${THIRDWEB_API_KEY}\")) {\n      if (clientId) {\n        processedRPCs.push(\n          // biome-ignore lint/suspicious/noTemplateCurlyInString: this is what the string to replace looks like in this case\n          rpc.replace(\"${THIRDWEB_API_KEY}\", clientId) +\n            (typeof globalThis !== \"undefined\" && \"APP_BUNDLE_ID\" in globalThis\n              ? // @ts-expect-error\n                `/?bundleId=${globalThis.APP_BUNDLE_ID}`\n              : \"\"),\n        );\n      } else {\n        // if no client id, let it through with empty string\n        // if secretKey is present, it will be used in header\n        // if none are passed, will have reduced access\n        // biome-ignore lint/suspicious/noTemplateCurlyInString: this is what the string to replace looks like in this case\n        processedRPCs.push(rpc.replace(\"${THIRDWEB_API_KEY}\", \"\"));\n      }\n    }\n\n    // exclude RPCs with unknown placeholder\n    else if (rpc.includes(\"${\")) {\n      // do nothing (just don't add it to the list)\n    }\n\n    // add as is\n    else {\n      processedRPCs.push(rpc);\n    }\n  }\n\n  if (processedRPCs.length === 0) {\n    throw new Error(\n      `No RPC available for chainId \"${chain.chainId}\" with mode ${mode}`,\n    );\n  }\n\n  return processedRPCs;\n}\n"],"mappings":"AAEA;AAEA;;;;AAIA,OAAM,SAAUA,oBAAoBA,CAACC,KAAoB;EACvD,OAAOC,iBAAiB,CAACD,KAAK,CAAC,CAACE,GAAG,CAAEC,GAAG,IAAI;IAC1C,IAAI;MACF,MAAMC,GAAG,GAAG,IAAIC,GAAG,CAACF,GAAG,CAAC;MACxB;MACA,IAAIC,GAAG,CAACE,QAAQ,CAACC,QAAQ,CAAC,eAAe,CAAC,EAAE;QAC1CH,GAAG,CAACI,QAAQ,GAAG,EAAE;QACjBJ,GAAG,CAACK,MAAM,GAAG,EAAE;MACjB;MACA,OAAOL,GAAG,CAACM,QAAQ,EAAE;IACvB,CAAC,CAAC,OAAAC,OAAA,EAAM;MACN,OAAOR,GAAG;IACZ;EACF,CAAC,CAAC;AACJ;AAEA;AACA;;;;AAIA,SAASF,iBAAiBA,CACxBD,KAA6C,EAC7CY,QAAiB,EACW;EAAA,IAA5BC,IAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAsB,MAAM;EAE5B,MAAMG,aAAa,GAAa,EAAE;EAElC,KAAK,MAAMd,GAAG,IAAIH,KAAK,CAACG,GAAG,EAAE;IAC3B;IACA,IAAIU,IAAI,KAAK,MAAM,IAAI,CAACV,GAAG,CAACe,UAAU,CAAC,MAAM,CAAC,EAAE;MAC9C;IACF;IAEA,IAAIL,IAAI,KAAK,IAAI,IAAI,CAACV,GAAG,CAACe,UAAU,CAAC,IAAI,CAAC,EAAE;MAC1C;IACF;IAEA;IACA;IACA,IAAIf,GAAG,CAACgB,QAAQ,CAAC,qBAAqB,CAAC,EAAE;MACvC,IAAIP,QAAQ,EAAE;QACZK,aAAa,CAACG,IAAI;QAChB;QACAjB,GAAG,CAACkB,OAAO,CAAC,qBAAqB,EAAET,QAAQ,CAAC,IACzC,OAAOU,UAAU,KAAK,WAAW,IAAI,eAAe,IAAIA,UAAU,GAC/D;QAAA,cAAAC,MAAA,CACcD,UAAU,CAACE,aAAa,IACtC,EAAE,CAAC,CACV;MACH,CAAC,MAAM;QACL;QACA;QACA;QACA;QACAP,aAAa,CAACG,IAAI,CAACjB,GAAG,CAACkB,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,CAAC;MAC5D;IACF;IAEA;IAAA,KACK,IAAIlB,GAAG,CAACgB,QAAQ,CAAC,IAAI,CAAC,EAAE;MAC3B;IAAA;IAGF;IAAA,KACK;MACHF,aAAa,CAACG,IAAI,CAACjB,GAAG,CAAC;IACzB;EACF;EAEA,IAAIc,aAAa,CAACF,MAAM,KAAK,CAAC,EAAE;IAC9B,MAAM,IAAIU,KAAK,mCAAAF,MAAA,CACoBvB,KAAK,CAAC0B,OAAO,mBAAAH,MAAA,CAAeV,IAAI,CAAE,CACpE;EACH;EAEA,OAAOI,aAAa;AACtB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}