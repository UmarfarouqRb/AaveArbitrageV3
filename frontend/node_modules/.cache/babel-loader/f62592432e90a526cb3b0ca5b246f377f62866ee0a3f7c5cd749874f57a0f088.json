{"ast":null,"code":"\"use client\";\n\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\nimport { useState } from \"react\";\nimport { waitForReceipt } from \"../../../transaction/actions/wait-for-tx-receipt.js\";\nimport { isBaseTransactionOptions } from \"../../../transaction/types.js\";\nimport { isObjectWithKeys } from \"../../../utils/type-guards.js\";\nimport { structuralSharing } from \"../utils/structuralSharing.js\";\nimport { ConnectionManagerCtx } from \"./connection-manager.js\";\nimport { invalidateWalletBalance } from \"./invalidateWalletBalance.js\";\nimport { SetRootElementContext } from \"./RootElementContext.js\";\n/**\n * @internal\n */\nexport function ThirdwebProviderCore(props) {\n  const [el, setEl] = useState(null);\n  const [queryClient] = useState(() => new QueryClient({\n    defaultOptions: {\n      mutations: {\n        onSettled: (data, _error, variables) => {\n          if (isBaseTransactionOptions(variables)) {\n            if (isObjectWithKeys(data, [\"transactionHash\"]) && isObjectWithKeys(variables, [\"client\", \"chain\"])) {\n              waitForReceipt({\n                chain: variables.chain,\n                // We know it exists from the if\n                client: variables.client,\n                transactionHash: data.transactionHash\n              }).catch(e => {\n                // swallow errors for receipts, but log\n                console.error(\"[Transaction Error]\", e);\n              }).then(() => {\n                var _variables$__contract, _variables$__contract2, _variables$__contract3;\n                return Promise.all([queryClient.invalidateQueries({\n                  queryKey:\n                  // invalidate any readContract queries for this chainId:contractAddress\n                  [\"readContract\", ((_variables$__contract = variables.__contract) === null || _variables$__contract === void 0 ? void 0 : _variables$__contract.chain.id) || variables.chain.id, ((_variables$__contract2 = variables.__contract) === null || _variables$__contract2 === void 0 ? void 0 : _variables$__contract2.address) || variables.to]\n                }), invalidateWalletBalance(queryClient, ((_variables$__contract3 = variables.__contract) === null || _variables$__contract3 === void 0 ? void 0 : _variables$__contract3.chain.id) || variables.chain.id)]);\n              });\n            }\n          }\n        }\n      },\n      queries: {\n        // With SSR, we usually want to set some default staleTime\n        // above 0 to avoid refetching immediately on the client\n        staleTime: 60 * 1000,\n        structuralSharing\n      }\n    }\n  }));\n  return _jsx(ConnectionManagerCtx.Provider, {\n    value: props.manager,\n    children: _jsxs(QueryClientProvider, {\n      client: queryClient,\n      children: [_jsx(SetRootElementContext.Provider, {\n        value: setEl,\n        children: props.children\n      }), el]\n    })\n  });\n}","map":{"version":3,"names":["QueryClient","QueryClientProvider","useState","waitForReceipt","isBaseTransactionOptions","isObjectWithKeys","structuralSharing","ConnectionManagerCtx","invalidateWalletBalance","SetRootElementContext","ThirdwebProviderCore","props","el","setEl","queryClient","defaultOptions","mutations","onSettled","data","_error","variables","chain","client","transactionHash","catch","e","console","error","then","_variables$__contract","_variables$__contract2","_variables$__contract3","Promise","all","invalidateQueries","queryKey","__contract","id","address","to","queries","staleTime","_jsx","Provider","value","manager","children","_jsxs"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/core/providers/thirdweb-provider.tsx"],"sourcesContent":["\"use client\";\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\nimport { useState } from \"react\";\nimport { waitForReceipt } from \"../../../transaction/actions/wait-for-tx-receipt.js\";\nimport { isBaseTransactionOptions } from \"../../../transaction/types.js\";\nimport type { Hex } from \"../../../utils/encoding/hex.js\";\nimport { isObjectWithKeys } from \"../../../utils/type-guards.js\";\nimport type { ConnectionManager } from \"../../../wallets/manager/index.js\";\nimport { structuralSharing } from \"../utils/structuralSharing.js\";\nimport { ConnectionManagerCtx } from \"./connection-manager.js\";\nimport { invalidateWalletBalance } from \"./invalidateWalletBalance.js\";\nimport { SetRootElementContext } from \"./RootElementContext.js\";\n\n/**\n * @internal\n */\nexport function ThirdwebProviderCore(props: {\n  manager: ConnectionManager;\n  children: React.ReactNode;\n}) {\n  const [el, setEl] = useState<React.ReactNode>(null);\n  const [queryClient] = useState(\n    () =>\n      new QueryClient({\n        defaultOptions: {\n          mutations: {\n            onSettled: (data, _error, variables) => {\n              if (isBaseTransactionOptions(variables)) {\n                if (\n                  isObjectWithKeys(data, [\"transactionHash\"]) &&\n                  isObjectWithKeys(variables, [\"client\", \"chain\"])\n                ) {\n                  waitForReceipt({\n                    chain: variables.chain, // We know it exists from the if\n                    client: variables.client,\n                    transactionHash: data.transactionHash as Hex,\n                  })\n                    .catch((e) => {\n                      // swallow errors for receipts, but log\n                      console.error(\"[Transaction Error]\", e);\n                    })\n                    .then(() => {\n                      return Promise.all([\n                        queryClient.invalidateQueries({\n                          queryKey:\n                            // invalidate any readContract queries for this chainId:contractAddress\n                            [\n                              \"readContract\",\n                              variables.__contract?.chain.id ||\n                                variables.chain.id,\n                              variables.__contract?.address || variables.to,\n                            ] as const,\n                        }),\n                        invalidateWalletBalance(\n                          queryClient,\n                          variables.__contract?.chain.id || variables.chain.id,\n                        ),\n                      ]);\n                    });\n                }\n              }\n            },\n          },\n          queries: {\n            // With SSR, we usually want to set some default staleTime\n            // above 0 to avoid refetching immediately on the client\n            staleTime: 60 * 1000,\n            structuralSharing,\n          },\n        },\n      }),\n  );\n\n  return (\n    <ConnectionManagerCtx.Provider value={props.manager}>\n      <QueryClientProvider client={queryClient}>\n        <SetRootElementContext.Provider value={setEl}>\n          {props.children}\n        </SetRootElementContext.Provider>\n        {el}\n      </QueryClientProvider>\n    </ConnectionManagerCtx.Provider>\n  );\n}\n"],"mappings":"AAAA,YAAY;;;AACZ,SAASA,WAAW,EAAEC,mBAAmB,QAAQ,uBAAuB;AACxE,SAASC,QAAQ,QAAQ,OAAO;AAChC,SAASC,cAAc,QAAQ,qDAAqD;AACpF,SAASC,wBAAwB,QAAQ,+BAA+B;AAExE,SAASC,gBAAgB,QAAQ,+BAA+B;AAEhE,SAASC,iBAAiB,QAAQ,+BAA+B;AACjE,SAASC,oBAAoB,QAAQ,yBAAyB;AAC9D,SAASC,uBAAuB,QAAQ,8BAA8B;AACtE,SAASC,qBAAqB,QAAQ,yBAAyB;AAE/D;;;AAGA,OAAM,SAAUC,oBAAoBA,CAACC,KAGpC;EACC,MAAM,CAACC,EAAE,EAAEC,KAAK,CAAC,GAAGX,QAAQ,CAAkB,IAAI,CAAC;EACnD,MAAM,CAACY,WAAW,CAAC,GAAGZ,QAAQ,CAC5B,MACE,IAAIF,WAAW,CAAC;IACde,cAAc,EAAE;MACdC,SAAS,EAAE;QACTC,SAAS,EAAEA,CAACC,IAAI,EAAEC,MAAM,EAAEC,SAAS,KAAI;UACrC,IAAIhB,wBAAwB,CAACgB,SAAS,CAAC,EAAE;YACvC,IACEf,gBAAgB,CAACa,IAAI,EAAE,CAAC,iBAAiB,CAAC,CAAC,IAC3Cb,gBAAgB,CAACe,SAAS,EAAE,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,EAChD;cACAjB,cAAc,CAAC;gBACbkB,KAAK,EAAED,SAAS,CAACC,KAAK;gBAAE;gBACxBC,MAAM,EAAEF,SAAS,CAACE,MAAM;gBACxBC,eAAe,EAAEL,IAAI,CAACK;eACvB,CAAC,CACCC,KAAK,CAAEC,CAAC,IAAI;gBACX;gBACAC,OAAO,CAACC,KAAK,CAAC,qBAAqB,EAAEF,CAAC,CAAC;cACzC,CAAC,CAAC,CACDG,IAAI,CAAC,MAAK;gBAAA,IAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA;gBACT,OAAOC,OAAO,CAACC,GAAG,CAAC,CACjBnB,WAAW,CAACoB,iBAAiB,CAAC;kBAC5BC,QAAQ;kBACN;kBACA,CACE,cAAc,EACd,EAAAN,qBAAA,GAAAT,SAAS,CAACgB,UAAU,cAAAP,qBAAA,uBAApBA,qBAAA,CAAsBR,KAAK,CAACgB,EAAE,KAC5BjB,SAAS,CAACC,KAAK,CAACgB,EAAE,EACpB,EAAAP,sBAAA,GAAAV,SAAS,CAACgB,UAAU,cAAAN,sBAAA,uBAApBA,sBAAA,CAAsBQ,OAAO,KAAIlB,SAAS,CAACmB,EAAE;iBAElD,CAAC,EACF/B,uBAAuB,CACrBM,WAAW,EACX,EAAAiB,sBAAA,GAAAX,SAAS,CAACgB,UAAU,cAAAL,sBAAA,uBAApBA,sBAAA,CAAsBV,KAAK,CAACgB,EAAE,KAAIjB,SAAS,CAACC,KAAK,CAACgB,EAAE,CACrD,CACF,CAAC;cACJ,CAAC,CAAC;YACN;UACF;QACF;OACD;MACDG,OAAO,EAAE;QACP;QACA;QACAC,SAAS,EAAE,EAAE,GAAG,IAAI;QACpBnC;;;GAGL,CAAC,CACL;EAED,OACEoC,IAAA,CAACnC,oBAAoB,CAACoC,QAAQ;IAACC,KAAK,EAAEjC,KAAK,CAACkC,OAAO;IAAAC,QAAA,EACjDC,KAAA,CAAC9C,mBAAmB;MAACqB,MAAM,EAAER,WAAW;MAAAgC,QAAA,GACtCJ,IAAA,CAACjC,qBAAqB,CAACkC,QAAQ;QAACC,KAAK,EAAE/B,KAAK;QAAAiC,QAAA,EACzCnC,KAAK,CAACmC;MAAQ,EACgB,EAChClC,EAAE;IAAA;EACiB,EACQ;AAEpC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}