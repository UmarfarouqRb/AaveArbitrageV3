{"ast":null,"code":"import _objectSpread from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { isEcosystemWallet } from \"../../../../wallets/ecosystem/is-ecosystem-wallet.js\";\nimport { linkProfile } from \"../../../../wallets/in-app/web/lib/auth/index.js\";\nimport { useConnectedWallets } from \"../../../core/hooks/wallets/useConnectedWallets.js\";\n/**\n * Links a web2 or web3 profile to the connected in-app or ecosystem account.\n * **When a profile is linked to the account, that profile can then be used to sign into the same account.**\n *\n * @example\n *\n * ### Linking a social profile\n *\n * ```jsx\n * import { useLinkProfile } from \"thirdweb/react\";\n *\n * const { mutate: linkProfile } = useLinkProfile();\n *\n * const onClick = () => {\n *   linkProfile({\n *     client,\n *     strategy: \"discord\", // or \"google\", \"x\", \"telegram\", etc\n *   });\n * };\n * ```\n *\n * ### Linking an email\n *\n * ```jsx\n * import { useLinkProfile } from \"thirdweb/react\";\n * import { preAuthenticate } from \"thirdweb/wallets\";\n *\n * const { mutate: linkProfile } = useLinkProfile();\n *\n * // send a verification email first\n * const sendEmail = async () => {\n *   const email = await preAuthenticate({\n *     client,\n *     strategy: \"email\",\n *     email: \"john.doe@example.com\",\n *   });\n * };\n *\n * // then link the profile with the verification code\n * const onClick = (code: string) => {\n *   linkProfile({\n *     client,\n *     strategy: \"email\",\n *     email: \"john.doe@example.com\",\n *     verificationCode: code,\n *   });\n * };\n * ```\n *\n * The same process can be used for phone and email, simply swap out the `strategy` parameter.\n *\n * ### Linking a wallet\n *\n * ```jsx\n * import { useLinkProfile } from \"thirdweb/react\";\n *\n * const { mutate: linkProfile } = useLinkProfile();\n *\n * const onClick = () => {\n *   linkProfile({\n *     client,\n *     strategy: \"wallet\",\n *     wallet: createWallet(\"io.metamask\"), // autocompletion for 400+ wallet ids\n *     chain: sepolia, // any chain works, needed for SIWE signature\n *   });\n * };\n * ```\n *\n * @wallet\n */\nexport function useLinkProfile() {\n  const wallets = useConnectedWallets();\n  const queryClient = useQueryClient();\n  return useMutation({\n    mutationFn: async options => {\n      var _ecosystemWallet$getC;\n      const ecosystemWallet = wallets.find(w => isEcosystemWallet(w));\n      const ecosystem = ecosystemWallet ? {\n        id: ecosystemWallet.id,\n        partnerId: (_ecosystemWallet$getC = ecosystemWallet.getConfig()) === null || _ecosystemWallet$getC === void 0 ? void 0 : _ecosystemWallet$getC.partnerId\n      } : undefined;\n      const optionsWithEcosystem = _objectSpread(_objectSpread({}, options), {}, {\n        ecosystem\n      });\n      return linkProfile(optionsWithEcosystem);\n    },\n    mutationKey: [\"profiles\"],\n    onSuccess() {\n      setTimeout(() => {\n        queryClient.invalidateQueries({\n          queryKey: [\"profiles\"]\n        });\n      }, 500);\n    }\n  });\n}","map":{"version":3,"names":["useMutation","useQueryClient","isEcosystemWallet","linkProfile","useConnectedWallets","useLinkProfile","wallets","queryClient","mutationFn","options","_ecosystemWallet$getC","ecosystemWallet","find","w","ecosystem","id","partnerId","getConfig","undefined","optionsWithEcosystem","_objectSpread","mutationKey","onSuccess","setTimeout","invalidateQueries","queryKey"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/web/hooks/wallets/useLinkProfile.ts"],"sourcesContent":["import { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { isEcosystemWallet } from \"../../../../wallets/ecosystem/is-ecosystem-wallet.js\";\nimport type { AuthArgsType } from \"../../../../wallets/in-app/core/authentication/types.js\";\nimport type { Ecosystem } from \"../../../../wallets/in-app/core/wallet/types.js\";\nimport { linkProfile } from \"../../../../wallets/in-app/web/lib/auth/index.js\";\nimport { useConnectedWallets } from \"../../../core/hooks/wallets/useConnectedWallets.js\";\n\n/**\n * Links a web2 or web3 profile to the connected in-app or ecosystem account.\n * **When a profile is linked to the account, that profile can then be used to sign into the same account.**\n *\n * @example\n *\n * ### Linking a social profile\n *\n * ```jsx\n * import { useLinkProfile } from \"thirdweb/react\";\n *\n * const { mutate: linkProfile } = useLinkProfile();\n *\n * const onClick = () => {\n *   linkProfile({\n *     client,\n *     strategy: \"discord\", // or \"google\", \"x\", \"telegram\", etc\n *   });\n * };\n * ```\n *\n * ### Linking an email\n *\n * ```jsx\n * import { useLinkProfile } from \"thirdweb/react\";\n * import { preAuthenticate } from \"thirdweb/wallets\";\n *\n * const { mutate: linkProfile } = useLinkProfile();\n *\n * // send a verification email first\n * const sendEmail = async () => {\n *   const email = await preAuthenticate({\n *     client,\n *     strategy: \"email\",\n *     email: \"john.doe@example.com\",\n *   });\n * };\n *\n * // then link the profile with the verification code\n * const onClick = (code: string) => {\n *   linkProfile({\n *     client,\n *     strategy: \"email\",\n *     email: \"john.doe@example.com\",\n *     verificationCode: code,\n *   });\n * };\n * ```\n *\n * The same process can be used for phone and email, simply swap out the `strategy` parameter.\n *\n * ### Linking a wallet\n *\n * ```jsx\n * import { useLinkProfile } from \"thirdweb/react\";\n *\n * const { mutate: linkProfile } = useLinkProfile();\n *\n * const onClick = () => {\n *   linkProfile({\n *     client,\n *     strategy: \"wallet\",\n *     wallet: createWallet(\"io.metamask\"), // autocompletion for 400+ wallet ids\n *     chain: sepolia, // any chain works, needed for SIWE signature\n *   });\n * };\n * ```\n *\n * @wallet\n */\nexport function useLinkProfile() {\n  const wallets = useConnectedWallets();\n  const queryClient = useQueryClient();\n  return useMutation({\n    mutationFn: async (options: AuthArgsType) => {\n      const ecosystemWallet = wallets.find((w) => isEcosystemWallet(w));\n      const ecosystem: Ecosystem | undefined = ecosystemWallet\n        ? {\n            id: ecosystemWallet.id,\n            partnerId: ecosystemWallet.getConfig()?.partnerId,\n          }\n        : undefined;\n      const optionsWithEcosystem = { ...options, ecosystem } as AuthArgsType;\n      return linkProfile(optionsWithEcosystem);\n    },\n    mutationKey: [\"profiles\"],\n    onSuccess() {\n      setTimeout(() => {\n        queryClient.invalidateQueries({ queryKey: [\"profiles\"] });\n      }, 500);\n    },\n  });\n}\n"],"mappings":";AAAA,SAASA,WAAW,EAAEC,cAAc,QAAQ,uBAAuB;AACnE,SAASC,iBAAiB,QAAQ,sDAAsD;AAGxF,SAASC,WAAW,QAAQ,kDAAkD;AAC9E,SAASC,mBAAmB,QAAQ,oDAAoD;AAExF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA,OAAM,SAAUC,cAAcA,CAAA;EAC5B,MAAMC,OAAO,GAAGF,mBAAmB,EAAE;EACrC,MAAMG,WAAW,GAAGN,cAAc,EAAE;EACpC,OAAOD,WAAW,CAAC;IACjBQ,UAAU,EAAE,MAAOC,OAAqB,IAAI;MAAA,IAAAC,qBAAA;MAC1C,MAAMC,eAAe,GAAGL,OAAO,CAACM,IAAI,CAAEC,CAAC,IAAKX,iBAAiB,CAACW,CAAC,CAAC,CAAC;MACjE,MAAMC,SAAS,GAA0BH,eAAe,GACpD;QACEI,EAAE,EAAEJ,eAAe,CAACI,EAAE;QACtBC,SAAS,GAAAN,qBAAA,GAAEC,eAAe,CAACM,SAAS,EAAE,cAAAP,qBAAA,uBAA3BA,qBAAA,CAA6BM;OACzC,GACDE,SAAS;MACb,MAAMC,oBAAoB,GAAAC,aAAA,CAAAA,aAAA,KAAQX,OAAO;QAAEK;MAAS,EAAkB;MACtE,OAAOX,WAAW,CAACgB,oBAAoB,CAAC;IAC1C,CAAC;IACDE,WAAW,EAAE,CAAC,UAAU,CAAC;IACzBC,SAASA,CAAA;MACPC,UAAU,CAAC,MAAK;QACdhB,WAAW,CAACiB,iBAAiB,CAAC;UAAEC,QAAQ,EAAE,CAAC,UAAU;QAAC,CAAE,CAAC;MAC3D,CAAC,EAAE,GAAG,CAAC;IACT;GACD,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}