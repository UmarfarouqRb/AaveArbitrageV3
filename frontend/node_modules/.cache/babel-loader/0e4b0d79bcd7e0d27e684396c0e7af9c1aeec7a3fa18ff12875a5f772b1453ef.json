{"ast":null,"code":"\"use client\";\n\nimport _objectSpread from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"src\", \"client\", \"ecosystem\"];\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { getLastAuthProvider } from \"../../../react/core/utils/storage.js\";\nimport { webLocalStorage } from \"../../../utils/storage/webStorage.js\";\nimport { isEcosystemWallet } from \"../../../wallets/ecosystem/is-ecosystem-wallet.js\";\nimport { ClientScopedStorage } from \"../../../wallets/in-app/core/authentication/client-scoped-storage.js\";\nimport { useActiveWallet } from \"../../core/hooks/wallets/useActiveWallet.js\";\n/**\n * Embeds another thirdweb-supported site for seamless in-app and ecosystem wallet connection.\n *\n *  Make sure the embedded site includes <AutoConnect /> and supports frame ancestors, see [here](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-ancestors) for more information.\n *\n *  The embedded site must support the connected wallet (ecosystem or in-app).\n *\n * @param {Object} props - The props to pass to the iframe\n * @param {String} props.src - The URL of the site to embed\n * @param {ThirdwebClient} props.client - The current site's thirdweb client\n * @param {Ecosystem} [props.ecosystem] - The ecosystem to use for the wallet connection in the embedded site\n *\n * @example\n * ```tsx\n * import { SiteEmbed } from \"thirdweb/react\";\n *\n * <SiteEmbed src=\"https://thirdweb.com\" client={thirdwebClient} ecosystem={{ id: \"ecosystem.thirdweb\" }} />\n * ```\n * @walletConnection\n */\nexport function SiteEmbed(_ref) {\n  let {\n      src,\n      client,\n      ecosystem\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  if (!client.clientId) {\n    throw new Error(\"The SiteEmbed client must have a clientId\");\n  }\n  const activeWallet = useActiveWallet();\n  const walletId = activeWallet === null || activeWallet === void 0 ? void 0 : activeWallet.id;\n  const {\n    data: {\n      authProvider,\n      authCookie\n    } = {}\n  } = useQuery({\n    enabled: activeWallet && (isEcosystemWallet(activeWallet) || walletId === \"inApp\" || walletId === \"smart\"),\n    queryFn: async () => {\n      const storage = new ClientScopedStorage({\n        clientId: client.clientId,\n        ecosystem,\n        storage: webLocalStorage\n      });\n      const authProvider = await getLastAuthProvider(webLocalStorage);\n      const authCookie = await storage.getAuthCookie();\n      return {\n        authCookie,\n        authProvider\n      };\n    },\n    queryKey: [\"site-embed\", walletId, src, client.clientId, ecosystem]\n  });\n  const url = new URL(src);\n  if (walletId) {\n    url.searchParams.set(\"walletId\", walletId === \"smart\" ? \"inApp\" : walletId);\n  }\n  if (authProvider) {\n    url.searchParams.set(\"authProvider\", authProvider);\n  }\n  if (authCookie) {\n    url.searchParams.set(\"authCookie\", authCookie);\n  }\n  return _jsx(\"iframe\", _objectSpread({\n    allowFullScreen: true,\n    height: \"100%\",\n    src: encodeURI(url.toString()),\n    width: \"100%\"\n  }, props));\n}","map":{"version":3,"names":["_objectSpread","_objectWithoutProperties","_excluded","useQuery","getLastAuthProvider","webLocalStorage","isEcosystemWallet","ClientScopedStorage","useActiveWallet","SiteEmbed","_ref","src","client","ecosystem","props","clientId","Error","activeWallet","walletId","id","data","authProvider","authCookie","enabled","queryFn","storage","getAuthCookie","queryKey","url","URL","searchParams","set","_jsx","allowFullScreen","height","encodeURI","toString","width"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/web/ui/SiteEmbed.tsx"],"sourcesContent":["\"use client\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport type { ThirdwebClient } from \"../../../client/client.js\";\nimport { getLastAuthProvider } from \"../../../react/core/utils/storage.js\";\nimport { webLocalStorage } from \"../../../utils/storage/webStorage.js\";\nimport { isEcosystemWallet } from \"../../../wallets/ecosystem/is-ecosystem-wallet.js\";\nimport { ClientScopedStorage } from \"../../../wallets/in-app/core/authentication/client-scoped-storage.js\";\nimport type { Ecosystem } from \"../../../wallets/in-app/core/wallet/types.js\";\nimport { useActiveWallet } from \"../../core/hooks/wallets/useActiveWallet.js\";\n\n/**\n * Embeds another thirdweb-supported site for seamless in-app and ecosystem wallet connection.\n *\n *  Make sure the embedded site includes <AutoConnect /> and supports frame ancestors, see [here](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-ancestors) for more information.\n *\n *  The embedded site must support the connected wallet (ecosystem or in-app).\n *\n * @param {Object} props - The props to pass to the iframe\n * @param {String} props.src - The URL of the site to embed\n * @param {ThirdwebClient} props.client - The current site's thirdweb client\n * @param {Ecosystem} [props.ecosystem] - The ecosystem to use for the wallet connection in the embedded site\n *\n * @example\n * ```tsx\n * import { SiteEmbed } from \"thirdweb/react\";\n *\n * <SiteEmbed src=\"https://thirdweb.com\" client={thirdwebClient} ecosystem={{ id: \"ecosystem.thirdweb\" }} />\n * ```\n * @walletConnection\n */\nexport function SiteEmbed({\n  src,\n  client,\n  ecosystem,\n  ...props\n}: {\n  src: string;\n  client: ThirdwebClient;\n  ecosystem?: Ecosystem;\n} & React.DetailedHTMLProps<\n  React.IframeHTMLAttributes<HTMLIFrameElement>,\n  HTMLIFrameElement\n>) {\n  if (!client.clientId) {\n    throw new Error(\"The SiteEmbed client must have a clientId\");\n  }\n\n  const activeWallet = useActiveWallet();\n  const walletId = activeWallet?.id;\n\n  const { data: { authProvider, authCookie } = {} } = useQuery({\n    enabled:\n      activeWallet &&\n      (isEcosystemWallet(activeWallet) ||\n        walletId === \"inApp\" ||\n        walletId === \"smart\"),\n    queryFn: async () => {\n      const storage = new ClientScopedStorage({\n        clientId: client.clientId,\n        ecosystem,\n        storage: webLocalStorage,\n      });\n\n      const authProvider = await getLastAuthProvider(webLocalStorage);\n      const authCookie = await storage.getAuthCookie();\n\n      return { authCookie, authProvider };\n    },\n    queryKey: [\"site-embed\", walletId, src, client.clientId, ecosystem],\n  });\n\n  const url = new URL(src);\n  if (walletId) {\n    url.searchParams.set(\"walletId\", walletId === \"smart\" ? \"inApp\" : walletId);\n  }\n  if (authProvider) {\n    url.searchParams.set(\"authProvider\", authProvider);\n  }\n  if (authCookie) {\n    url.searchParams.set(\"authCookie\", authCookie);\n  }\n\n  return (\n    <iframe\n      allowFullScreen\n      height=\"100%\"\n      src={encodeURI(url.toString())}\n      width=\"100%\"\n      {...props}\n    />\n  );\n}\n"],"mappings":"AAAA,YAAY;;AAAC,OAAAA,aAAA;AAAA,OAAAC,wBAAA;AAAA,MAAAC,SAAA;;AACb,SAASC,QAAQ,QAAQ,uBAAuB;AAEhD,SAASC,mBAAmB,QAAQ,sCAAsC;AAC1E,SAASC,eAAe,QAAQ,sCAAsC;AACtE,SAASC,iBAAiB,QAAQ,mDAAmD;AACrF,SAASC,mBAAmB,QAAQ,sEAAsE;AAE1G,SAASC,eAAe,QAAQ,6CAA6C;AAE7E;;;;;;;;;;;;;;;;;;;;AAoBA,OAAM,SAAUC,SAASA,CAAAC,IAAA,EAYxB;EAAA,IAZyB;MACxBC,GAAG;MACHC,MAAM;MACNC;IACQ,CAQT,GAAAH,IAAA;IARII,KAAK,GAAAb,wBAAA,CAAAS,IAAA,EAAAR,SAAA;EASR,IAAI,CAACU,MAAM,CAACG,QAAQ,EAAE;IACpB,MAAM,IAAIC,KAAK,CAAC,2CAA2C,CAAC;EAC9D;EAEA,MAAMC,YAAY,GAAGT,eAAe,EAAE;EACtC,MAAMU,QAAQ,GAAGD,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEE,EAAE;EAEjC,MAAM;IAAEC,IAAI,EAAE;MAAEC,YAAY;MAAEC;IAAU,CAAE,GAAG;EAAE,CAAE,GAAGnB,QAAQ,CAAC;IAC3DoB,OAAO,EACLN,YAAY,KACXX,iBAAiB,CAACW,YAAY,CAAC,IAC9BC,QAAQ,KAAK,OAAO,IACpBA,QAAQ,KAAK,OAAO,CAAC;IACzBM,OAAO,EAAE,MAAAA,CAAA,KAAW;MAClB,MAAMC,OAAO,GAAG,IAAIlB,mBAAmB,CAAC;QACtCQ,QAAQ,EAAEH,MAAM,CAACG,QAAQ;QACzBF,SAAS;QACTY,OAAO,EAAEpB;OACV,CAAC;MAEF,MAAMgB,YAAY,GAAG,MAAMjB,mBAAmB,CAACC,eAAe,CAAC;MAC/D,MAAMiB,UAAU,GAAG,MAAMG,OAAO,CAACC,aAAa,EAAE;MAEhD,OAAO;QAAEJ,UAAU;QAAED;MAAY,CAAE;IACrC,CAAC;IACDM,QAAQ,EAAE,CAAC,YAAY,EAAET,QAAQ,EAAEP,GAAG,EAAEC,MAAM,CAACG,QAAQ,EAAEF,SAAS;GACnE,CAAC;EAEF,MAAMe,GAAG,GAAG,IAAIC,GAAG,CAAClB,GAAG,CAAC;EACxB,IAAIO,QAAQ,EAAE;IACZU,GAAG,CAACE,YAAY,CAACC,GAAG,CAAC,UAAU,EAAEb,QAAQ,KAAK,OAAO,GAAG,OAAO,GAAGA,QAAQ,CAAC;EAC7E;EACA,IAAIG,YAAY,EAAE;IAChBO,GAAG,CAACE,YAAY,CAACC,GAAG,CAAC,cAAc,EAAEV,YAAY,CAAC;EACpD;EACA,IAAIC,UAAU,EAAE;IACdM,GAAG,CAACE,YAAY,CAACC,GAAG,CAAC,YAAY,EAAET,UAAU,CAAC;EAChD;EAEA,OACEU,IAAA,WAAAhC,aAAA;IACEiC,eAAe;IACfC,MAAM,EAAC,MAAM;IACbvB,GAAG,EAAEwB,SAAS,CAACP,GAAG,CAACQ,QAAQ,EAAE,CAAC;IAC9BC,KAAK,EAAC;EAAM,GACRvB,KAAK,EACT;AAEN","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}