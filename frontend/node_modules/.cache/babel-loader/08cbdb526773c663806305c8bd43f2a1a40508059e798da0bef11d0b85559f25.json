{"ast":null,"code":"import _objectSpread from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { hexToBigInt, hexToNumber } from \"../../utils/encoding/hex.js\";\n/**\n * Get the status of an [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) bundle.\n *\n *  This function is dependent on the wallet's support for EIP-5792 and could fail.\n *\n * @param {GetCallsStatusOptions} options\n * @param {Wallet} options.wallet - The wallet that send the original calls.\n * @param {ThirdwebClient} options.client - A {@link ThirdwebClient} instance.\n * @param {WalletSendCallsId} options.bundleId - The ID of the bundle to get the status of.\n * @throws an error if the wallet does not support EIP-5792.\n * @returns {Promise<GetCallsStatusResponse>} - A promise that resolves to the bundle's status and receipts (if available). {@link GetCallsStatusResponse}\n * @beta\n * @example\n * ```ts\n *  import { createThirdwebClient } from \"thirdweb\";\n *  import { sendCalls, getCallsStatus } from \"thirdweb/wallets/eip5792\";\n *\n *  const client = createThirdwebClient({ clientId: ... });\n *\n *  const result = await sendCalls({ wallet, client, calls });\n *\n *  let result;\n *  while (result.status !== \"success\") {\n *    result = await getCallsStatus(result);\n *  }\n * ```\n * @extension EIP5792\n */\nexport async function getCallsStatus(_ref) {\n  let {\n    wallet,\n    client,\n    id\n  } = _ref;\n  const account = wallet.getAccount();\n  if (!account) {\n    throw new Error(\"Failed to get call status, no account found for wallet \".concat(wallet.id));\n  }\n  const chain = wallet.getChain();\n  if (!chain) {\n    throw new Error(\"Failed to get call status, no chain found for wallet \".concat(wallet.id));\n  }\n  if (account.getCallsStatus) {\n    return account.getCallsStatus({\n      id,\n      chain,\n      client\n    });\n  }\n  throw new Error(\"Failed to get call status, wallet \".concat(wallet.id, \" does not support EIP-5792\"));\n}\nconst receiptStatuses = {\n  \"0x0\": \"reverted\",\n  \"0x1\": \"success\"\n};\nexport function toGetCallsStatusResponse(response) {\n  var _response$receipts$ma, _response$receipts;\n  const [status, statusCode] = (() => {\n    const statusCode = response.status;\n    if (statusCode >= 100 && statusCode < 200) return [\"pending\", statusCode];\n    if (statusCode >= 200 && statusCode < 300) return [\"success\", statusCode];\n    if (statusCode >= 300 && statusCode < 700) return [\"failure\", statusCode];\n    // @ts-expect-error: for backwards compatibility\n    if (statusCode === \"CONFIRMED\") return [\"success\", 200];\n    // @ts-expect-error: for backwards compatibility\n    if (statusCode === \"PENDING\") return [\"pending\", 100];\n    return [undefined, statusCode];\n  })();\n  return _objectSpread(_objectSpread({}, response), {}, {\n    atomic: response.atomic,\n    // @ts-expect-error: for backwards compatibility\n    chainId: response.chainId ? hexToNumber(response.chainId) : undefined,\n    receipts: (_response$receipts$ma = (_response$receipts = response.receipts) === null || _response$receipts === void 0 ? void 0 : _response$receipts.map(receipt => _objectSpread(_objectSpread({}, receipt), {}, {\n      blockNumber: hexToBigInt(receipt.blockNumber),\n      gasUsed: hexToBigInt(receipt.gasUsed),\n      status: receiptStatuses[receipt.status]\n    }))) !== null && _response$receipts$ma !== void 0 ? _response$receipts$ma : [],\n    status,\n    statusCode,\n    version: response.version\n  });\n}","map":{"version":3,"names":["hexToBigInt","hexToNumber","getCallsStatus","_ref","wallet","client","id","account","getAccount","Error","concat","chain","getChain","receiptStatuses","toGetCallsStatusResponse","response","_response$receipts$ma","_response$receipts","status","statusCode","undefined","_objectSpread","atomic","chainId","receipts","map","receipt","blockNumber","gasUsed","version"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/wallets/eip5792/get-calls-status.ts"],"sourcesContent":["import type { ThirdwebClient } from \"../../client/client.js\";\nimport { hexToBigInt, hexToNumber } from \"../../utils/encoding/hex.js\";\nimport type { Wallet } from \"../interfaces/wallet.js\";\nimport type {\n  GetCallsStatusRawResponse,\n  GetCallsStatusResponse,\n  WalletSendCallsId,\n} from \"./types.js\";\n\nexport type GetCallsStatusOptions = {\n  wallet: Wallet;\n  client: ThirdwebClient;\n  id: WalletSendCallsId;\n};\n\n/**\n * Get the status of an [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) bundle.\n *\n *  This function is dependent on the wallet's support for EIP-5792 and could fail.\n *\n * @param {GetCallsStatusOptions} options\n * @param {Wallet} options.wallet - The wallet that send the original calls.\n * @param {ThirdwebClient} options.client - A {@link ThirdwebClient} instance.\n * @param {WalletSendCallsId} options.bundleId - The ID of the bundle to get the status of.\n * @throws an error if the wallet does not support EIP-5792.\n * @returns {Promise<GetCallsStatusResponse>} - A promise that resolves to the bundle's status and receipts (if available). {@link GetCallsStatusResponse}\n * @beta\n * @example\n * ```ts\n *  import { createThirdwebClient } from \"thirdweb\";\n *  import { sendCalls, getCallsStatus } from \"thirdweb/wallets/eip5792\";\n *\n *  const client = createThirdwebClient({ clientId: ... });\n *\n *  const result = await sendCalls({ wallet, client, calls });\n *\n *  let result;\n *  while (result.status !== \"success\") {\n *    result = await getCallsStatus(result);\n *  }\n * ```\n * @extension EIP5792\n */\nexport async function getCallsStatus({\n  wallet,\n  client,\n  id,\n}: GetCallsStatusOptions): Promise<GetCallsStatusResponse> {\n  const account = wallet.getAccount();\n  if (!account) {\n    throw new Error(\n      `Failed to get call status, no account found for wallet ${wallet.id}`,\n    );\n  }\n\n  const chain = wallet.getChain();\n  if (!chain) {\n    throw new Error(\n      `Failed to get call status, no chain found for wallet ${wallet.id}`,\n    );\n  }\n\n  if (account.getCallsStatus) {\n    return account.getCallsStatus({ id, chain, client });\n  }\n\n  throw new Error(\n    `Failed to get call status, wallet ${wallet.id} does not support EIP-5792`,\n  );\n}\n\nconst receiptStatuses = {\n  \"0x0\": \"reverted\",\n  \"0x1\": \"success\",\n} as const;\n\nexport function toGetCallsStatusResponse(\n  response: GetCallsStatusRawResponse,\n): GetCallsStatusResponse {\n  const [status, statusCode] = (() => {\n    const statusCode = response.status;\n    if (statusCode >= 100 && statusCode < 200)\n      return [\"pending\", statusCode] as const;\n    if (statusCode >= 200 && statusCode < 300)\n      return [\"success\", statusCode] as const;\n    if (statusCode >= 300 && statusCode < 700)\n      return [\"failure\", statusCode] as const;\n    // @ts-expect-error: for backwards compatibility\n    if (statusCode === \"CONFIRMED\") return [\"success\", 200] as const;\n    // @ts-expect-error: for backwards compatibility\n    if (statusCode === \"PENDING\") return [\"pending\", 100] as const;\n    return [undefined, statusCode];\n  })();\n  return {\n    ...response,\n    atomic: response.atomic,\n    // @ts-expect-error: for backwards compatibility\n    chainId: response.chainId ? hexToNumber(response.chainId) : undefined,\n    receipts:\n      response.receipts?.map((receipt) => ({\n        ...receipt,\n        blockNumber: hexToBigInt(receipt.blockNumber),\n        gasUsed: hexToBigInt(receipt.gasUsed),\n        status: receiptStatuses[receipt.status as \"0x0\" | \"0x1\"],\n      })) ?? [],\n    status,\n    statusCode,\n    version: response.version,\n  };\n}\n"],"mappings":";AACA,SAASA,WAAW,EAAEC,WAAW,QAAQ,6BAA6B;AActE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,OAAO,eAAeC,cAAcA,CAAAC,IAAA,EAIZ;EAAA,IAJa;IACnCC,MAAM;IACNC,MAAM;IACNC;EAAE,CACoB,GAAAH,IAAA;EACtB,MAAMI,OAAO,GAAGH,MAAM,CAACI,UAAU,EAAE;EACnC,IAAI,CAACD,OAAO,EAAE;IACZ,MAAM,IAAIE,KAAK,2DAAAC,MAAA,CAC6CN,MAAM,CAACE,EAAE,CAAE,CACtE;EACH;EAEA,MAAMK,KAAK,GAAGP,MAAM,CAACQ,QAAQ,EAAE;EAC/B,IAAI,CAACD,KAAK,EAAE;IACV,MAAM,IAAIF,KAAK,yDAAAC,MAAA,CAC2CN,MAAM,CAACE,EAAE,CAAE,CACpE;EACH;EAEA,IAAIC,OAAO,CAACL,cAAc,EAAE;IAC1B,OAAOK,OAAO,CAACL,cAAc,CAAC;MAAEI,EAAE;MAAEK,KAAK;MAAEN;IAAM,CAAE,CAAC;EACtD;EAEA,MAAM,IAAII,KAAK,sCAAAC,MAAA,CACwBN,MAAM,CAACE,EAAE,+BAA4B,CAC3E;AACH;AAEA,MAAMO,eAAe,GAAG;EACtB,KAAK,EAAE,UAAU;EACjB,KAAK,EAAE;CACC;AAEV,OAAM,SAAUC,wBAAwBA,CACtCC,QAAmC;EAAA,IAAAC,qBAAA,EAAAC,kBAAA;EAEnC,MAAM,CAACC,MAAM,EAAEC,UAAU,CAAC,GAAG,CAAC,MAAK;IACjC,MAAMA,UAAU,GAAGJ,QAAQ,CAACG,MAAM;IAClC,IAAIC,UAAU,IAAI,GAAG,IAAIA,UAAU,GAAG,GAAG,EACvC,OAAO,CAAC,SAAS,EAAEA,UAAU,CAAU;IACzC,IAAIA,UAAU,IAAI,GAAG,IAAIA,UAAU,GAAG,GAAG,EACvC,OAAO,CAAC,SAAS,EAAEA,UAAU,CAAU;IACzC,IAAIA,UAAU,IAAI,GAAG,IAAIA,UAAU,GAAG,GAAG,EACvC,OAAO,CAAC,SAAS,EAAEA,UAAU,CAAU;IACzC;IACA,IAAIA,UAAU,KAAK,WAAW,EAAE,OAAO,CAAC,SAAS,EAAE,GAAG,CAAU;IAChE;IACA,IAAIA,UAAU,KAAK,SAAS,EAAE,OAAO,CAAC,SAAS,EAAE,GAAG,CAAU;IAC9D,OAAO,CAACC,SAAS,EAAED,UAAU,CAAC;EAChC,CAAC,EAAC,CAAE;EACJ,OAAAE,aAAA,CAAAA,aAAA,KACKN,QAAQ;IACXO,MAAM,EAAEP,QAAQ,CAACO,MAAM;IACvB;IACAC,OAAO,EAAER,QAAQ,CAACQ,OAAO,GAAGtB,WAAW,CAACc,QAAQ,CAACQ,OAAO,CAAC,GAAGH,SAAS;IACrEI,QAAQ,GAAAR,qBAAA,IAAAC,kBAAA,GACNF,QAAQ,CAACS,QAAQ,cAAAP,kBAAA,uBAAjBA,kBAAA,CAAmBQ,GAAG,CAAEC,OAAO,IAAAL,aAAA,CAAAA,aAAA,KAC1BK,OAAO;MACVC,WAAW,EAAE3B,WAAW,CAAC0B,OAAO,CAACC,WAAW,CAAC;MAC7CC,OAAO,EAAE5B,WAAW,CAAC0B,OAAO,CAACE,OAAO,CAAC;MACrCV,MAAM,EAAEL,eAAe,CAACa,OAAO,CAACR,MAAuB;IAAC,EACxD,CAAC,cAAAF,qBAAA,cAAAA,qBAAA,GAAI,EAAE;IACXE,MAAM;IACNC,UAAU;IACVU,OAAO,EAAEd,QAAQ,CAACc;EAAO;AAE7B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}