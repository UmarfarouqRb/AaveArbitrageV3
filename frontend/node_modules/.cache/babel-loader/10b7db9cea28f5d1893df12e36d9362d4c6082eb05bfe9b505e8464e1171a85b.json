{"ast":null,"code":"import { randomBytesHex } from \"../utils/random.js\";\nconst mockStorage = new Map();\n/**\n * Extracts file contents from FormData and stores it as JSON\n * @returns The storage key with filename if present\n */\nexport async function addToMockStorage(value) {\n  const key = randomBytesHex();\n  // Get the first file from FormData\n  const files = value.getAll(\"file\");\n  if (!files) {\n    throw new Error(\"No file found in FormData\");\n  }\n  // Read file contents\n  return Promise.all(files.map(async file => {\n    const text = await file.text();\n    let data;\n    try {\n      // Parse the contents as JSON\n      data = JSON.parse(text);\n    } catch (_unused) {\n      throw new Error(\"File contents must be valid JSON\");\n    }\n    // If file has a name, return key/filename format\n    const filename = \"name\" in file && file.name ? file.name.replace(\"files/\", \"\") : \"\";\n    //   console.log(\"mockStorage upload\", key, data, filename);\n    const hash = \"\".concat(key).concat(filename ? \"/\".concat(filename) : \"\");\n    mockStorage.set(hash, data);\n    return \"ipfs://\".concat(hash);\n  }));\n}\n/**\n * Retrieves parsed JSON data from storage\n * @returns The parsed data object or undefined if not found\n */\nexport function getFromMockStorage(key) {\n  const data = mockStorage.get(key);\n  //   console.log(\"mockStorage get\", key, data);\n  return data;\n}","map":{"version":3,"names":["randomBytesHex","mockStorage","Map","addToMockStorage","value","key","files","getAll","Error","Promise","all","map","file","text","data","JSON","parse","_unused","filename","name","replace","hash","concat","set","getFromMockStorage","get"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/storage/mock.ts"],"sourcesContent":["import { randomBytesHex } from \"../utils/random.js\";\n\nconst mockStorage = new Map<string, unknown>();\n\n/**\n * Extracts file contents from FormData and stores it as JSON\n * @returns The storage key with filename if present\n */\nexport async function addToMockStorage(value: FormData): Promise<string[]> {\n  const key = randomBytesHex();\n\n  // Get the first file from FormData\n  const files = value.getAll(\"file\") as File[];\n  if (!files) {\n    throw new Error(\"No file found in FormData\");\n  }\n\n  // Read file contents\n  return Promise.all(\n    files.map(async (file) => {\n      const text = await file.text();\n      let data: unknown;\n\n      try {\n        // Parse the contents as JSON\n        data = JSON.parse(text);\n      } catch {\n        throw new Error(\"File contents must be valid JSON\");\n      }\n\n      // If file has a name, return key/filename format\n      const filename =\n        \"name\" in file && file.name ? file.name.replace(\"files/\", \"\") : \"\";\n\n      //   console.log(\"mockStorage upload\", key, data, filename);\n\n      const hash = `${key}${filename ? `/${filename}` : \"\"}`;\n      mockStorage.set(hash, data);\n      return `ipfs://${hash}`;\n    }),\n  );\n}\n\n/**\n * Retrieves parsed JSON data from storage\n * @returns The parsed data object or undefined if not found\n */\nexport function getFromMockStorage(key: string): unknown {\n  const data = mockStorage.get(key);\n  //   console.log(\"mockStorage get\", key, data);\n  return data;\n}\n"],"mappings":"AAAA,SAASA,cAAc,QAAQ,oBAAoB;AAEnD,MAAMC,WAAW,GAAG,IAAIC,GAAG,EAAmB;AAE9C;;;;AAIA,OAAO,eAAeC,gBAAgBA,CAACC,KAAe;EACpD,MAAMC,GAAG,GAAGL,cAAc,EAAE;EAE5B;EACA,MAAMM,KAAK,GAAGF,KAAK,CAACG,MAAM,CAAC,MAAM,CAAW;EAC5C,IAAI,CAACD,KAAK,EAAE;IACV,MAAM,IAAIE,KAAK,CAAC,2BAA2B,CAAC;EAC9C;EAEA;EACA,OAAOC,OAAO,CAACC,GAAG,CAChBJ,KAAK,CAACK,GAAG,CAAC,MAAOC,IAAI,IAAI;IACvB,MAAMC,IAAI,GAAG,MAAMD,IAAI,CAACC,IAAI,EAAE;IAC9B,IAAIC,IAAa;IAEjB,IAAI;MACF;MACAA,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC;IACzB,CAAC,CAAC,OAAAI,OAAA,EAAM;MACN,MAAM,IAAIT,KAAK,CAAC,kCAAkC,CAAC;IACrD;IAEA;IACA,MAAMU,QAAQ,GACZ,MAAM,IAAIN,IAAI,IAAIA,IAAI,CAACO,IAAI,GAAGP,IAAI,CAACO,IAAI,CAACC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,GAAG,EAAE;IAEpE;IAEA,MAAMC,IAAI,MAAAC,MAAA,CAAMjB,GAAG,EAAAiB,MAAA,CAAGJ,QAAQ,OAAAI,MAAA,CAAOJ,QAAQ,IAAK,EAAE,CAAE;IACtDjB,WAAW,CAACsB,GAAG,CAACF,IAAI,EAAEP,IAAI,CAAC;IAC3B,iBAAAQ,MAAA,CAAiBD,IAAI;EACvB,CAAC,CAAC,CACH;AACH;AAEA;;;;AAIA,OAAM,SAAUG,kBAAkBA,CAACnB,GAAW;EAC5C,MAAMS,IAAI,GAAGb,WAAW,CAACwB,GAAG,CAACpB,GAAG,CAAC;EACjC;EACA,OAAOS,IAAI;AACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}