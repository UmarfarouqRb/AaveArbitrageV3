{"ast":null,"code":"import _objectSpread from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n/**\n * Get ERC20 tokens owned by an address\n * @example\n * ```ts\n * import { Insight } from \"thirdweb\";\n *\n * const tokens = await Insight.getOwnedTokens({\n *   client,\n *   chains: [sepolia],\n *   ownerAddress: \"0x1234567890123456789012345678901234567890\",\n * });\n * ```\n * @insight\n */\nexport async function getOwnedTokens(args) {\n  var _result$data$data, _result$data;\n  const [{\n    getV1Tokens\n  }, {\n    getThirdwebDomains\n  }, {\n    getClientFetch\n  }, {\n    assertInsightEnabled\n  }, {\n    stringify\n  }] = await Promise.all([import(\"@thirdweb-dev/insight\"), import(\"../utils/domains.js\"), import(\"../utils/fetch.js\"), import(\"./common.js\"), import(\"../utils/json.js\")]);\n  const {\n    client,\n    chains,\n    ownerAddress,\n    tokenAddresses,\n    queryOptions\n  } = args;\n  await assertInsightEnabled(chains);\n  const defaultQueryOptions = {\n    chain_id: chains.length > 0 ? chains.map(chain => chain.id) : [1],\n    include_native: \"true\",\n    include_spam: \"false\",\n    limit: 50,\n    metadata: \"true\",\n    owner_address: [ownerAddress],\n    token_address: tokenAddresses ? tokenAddresses : undefined,\n    sort_by: \"balance\"\n  };\n  const result = await getV1Tokens({\n    baseUrl: \"https://\".concat(getThirdwebDomains().insight),\n    fetch: getClientFetch(client),\n    query: _objectSpread(_objectSpread({}, defaultQueryOptions), queryOptions)\n  });\n  if (result.error) {\n    throw new Error(\"\".concat(result.response.status, \" \").concat(result.response.statusText, \" - \").concat(result.error ? stringify(result.error) : \"Unknown error\"));\n  }\n  return transformOwnedToken((_result$data$data = (_result$data = result.data) === null || _result$data === void 0 ? void 0 : _result$data.data) !== null && _result$data$data !== void 0 ? _result$data$data : []);\n}\nasync function transformOwnedToken(token) {\n  const {\n    toTokens\n  } = await import(\"../utils/units.js\");\n  return token.map(t => {\n    var _t$decimals, _t$name, _t$symbol;\n    const decimals = (_t$decimals = t.decimals) !== null && _t$decimals !== void 0 ? _t$decimals : 18;\n    const value = BigInt(t.balance);\n    return {\n      chainId: t.chain_id,\n      decimals,\n      displayValue: toTokens(value, decimals),\n      name: (_t$name = t.name) !== null && _t$name !== void 0 ? _t$name : \"\",\n      symbol: (_t$symbol = t.symbol) !== null && _t$symbol !== void 0 ? _t$symbol : \"\",\n      tokenAddress: t.token_address,\n      value\n    };\n  });\n}","map":{"version":3,"names":["getOwnedTokens","args","_result$data$data","_result$data","getV1Tokens","getThirdwebDomains","getClientFetch","assertInsightEnabled","stringify","Promise","all","client","chains","ownerAddress","tokenAddresses","queryOptions","defaultQueryOptions","chain_id","length","map","chain","id","include_native","include_spam","limit","metadata","owner_address","token_address","undefined","sort_by","result","baseUrl","concat","insight","fetch","query","_objectSpread","error","Error","response","status","statusText","transformOwnedToken","data","token","toTokens","t","_t$decimals","_t$name","_t$symbol","decimals","value","BigInt","balance","chainId","displayValue","name","symbol","tokenAddress"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/insight/get-tokens.ts"],"sourcesContent":["import type {\n  GetV1TokensData,\n  GetV1TokensResponse,\n} from \"@thirdweb-dev/insight\";\nimport type { Chain } from \"../chains/types.js\";\nimport type { ThirdwebClient } from \"../client/client.js\";\nimport type { GetWalletBalanceResult } from \"../wallets/utils/getWalletBalance.js\";\n\ntype OwnedToken = GetV1TokensResponse[\"data\"][number];\n\n/**\n * Get ERC20 tokens owned by an address\n * @example\n * ```ts\n * import { Insight } from \"thirdweb\";\n *\n * const tokens = await Insight.getOwnedTokens({\n *   client,\n *   chains: [sepolia],\n *   ownerAddress: \"0x1234567890123456789012345678901234567890\",\n * });\n * ```\n * @insight\n */\nexport async function getOwnedTokens(args: {\n  client: ThirdwebClient;\n  chains: Chain[];\n  ownerAddress: string;\n  tokenAddresses?: string[];\n  queryOptions?: Omit<\n    GetV1TokensData[\"query\"],\n    \"owner_address\" | \"chain_id\" | \"chain\"\n  >;\n}): Promise<GetWalletBalanceResult[]> {\n  const [\n    { getV1Tokens },\n    { getThirdwebDomains },\n    { getClientFetch },\n    { assertInsightEnabled },\n    { stringify },\n  ] = await Promise.all([\n    import(\"@thirdweb-dev/insight\"),\n    import(\"../utils/domains.js\"),\n    import(\"../utils/fetch.js\"),\n    import(\"./common.js\"),\n    import(\"../utils/json.js\"),\n  ]);\n\n  const { client, chains, ownerAddress, tokenAddresses, queryOptions } = args;\n\n  await assertInsightEnabled(chains);\n\n  const defaultQueryOptions: GetV1TokensData[\"query\"] = {\n    chain_id: chains.length > 0 ? chains.map((chain) => chain.id) : [1],\n    include_native: \"true\",\n    include_spam: \"false\",\n    limit: 50,\n    metadata: \"true\",\n    owner_address: [ownerAddress],\n    token_address: tokenAddresses ? tokenAddresses : undefined,\n    sort_by: \"balance\",\n  };\n\n  const result = await getV1Tokens({\n    baseUrl: `https://${getThirdwebDomains().insight}`,\n    fetch: getClientFetch(client),\n    query: {\n      ...defaultQueryOptions,\n      ...queryOptions,\n    },\n  });\n\n  if (result.error) {\n    throw new Error(\n      `${result.response.status} ${result.response.statusText} - ${result.error ? stringify(result.error) : \"Unknown error\"}`,\n    );\n  }\n\n  return transformOwnedToken(result.data?.data ?? []);\n}\n\nasync function transformOwnedToken(\n  token: OwnedToken[],\n): Promise<GetWalletBalanceResult[]> {\n  const { toTokens } = await import(\"../utils/units.js\");\n  return token.map((t) => {\n    const decimals = t.decimals ?? 18;\n    const value = BigInt(t.balance);\n    return {\n      chainId: t.chain_id,\n      decimals,\n      displayValue: toTokens(value, decimals),\n      name: t.name ?? \"\",\n      symbol: t.symbol ?? \"\",\n      tokenAddress: t.token_address,\n      value,\n    };\n  });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}