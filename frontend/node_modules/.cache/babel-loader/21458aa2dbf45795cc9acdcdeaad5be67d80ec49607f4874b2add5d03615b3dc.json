{"ast":null,"code":"import { webLocalStorage } from \"../../../../../utils/storage/webStorage.js\";\nimport { ClientScopedStorage } from \"../../../core/authentication/client-scoped-storage.js\";\nimport { IN_APP_WALLET_PATH } from \"../../../core/constants/settings.js\";\nimport { IframeCommunicator } from \"./IframeCommunicator.js\";\n/**\n * @internal\n */\nexport class InAppWalletIframeCommunicator extends IframeCommunicator {\n  /**\n   * @internal\n   */\n  constructor(_ref) {\n    let {\n      clientId,\n      baseUrl,\n      ecosystem\n    } = _ref;\n    super({\n      baseUrl,\n      clientId,\n      container: typeof document === \"undefined\" ? undefined : document.body,\n      ecosystem,\n      iframeId: IN_APP_WALLET_IFRAME_ID + ((ecosystem === null || ecosystem === void 0 ? void 0 : ecosystem.id) || \"\"),\n      link: createInAppWalletIframeLink({\n        baseUrl,\n        clientId,\n        ecosystem,\n        path: IN_APP_WALLET_PATH\n      }).href,\n      localStorage: new ClientScopedStorage({\n        clientId,\n        ecosystem,\n        storage: webLocalStorage\n      })\n    });\n    this.clientId = clientId;\n    this.ecosystem = ecosystem;\n  }\n}\n// This is the URL and ID tag of the iFrame that we communicate with\n/**\n * @internal\n */\nfunction createInAppWalletIframeLink(_ref2) {\n  let {\n    clientId,\n    baseUrl,\n    path,\n    ecosystem,\n    queryParams\n  } = _ref2;\n  const inAppWalletUrl = new URL(\"\".concat(path), baseUrl);\n  if (queryParams) {\n    for (const queryKey of Object.keys(queryParams)) {\n      var _queryParams$queryKey;\n      inAppWalletUrl.searchParams.set(queryKey, ((_queryParams$queryKey = queryParams[queryKey]) === null || _queryParams$queryKey === void 0 ? void 0 : _queryParams$queryKey.toString()) || \"\");\n    }\n  }\n  inAppWalletUrl.searchParams.set(\"clientId\", clientId);\n  if ((ecosystem === null || ecosystem === void 0 ? void 0 : ecosystem.partnerId) !== undefined) {\n    inAppWalletUrl.searchParams.set(\"partnerId\", ecosystem.partnerId);\n  }\n  if ((ecosystem === null || ecosystem === void 0 ? void 0 : ecosystem.id) !== undefined) {\n    inAppWalletUrl.searchParams.set(\"ecosystemId\", ecosystem.id);\n  }\n  return inAppWalletUrl;\n}\nconst IN_APP_WALLET_IFRAME_ID = \"thirdweb-in-app-wallet-iframe\";","map":{"version":3,"names":["webLocalStorage","ClientScopedStorage","IN_APP_WALLET_PATH","IframeCommunicator","InAppWalletIframeCommunicator","constructor","_ref","clientId","baseUrl","ecosystem","container","document","undefined","body","iframeId","IN_APP_WALLET_IFRAME_ID","id","link","createInAppWalletIframeLink","path","href","localStorage","storage","_ref2","queryParams","inAppWalletUrl","URL","concat","queryKey","Object","keys","_queryParams$queryKey","searchParams","set","toString","partnerId"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/wallets/in-app/web/utils/iFrameCommunication/InAppWalletIframeCommunicator.ts"],"sourcesContent":["import { webLocalStorage } from \"../../../../../utils/storage/webStorage.js\";\nimport { ClientScopedStorage } from \"../../../core/authentication/client-scoped-storage.js\";\nimport { IN_APP_WALLET_PATH } from \"../../../core/constants/settings.js\";\nimport type { Ecosystem } from \"../../../core/wallet/types.js\";\nimport { IframeCommunicator } from \"./IframeCommunicator.js\";\n\n/**\n * @internal\n */\nexport class InAppWalletIframeCommunicator<\n  // biome-ignore lint/suspicious/noExplicitAny: TODO: fix any\n  T extends { [key: string]: any },\n> extends IframeCommunicator<T> {\n  /**\n   * @internal\n   */\n  constructor({\n    clientId,\n    baseUrl,\n    ecosystem,\n  }: {\n    clientId: string;\n    baseUrl: string;\n    ecosystem?: Ecosystem;\n  }) {\n    super({\n      baseUrl,\n      clientId,\n      container: typeof document === \"undefined\" ? undefined : document.body,\n      ecosystem,\n      iframeId: IN_APP_WALLET_IFRAME_ID + (ecosystem?.id || \"\"),\n      link: createInAppWalletIframeLink({\n        baseUrl,\n        clientId,\n        ecosystem,\n        path: IN_APP_WALLET_PATH,\n      }).href,\n      localStorage: new ClientScopedStorage({\n        clientId,\n        ecosystem,\n        storage: webLocalStorage,\n      }),\n    });\n    this.clientId = clientId;\n    this.ecosystem = ecosystem;\n  }\n}\n\n// This is the URL and ID tag of the iFrame that we communicate with\n/**\n * @internal\n */\nfunction createInAppWalletIframeLink({\n  clientId,\n  baseUrl,\n  path,\n  ecosystem,\n  queryParams,\n}: {\n  clientId: string;\n  baseUrl: string;\n  path: string;\n  ecosystem?: Ecosystem;\n  queryParams?: { [key: string]: string | number };\n}) {\n  const inAppWalletUrl = new URL(`${path}`, baseUrl);\n  if (queryParams) {\n    for (const queryKey of Object.keys(queryParams)) {\n      inAppWalletUrl.searchParams.set(\n        queryKey,\n        queryParams[queryKey]?.toString() || \"\",\n      );\n    }\n  }\n  inAppWalletUrl.searchParams.set(\"clientId\", clientId);\n  if (ecosystem?.partnerId !== undefined) {\n    inAppWalletUrl.searchParams.set(\"partnerId\", ecosystem.partnerId);\n  }\n  if (ecosystem?.id !== undefined) {\n    inAppWalletUrl.searchParams.set(\"ecosystemId\", ecosystem.id);\n  }\n  return inAppWalletUrl;\n}\nconst IN_APP_WALLET_IFRAME_ID = \"thirdweb-in-app-wallet-iframe\";\n"],"mappings":"AAAA,SAASA,eAAe,QAAQ,4CAA4C;AAC5E,SAASC,mBAAmB,QAAQ,uDAAuD;AAC3F,SAASC,kBAAkB,QAAQ,qCAAqC;AAExE,SAASC,kBAAkB,QAAQ,yBAAyB;AAE5D;;;AAGA,OAAM,MAAOC,6BAGX,SAAQD,kBAAqB;EAC7B;;;EAGAE,YAAAC,IAAA,EAQC;IAAA,IARW;MACVC,QAAQ;MACRC,OAAO;MACPC;IAAS,CAKV,GAAAH,IAAA;IACC,KAAK,CAAC;MACJE,OAAO;MACPD,QAAQ;MACRG,SAAS,EAAE,OAAOC,QAAQ,KAAK,WAAW,GAAGC,SAAS,GAAGD,QAAQ,CAACE,IAAI;MACtEJ,SAAS;MACTK,QAAQ,EAAEC,uBAAuB,IAAI,CAAAN,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEO,EAAE,KAAI,EAAE,CAAC;MACzDC,IAAI,EAAEC,2BAA2B,CAAC;QAChCV,OAAO;QACPD,QAAQ;QACRE,SAAS;QACTU,IAAI,EAAEjB;OACP,CAAC,CAACkB,IAAI;MACPC,YAAY,EAAE,IAAIpB,mBAAmB,CAAC;QACpCM,QAAQ;QACRE,SAAS;QACTa,OAAO,EAAEtB;OACV;KACF,CAAC;IACF,IAAI,CAACO,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACE,SAAS,GAAGA,SAAS;EAC5B;;AAGF;AACA;;;AAGA,SAASS,2BAA2BA,CAAAK,KAAA,EAYnC;EAAA,IAZoC;IACnChB,QAAQ;IACRC,OAAO;IACPW,IAAI;IACJV,SAAS;IACTe;EAAW,CAOZ,GAAAD,KAAA;EACC,MAAME,cAAc,GAAG,IAAIC,GAAG,IAAAC,MAAA,CAAIR,IAAI,GAAIX,OAAO,CAAC;EAClD,IAAIgB,WAAW,EAAE;IACf,KAAK,MAAMI,QAAQ,IAAIC,MAAM,CAACC,IAAI,CAACN,WAAW,CAAC,EAAE;MAAA,IAAAO,qBAAA;MAC/CN,cAAc,CAACO,YAAY,CAACC,GAAG,CAC7BL,QAAQ,EACR,EAAAG,qBAAA,GAAAP,WAAW,CAACI,QAAQ,CAAC,cAAAG,qBAAA,uBAArBA,qBAAA,CAAuBG,QAAQ,EAAE,KAAI,EAAE,CACxC;IACH;EACF;EACAT,cAAc,CAACO,YAAY,CAACC,GAAG,CAAC,UAAU,EAAE1B,QAAQ,CAAC;EACrD,IAAI,CAAAE,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAE0B,SAAS,MAAKvB,SAAS,EAAE;IACtCa,cAAc,CAACO,YAAY,CAACC,GAAG,CAAC,WAAW,EAAExB,SAAS,CAAC0B,SAAS,CAAC;EACnE;EACA,IAAI,CAAA1B,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEO,EAAE,MAAKJ,SAAS,EAAE;IAC/Ba,cAAc,CAACO,YAAY,CAACC,GAAG,CAAC,aAAa,EAAExB,SAAS,CAACO,EAAE,CAAC;EAC9D;EACA,OAAOS,cAAc;AACvB;AACA,MAAMV,uBAAuB,GAAG,+BAA+B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}