{"ast":null,"code":"import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { CheckIcon, ExternalLinkIcon } from \"@radix-ui/react-icons\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { formatExplorerTxUrl } from \"../../../../utils/url.js\";\nimport { useCustomTheme } from \"../../../core/design-system/CustomThemeProvider.js\";\nimport { iconSize } from \"../../../core/design-system/index.js\";\nimport { useChainExplorers } from \"../../../core/hooks/others/useChainQuery.js\";\nimport { useSendTransaction } from \"../../hooks/transaction/useSendTransaction.js\";\nimport { AccentFailIcon } from \"../ConnectWallet/icons/AccentFailIcon.js\";\nimport { Container, ModalHeader } from \"../components/basic.js\";\nimport { Button } from \"../components/buttons.js\";\nimport { Spacer } from \"../components/Spacer.js\";\nimport { Spinner } from \"../components/Spinner.js\";\nimport { Text } from \"../components/text.js\";\nexport function ExecutingTxScreen(props) {\n  const sendTxCore = useSendTransaction({\n    payModal: false\n  });\n  const [txHash, setTxHash] = useState();\n  const [txError, setTxError] = useState();\n  const chainExplorers = useChainExplorers(props.tx.chain);\n  const [status, setStatus] = useState(\"loading\");\n  const theme = useCustomTheme();\n  const sendTx = useCallback(async () => {\n    setStatus(\"loading\");\n    setTxError(undefined);\n    try {\n      const txData = await sendTxCore.mutateAsync(props.tx);\n      setTxHash(txData.transactionHash);\n      props.onTxSent(txData);\n      setStatus(\"sent\");\n    } catch (e) {\n      // Do not reject the transaction here, because the user may want to try again\n      // we only reject on modal close\n      console.error(e);\n      setTxError(e);\n      setStatus(\"failed\");\n    }\n  }, [sendTxCore, props.tx, props.onTxSent]);\n  const done = useRef(false);\n  useEffect(() => {\n    if (done.current) {\n      return;\n    }\n    done.current = true;\n    sendTx();\n  }, [sendTx]);\n  return _jsxs(Container, {\n    p: \"lg\",\n    children: [_jsx(ModalHeader, {\n      onBack: props.onBack,\n      title: \"Transaction\"\n    }), _jsx(Spacer, {\n      y: \"xxl\"\n    }), _jsxs(Container, {\n      center: \"x\",\n      flex: \"row\",\n      children: [status === \"loading\" && _jsx(Spinner, {\n        color: \"accentText\",\n        size: \"xxl\"\n      }), status === \"failed\" && _jsx(AccentFailIcon, {\n        size: iconSize[\"3xl\"]\n      }), status === \"sent\" && _jsx(Container, {\n        center: \"both\",\n        flex: \"row\",\n        style: {\n          animation: \"successBounce 0.6s ease-out\",\n          backgroundColor: theme.colors.tertiaryBg,\n          border: \"2px solid \".concat(theme.colors.success),\n          borderRadius: \"50%\",\n          height: \"64px\",\n          marginBottom: \"16px\",\n          width: \"64px\"\n        },\n        children: _jsx(CheckIcon, {\n          color: theme.colors.success,\n          height: iconSize.xl,\n          style: {\n            animation: \"checkAppear 0.3s ease-out 0.3s both\"\n          },\n          width: iconSize.xl\n        })\n      })]\n    }), _jsx(Spacer, {\n      y: \"md\"\n    }), _jsxs(Text, {\n      center: true,\n      color: \"primaryText\",\n      size: \"lg\",\n      children: [status === \"loading\" && \"Sending transaction\", status === \"failed\" && \"Transaction failed\", status === \"sent\" && \"Transaction sent\"]\n    }), _jsx(Spacer, {\n      y: \"sm\"\n    }), _jsx(Text, {\n      center: true,\n      color: \"danger\",\n      size: \"sm\",\n      children: status === \"failed\" && txError ? txError.message || \"\" : \"\"\n    }), _jsx(Spacer, {\n      y: \"xl\"\n    }), status === \"failed\" && _jsx(Button, {\n      fullWidth: true,\n      onClick: sendTx,\n      variant: \"accent\",\n      children: \"Try Again\"\n    }), status === \"sent\" && _jsxs(_Fragment, {\n      children: [txHash && _jsxs(_Fragment, {\n        children: [_jsxs(Button, {\n          color: \"primaryText\",\n          fullWidth: true,\n          gap: \"xs\",\n          onClick: () => {\n            var _chainExplorers$explo, _chainExplorers$explo2;\n            props.windowAdapter.open(formatExplorerTxUrl((_chainExplorers$explo = (_chainExplorers$explo2 = chainExplorers.explorers[0]) === null || _chainExplorers$explo2 === void 0 ? void 0 : _chainExplorers$explo2.url) !== null && _chainExplorers$explo !== void 0 ? _chainExplorers$explo : \"\", txHash));\n          },\n          variant: \"secondary\",\n          children: [\"View on Explorer\", _jsx(ExternalLinkIcon, {\n            height: iconSize.sm,\n            width: iconSize.sm\n          })]\n        }), _jsx(Spacer, {\n          y: \"sm\"\n        })]\n      }), _jsx(Button, {\n        fullWidth: true,\n        onClick: props.closeModal,\n        variant: \"accent\",\n        children: \"Done\"\n      })]\n    }), _jsx(\"style\", {\n      children: \"\\n          @keyframes successBounce {\\n            0% {\\n              transform: scale(0.3);\\n              opacity: 0;\\n            }\\n            50% {\\n              transform: scale(1.05);\\n            }\\n            70% {\\n              transform: scale(0.9);\\n            }\\n            100% {\\n              transform: scale(1);\\n              opacity: 1;\\n            }\\n          }\\n\\n          @keyframes checkAppear {\\n            0% {\\n              transform: scale(0);\\n              opacity: 0;\\n            }\\n            100% {\\n              transform: scale(1);\\n              opacity: 1;\\n            }\\n          }\\n        \"\n    })]\n  });\n}","map":{"version":3,"names":["CheckIcon","ExternalLinkIcon","useCallback","useEffect","useRef","useState","formatExplorerTxUrl","useCustomTheme","iconSize","useChainExplorers","useSendTransaction","AccentFailIcon","Container","ModalHeader","Button","Spacer","Spinner","Text","ExecutingTxScreen","props","sendTxCore","payModal","txHash","setTxHash","txError","setTxError","chainExplorers","tx","chain","status","setStatus","theme","sendTx","undefined","txData","mutateAsync","transactionHash","onTxSent","e","console","error","done","current","_jsxs","p","children","_jsx","onBack","title","y","center","flex","color","size","style","animation","backgroundColor","colors","tertiaryBg","border","concat","success","borderRadius","height","marginBottom","width","xl","message","fullWidth","onClick","variant","_Fragment","gap","_chainExplorers$explo","_chainExplorers$explo2","windowAdapter","open","explorers","url","sm","closeModal"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/web/ui/TransactionButton/ExecutingScreen.tsx"],"sourcesContent":["import { CheckIcon, ExternalLinkIcon } from \"@radix-ui/react-icons\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport type { Hex } from \"viem\";\nimport type { WaitForReceiptOptions } from \"../../../../transaction/actions/wait-for-tx-receipt.js\";\nimport type { PreparedTransaction } from \"../../../../transaction/prepare-transaction.js\";\nimport { formatExplorerTxUrl } from \"../../../../utils/url.js\";\nimport type { WindowAdapter } from \"../../../core/adapters/WindowAdapter.js\";\nimport { useCustomTheme } from \"../../../core/design-system/CustomThemeProvider.js\";\nimport { iconSize } from \"../../../core/design-system/index.js\";\nimport { useChainExplorers } from \"../../../core/hooks/others/useChainQuery.js\";\nimport { useSendTransaction } from \"../../hooks/transaction/useSendTransaction.js\";\nimport { AccentFailIcon } from \"../ConnectWallet/icons/AccentFailIcon.js\";\nimport { Container, ModalHeader } from \"../components/basic.js\";\nimport { Button } from \"../components/buttons.js\";\nimport { Spacer } from \"../components/Spacer.js\";\nimport { Spinner } from \"../components/Spinner.js\";\nimport { Text } from \"../components/text.js\";\n\nexport function ExecutingTxScreen(props: {\n  tx: PreparedTransaction;\n  closeModal: () => void;\n  onTxSent: (data: WaitForReceiptOptions) => void;\n  onBack: (() => void) | undefined;\n  windowAdapter: WindowAdapter;\n}) {\n  const sendTxCore = useSendTransaction({\n    payModal: false,\n  });\n  const [txHash, setTxHash] = useState<Hex | undefined>();\n  const [txError, setTxError] = useState<Error | undefined>();\n  const chainExplorers = useChainExplorers(props.tx.chain);\n  const [status, setStatus] = useState<\"loading\" | \"failed\" | \"sent\">(\n    \"loading\",\n  );\n  const theme = useCustomTheme();\n\n  const sendTx = useCallback(async () => {\n    setStatus(\"loading\");\n    setTxError(undefined);\n    try {\n      const txData = await sendTxCore.mutateAsync(props.tx);\n      setTxHash(txData.transactionHash);\n      props.onTxSent(txData);\n      setStatus(\"sent\");\n    } catch (e) {\n      // Do not reject the transaction here, because the user may want to try again\n      // we only reject on modal close\n      console.error(e);\n      setTxError(e as Error);\n      setStatus(\"failed\");\n    }\n  }, [sendTxCore, props.tx, props.onTxSent]);\n\n  const done = useRef(false);\n  useEffect(() => {\n    if (done.current) {\n      return;\n    }\n\n    done.current = true;\n    sendTx();\n  }, [sendTx]);\n\n  return (\n    <Container p=\"lg\">\n      <ModalHeader onBack={props.onBack} title=\"Transaction\" />\n\n      <Spacer y=\"xxl\" />\n\n      <Container center=\"x\" flex=\"row\">\n        {status === \"loading\" && <Spinner color=\"accentText\" size=\"xxl\" />}\n        {status === \"failed\" && <AccentFailIcon size={iconSize[\"3xl\"]} />}\n        {status === \"sent\" && (\n          <Container\n            center=\"both\"\n            flex=\"row\"\n            style={{\n              animation: \"successBounce 0.6s ease-out\",\n              backgroundColor: theme.colors.tertiaryBg,\n              border: `2px solid ${theme.colors.success}`,\n              borderRadius: \"50%\",\n              height: \"64px\",\n              marginBottom: \"16px\",\n              width: \"64px\",\n            }}\n          >\n            <CheckIcon\n              color={theme.colors.success}\n              height={iconSize.xl}\n              style={{\n                animation: \"checkAppear 0.3s ease-out 0.3s both\",\n              }}\n              width={iconSize.xl}\n            />\n          </Container>\n        )}\n      </Container>\n\n      <Spacer y=\"md\" />\n\n      <Text center color=\"primaryText\" size=\"lg\">\n        {status === \"loading\" && \"Sending transaction\"}\n        {status === \"failed\" && \"Transaction failed\"}\n        {status === \"sent\" && \"Transaction sent\"}\n      </Text>\n      <Spacer y=\"sm\" />\n      <Text center color=\"danger\" size=\"sm\">\n        {status === \"failed\" && txError ? txError.message || \"\" : \"\"}\n      </Text>\n\n      <Spacer y=\"xl\" />\n\n      {status === \"failed\" && (\n        <Button fullWidth onClick={sendTx} variant=\"accent\">\n          Try Again\n        </Button>\n      )}\n\n      {status === \"sent\" && (\n        <>\n          {txHash && (\n            <>\n              <Button\n                color=\"primaryText\"\n                fullWidth\n                gap=\"xs\"\n                onClick={() => {\n                  props.windowAdapter.open(\n                    formatExplorerTxUrl(\n                      chainExplorers.explorers[0]?.url ?? \"\",\n                      txHash,\n                    ),\n                  );\n                }}\n                variant=\"secondary\"\n              >\n                View on Explorer\n                <ExternalLinkIcon height={iconSize.sm} width={iconSize.sm} />\n              </Button>\n              <Spacer y=\"sm\" />\n            </>\n          )}\n          <Button fullWidth onClick={props.closeModal} variant=\"accent\">\n            Done\n          </Button>\n        </>\n      )}\n\n      {/* CSS Animations */}\n      <style>\n        {`\n          @keyframes successBounce {\n            0% {\n              transform: scale(0.3);\n              opacity: 0;\n            }\n            50% {\n              transform: scale(1.05);\n            }\n            70% {\n              transform: scale(0.9);\n            }\n            100% {\n              transform: scale(1);\n              opacity: 1;\n            }\n          }\n\n          @keyframes checkAppear {\n            0% {\n              transform: scale(0);\n              opacity: 0;\n            }\n            100% {\n              transform: scale(1);\n              opacity: 1;\n            }\n          }\n        `}\n      </style>\n    </Container>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}