{"ast":null,"code":"import _objectSpread from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { buildUrl, createConfig, createInterceptors, getParseAs, mergeConfigs, mergeHeaders, setAuthParams } from \"./utils.js\";\nexport const createClient = function () {\n  let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let _config = mergeConfigs(createConfig(), config);\n  const getConfig = () => _objectSpread({}, _config);\n  const setConfig = config => {\n    _config = mergeConfigs(_config, config);\n    return getConfig();\n  };\n  const interceptors = createInterceptors();\n  const request = async options => {\n    var _ref, _options$fetch;\n    const opts = _objectSpread(_objectSpread(_objectSpread({}, _config), options), {}, {\n      fetch: (_ref = (_options$fetch = options.fetch) !== null && _options$fetch !== void 0 ? _options$fetch : _config.fetch) !== null && _ref !== void 0 ? _ref : globalThis.fetch,\n      headers: mergeHeaders(_config.headers, options.headers)\n    });\n    if (opts.security) {\n      await setAuthParams(_objectSpread(_objectSpread({}, opts), {}, {\n        security: opts.security\n      }));\n    }\n    if (opts.body && opts.bodySerializer) {\n      opts.body = opts.bodySerializer(opts.body);\n    }\n    // remove Content-Type header if body is empty to avoid sending invalid requests\n    if (opts.body === undefined || opts.body === \"\") {\n      opts.headers.delete(\"Content-Type\");\n    }\n    const url = buildUrl(opts);\n    const requestInit = _objectSpread({\n      redirect: \"follow\"\n    }, opts);\n    let request = new Request(url, requestInit);\n    for (const fn of interceptors.request._fns) {\n      if (fn) {\n        request = await fn(request, opts);\n      }\n    }\n    // fetch must be assigned here, otherwise it would throw the error:\n    // TypeError: Failed to execute 'fetch' on 'Window': Illegal invocation\n    const _fetch = opts.fetch;\n    let response = await _fetch(request);\n    for (const fn of interceptors.response._fns) {\n      if (fn) {\n        response = await fn(response, request, opts);\n      }\n    }\n    const result = {\n      request,\n      response\n    };\n    if (response.ok) {\n      var _ref2;\n      if (response.status === 204 || response.headers.get(\"Content-Length\") === \"0\") {\n        return opts.responseStyle === \"data\" ? {} : _objectSpread({\n          data: {}\n        }, result);\n      }\n      const parseAs = (_ref2 = opts.parseAs === \"auto\" ? getParseAs(response.headers.get(\"Content-Type\")) : opts.parseAs) !== null && _ref2 !== void 0 ? _ref2 : \"json\";\n      let data;\n      switch (parseAs) {\n        case \"arrayBuffer\":\n        case \"blob\":\n        case \"formData\":\n        case \"json\":\n        case \"text\":\n          data = await response[parseAs]();\n          break;\n        case \"stream\":\n          return opts.responseStyle === \"data\" ? response.body : _objectSpread({\n            data: response.body\n          }, result);\n      }\n      if (parseAs === \"json\") {\n        if (opts.responseValidator) {\n          await opts.responseValidator(data);\n        }\n        if (opts.responseTransformer) {\n          data = await opts.responseTransformer(data);\n        }\n      }\n      return opts.responseStyle === \"data\" ? data : _objectSpread({\n        data\n      }, result);\n    }\n    let error = await response.text();\n    try {\n      error = JSON.parse(error);\n    } catch (_unused) {\n      // noop\n    }\n    let finalError = error;\n    for (const fn of interceptors.error._fns) {\n      if (fn) {\n        finalError = await fn(error, response, request, opts);\n      }\n    }\n    finalError = finalError || {};\n    if (opts.throwOnError) {\n      throw finalError;\n    }\n    // TODO: we probably want to return error and improve types\n    return opts.responseStyle === \"data\" ? undefined : _objectSpread({\n      error: finalError\n    }, result);\n  };\n  return {\n    buildUrl,\n    connect: options => request(_objectSpread(_objectSpread({}, options), {}, {\n      method: \"CONNECT\"\n    })),\n    delete: options => request(_objectSpread(_objectSpread({}, options), {}, {\n      method: \"DELETE\"\n    })),\n    get: options => request(_objectSpread(_objectSpread({}, options), {}, {\n      method: \"GET\"\n    })),\n    getConfig,\n    head: options => request(_objectSpread(_objectSpread({}, options), {}, {\n      method: \"HEAD\"\n    })),\n    interceptors,\n    options: options => request(_objectSpread(_objectSpread({}, options), {}, {\n      method: \"OPTIONS\"\n    })),\n    patch: options => request(_objectSpread(_objectSpread({}, options), {}, {\n      method: \"PATCH\"\n    })),\n    post: options => request(_objectSpread(_objectSpread({}, options), {}, {\n      method: \"POST\"\n    })),\n    put: options => request(_objectSpread(_objectSpread({}, options), {}, {\n      method: \"PUT\"\n    })),\n    request,\n    setConfig,\n    trace: options => request(_objectSpread(_objectSpread({}, options), {}, {\n      method: \"TRACE\"\n    }))\n  };\n};","map":{"version":3,"names":["buildUrl","createConfig","createInterceptors","getParseAs","mergeConfigs","mergeHeaders","setAuthParams","createClient","config","arguments","length","undefined","_config","getConfig","_objectSpread","setConfig","interceptors","request","options","_ref","_options$fetch","opts","fetch","globalThis","headers","security","body","bodySerializer","delete","url","requestInit","redirect","Request","fn","_fns","_fetch","response","result","ok","_ref2","status","get","responseStyle","data","parseAs","responseValidator","responseTransformer","error","text","JSON","parse","_unused","finalError","throwOnError","connect","method","head","patch","post","put","trace"],"sources":["/home/user/Arbitrage/frontend/node_modules/@thirdweb-dev/insight/src/client/client/client.ts"],"sourcesContent":["import type { Client, Config, RequestOptions } from \"./types.js\";\nimport {\n\tbuildUrl,\n\tcreateConfig,\n\tcreateInterceptors,\n\tgetParseAs,\n\tmergeConfigs,\n\tmergeHeaders,\n\tsetAuthParams,\n} from \"./utils.js\";\n\ntype ReqInit = Omit<RequestInit, \"body\" | \"headers\"> & {\n\tbody?: any;\n\theaders: ReturnType<typeof mergeHeaders>;\n};\n\nexport const createClient = (config: Config = {}): Client => {\n\tlet _config = mergeConfigs(createConfig(), config);\n\n\tconst getConfig = (): Config => ({ ..._config });\n\n\tconst setConfig = (config: Config): Config => {\n\t\t_config = mergeConfigs(_config, config);\n\t\treturn getConfig();\n\t};\n\n\tconst interceptors = createInterceptors<\n\t\tRequest,\n\t\tResponse,\n\t\tunknown,\n\t\tRequestOptions\n\t>();\n\n\tconst request: Client[\"request\"] = async (options) => {\n\t\tconst opts = {\n\t\t\t..._config,\n\t\t\t...options,\n\t\t\tfetch: options.fetch ?? _config.fetch ?? globalThis.fetch,\n\t\t\theaders: mergeHeaders(_config.headers, options.headers),\n\t\t};\n\n\t\tif (opts.security) {\n\t\t\tawait setAuthParams({\n\t\t\t\t...opts,\n\t\t\t\tsecurity: opts.security,\n\t\t\t});\n\t\t}\n\n\t\tif (opts.body && opts.bodySerializer) {\n\t\t\topts.body = opts.bodySerializer(opts.body);\n\t\t}\n\n\t\t// remove Content-Type header if body is empty to avoid sending invalid requests\n\t\tif (opts.body === undefined || opts.body === \"\") {\n\t\t\topts.headers.delete(\"Content-Type\");\n\t\t}\n\n\t\tconst url = buildUrl(opts);\n\t\tconst requestInit: ReqInit = {\n\t\t\tredirect: \"follow\",\n\t\t\t...opts,\n\t\t};\n\n\t\tlet request = new Request(url, requestInit);\n\n\t\tfor (const fn of interceptors.request._fns) {\n\t\t\tif (fn) {\n\t\t\t\trequest = await fn(request, opts);\n\t\t\t}\n\t\t}\n\n\t\t// fetch must be assigned here, otherwise it would throw the error:\n\t\t// TypeError: Failed to execute 'fetch' on 'Window': Illegal invocation\n\t\tconst _fetch = opts.fetch!;\n\t\tlet response = await _fetch(request);\n\n\t\tfor (const fn of interceptors.response._fns) {\n\t\t\tif (fn) {\n\t\t\t\tresponse = await fn(response, request, opts);\n\t\t\t}\n\t\t}\n\n\t\tconst result = {\n\t\t\trequest,\n\t\t\tresponse,\n\t\t};\n\n\t\tif (response.ok) {\n\t\t\tif (\n\t\t\t\tresponse.status === 204 ||\n\t\t\t\tresponse.headers.get(\"Content-Length\") === \"0\"\n\t\t\t) {\n\t\t\t\treturn opts.responseStyle === \"data\"\n\t\t\t\t\t? {}\n\t\t\t\t\t: {\n\t\t\t\t\t\t\tdata: {},\n\t\t\t\t\t\t\t...result,\n\t\t\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst parseAs =\n\t\t\t\t(opts.parseAs === \"auto\"\n\t\t\t\t\t? getParseAs(response.headers.get(\"Content-Type\"))\n\t\t\t\t\t: opts.parseAs) ?? \"json\";\n\n\t\t\tlet data: any;\n\t\t\tswitch (parseAs) {\n\t\t\t\tcase \"arrayBuffer\":\n\t\t\t\tcase \"blob\":\n\t\t\t\tcase \"formData\":\n\t\t\t\tcase \"json\":\n\t\t\t\tcase \"text\":\n\t\t\t\t\tdata = await response[parseAs]();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"stream\":\n\t\t\t\t\treturn opts.responseStyle === \"data\"\n\t\t\t\t\t\t? response.body\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\tdata: response.body,\n\t\t\t\t\t\t\t\t...result,\n\t\t\t\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (parseAs === \"json\") {\n\t\t\t\tif (opts.responseValidator) {\n\t\t\t\t\tawait opts.responseValidator(data);\n\t\t\t\t}\n\n\t\t\t\tif (opts.responseTransformer) {\n\t\t\t\t\tdata = await opts.responseTransformer(data);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn opts.responseStyle === \"data\"\n\t\t\t\t? data\n\t\t\t\t: {\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\t...result,\n\t\t\t\t\t};\n\t\t}\n\n\t\tlet error = await response.text();\n\n\t\ttry {\n\t\t\terror = JSON.parse(error);\n\t\t} catch {\n\t\t\t// noop\n\t\t}\n\n\t\tlet finalError = error;\n\n\t\tfor (const fn of interceptors.error._fns) {\n\t\t\tif (fn) {\n\t\t\t\tfinalError = (await fn(error, response, request, opts)) as string;\n\t\t\t}\n\t\t}\n\n\t\tfinalError = finalError || ({} as string);\n\n\t\tif (opts.throwOnError) {\n\t\t\tthrow finalError;\n\t\t}\n\n\t\t// TODO: we probably want to return error and improve types\n\t\treturn opts.responseStyle === \"data\"\n\t\t\t? undefined\n\t\t\t: {\n\t\t\t\t\terror: finalError,\n\t\t\t\t\t...result,\n\t\t\t\t};\n\t};\n\n\treturn {\n\t\tbuildUrl,\n\t\tconnect: (options) => request({ ...options, method: \"CONNECT\" }),\n\t\tdelete: (options) => request({ ...options, method: \"DELETE\" }),\n\t\tget: (options) => request({ ...options, method: \"GET\" }),\n\t\tgetConfig,\n\t\thead: (options) => request({ ...options, method: \"HEAD\" }),\n\t\tinterceptors,\n\t\toptions: (options) => request({ ...options, method: \"OPTIONS\" }),\n\t\tpatch: (options) => request({ ...options, method: \"PATCH\" }),\n\t\tpost: (options) => request({ ...options, method: \"POST\" }),\n\t\tput: (options) => request({ ...options, method: \"PUT\" }),\n\t\trequest,\n\t\tsetConfig,\n\t\ttrace: (options) => request({ ...options, method: \"TRACE\" }),\n\t};\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}