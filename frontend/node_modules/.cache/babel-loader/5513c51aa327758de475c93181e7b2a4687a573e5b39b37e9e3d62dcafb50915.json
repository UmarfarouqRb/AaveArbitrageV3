{"ast":null,"code":"import _objectSpread from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { parseAccount } from '../../accounts/utils/parseAccount.js';\nimport { getChainId } from '../../actions/public/getChainId.js';\nimport { prepareTransactionRequest } from '../../actions/wallet/prepareTransactionRequest.js';\nimport { sendRawTransaction } from '../../actions/wallet/sendRawTransaction.js';\nimport { AccountNotFoundError } from '../../errors/account.js';\nimport { assertCurrentChain } from '../../utils/chain/assertCurrentChain.js';\nimport { getTransactionError } from '../../utils/errors/getTransactionError.js';\nimport { getAction } from '../../utils/getAction.js';\nimport { assertEip712Request } from '../utils/assertEip712Request.js';\nimport { signTransaction } from './signTransaction.js';\n/**\n * Creates, signs, and sends a new EIP712 transaction to the network.\n *\n * @param client - Client to use\n * @param parameters - {@link SendEip712TransactionParameters}\n * @returns The [Transaction](https://viem.sh/docs/glossary/terms#transaction) hash. {@link SendTransactionReturnType}\n *\n * @example\n * import { createWalletClient, custom } from 'viem'\n * import { zksync } from 'viem/chains'\n * import { sendEip712Transaction } from 'viem/zksync'\n *\n * const client = createWalletClient({\n *   chain: zksync,\n *   transport: custom(window.ethereum),\n * })\n * const hash = await sendEip712Transaction(client, {\n *   account: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n *   to: '0x70997970c51812dc3a010c7d01b50e0d17dc79c8',\n *   value: 1000000000000000000n,\n * })\n *\n * @example\n * // Account Hoisting\n * import { createWalletClient, http } from 'viem'\n * import { privateKeyToAccount } from 'viem/accounts'\n * import { zksync } from 'viem/chains'\n * import { sendEip712Transaction } from 'viem/zksync'\n *\n * const client = createWalletClient({\n *   account: privateKeyToAccount('0x…'),\n *   chain: zksync,\n *   transport: http(),\n * })\n *\n * const hash = await sendEip712Transaction(client, {\n *   to: '0x70997970c51812dc3a010c7d01b50e0d17dc79c8',\n *   value: 1000000000000000000n,\n * })\n */\nexport async function sendEip712Transaction(client, parameters) {\n  const {\n    account: account_ = client.account,\n    chain = client.chain\n  } = parameters;\n  const account = account_ ? parseAccount(account_) : client.account;\n  if (!account) throw new AccountNotFoundError({\n    docsPath: '/docs/actions/wallet/sendTransaction'\n  });\n  try {\n    assertEip712Request(parameters);\n    // Prepare the request for signing (assign appropriate fees, etc.)\n    const request = await prepareTransactionRequest(client, _objectSpread(_objectSpread({}, parameters), {}, {\n      nonceManager: account.nonceManager,\n      parameters: ['gas', 'nonce', 'fees']\n    }));\n    let chainId;\n    if (chain !== null) {\n      chainId = await getAction(client, getChainId, 'getChainId')({});\n      assertCurrentChain({\n        currentChainId: chainId,\n        chain\n      });\n    }\n    const serializedTransaction = await signTransaction(client, _objectSpread(_objectSpread({}, request), {}, {\n      chainId\n    }));\n    return await getAction(client, sendRawTransaction, 'sendRawTransaction')({\n      serializedTransaction\n    });\n  } catch (err) {\n    throw getTransactionError(err, _objectSpread(_objectSpread({}, parameters), {}, {\n      account,\n      chain: chain\n    }));\n  }\n}","map":{"version":3,"names":["parseAccount","getChainId","prepareTransactionRequest","sendRawTransaction","AccountNotFoundError","assertCurrentChain","getTransactionError","getAction","assertEip712Request","signTransaction","sendEip712Transaction","client","parameters","account","account_","chain","docsPath","request","_objectSpread","nonceManager","chainId","currentChainId","serializedTransaction","err"],"sources":["/home/user/Arbitrage/frontend/node_modules/viem/zksync/actions/sendEip712Transaction.ts"],"sourcesContent":["import type { Account } from '../../accounts/types.js'\nimport { parseAccount } from '../../accounts/utils/parseAccount.js'\nimport { getChainId } from '../../actions/public/getChainId.js'\nimport { prepareTransactionRequest } from '../../actions/wallet/prepareTransactionRequest.js'\nimport { sendRawTransaction } from '../../actions/wallet/sendRawTransaction.js'\nimport type {\n  SendTransactionErrorType,\n  SendTransactionParameters,\n  SendTransactionRequest,\n  SendTransactionReturnType,\n} from '../../actions/wallet/sendTransaction.js'\nimport type { Client } from '../../clients/createClient.js'\nimport type { Transport } from '../../clients/transports/createTransport.js'\nimport { AccountNotFoundError } from '../../errors/account.js'\nimport type { BaseError } from '../../errors/base.js'\nimport type { Chain } from '../../types/chain.js'\nimport { assertCurrentChain } from '../../utils/chain/assertCurrentChain.js'\nimport {\n  type GetTransactionErrorParameters,\n  getTransactionError,\n} from '../../utils/errors/getTransactionError.js'\nimport { getAction } from '../../utils/getAction.js'\nimport type { ChainEIP712 } from '../types/chain.js'\nimport { assertEip712Request } from '../utils/assertEip712Request.js'\nimport { signTransaction } from './signTransaction.js'\n\nexport type SendEip712TransactionParameters<\n  chain extends ChainEIP712 | undefined = ChainEIP712 | undefined,\n  account extends Account | undefined = Account | undefined,\n  chainOverride extends ChainEIP712 | undefined = ChainEIP712 | undefined,\n  request extends SendTransactionRequest<\n    chain,\n    chainOverride\n  > = SendTransactionRequest<chain, chainOverride>,\n> = SendTransactionParameters<chain, account, chainOverride, request>\n\nexport type SendEip712TransactionReturnType = SendTransactionReturnType\n\nexport type SendEip712TransactionErrorType = SendTransactionErrorType\n\n/**\n * Creates, signs, and sends a new EIP712 transaction to the network.\n *\n * @param client - Client to use\n * @param parameters - {@link SendEip712TransactionParameters}\n * @returns The [Transaction](https://viem.sh/docs/glossary/terms#transaction) hash. {@link SendTransactionReturnType}\n *\n * @example\n * import { createWalletClient, custom } from 'viem'\n * import { zksync } from 'viem/chains'\n * import { sendEip712Transaction } from 'viem/zksync'\n *\n * const client = createWalletClient({\n *   chain: zksync,\n *   transport: custom(window.ethereum),\n * })\n * const hash = await sendEip712Transaction(client, {\n *   account: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n *   to: '0x70997970c51812dc3a010c7d01b50e0d17dc79c8',\n *   value: 1000000000000000000n,\n * })\n *\n * @example\n * // Account Hoisting\n * import { createWalletClient, http } from 'viem'\n * import { privateKeyToAccount } from 'viem/accounts'\n * import { zksync } from 'viem/chains'\n * import { sendEip712Transaction } from 'viem/zksync'\n *\n * const client = createWalletClient({\n *   account: privateKeyToAccount('0x…'),\n *   chain: zksync,\n *   transport: http(),\n * })\n *\n * const hash = await sendEip712Transaction(client, {\n *   to: '0x70997970c51812dc3a010c7d01b50e0d17dc79c8',\n *   value: 1000000000000000000n,\n * })\n */\nexport async function sendEip712Transaction<\n  chain extends ChainEIP712 | undefined,\n  account extends Account | undefined,\n  const request extends SendTransactionRequest<chain, chainOverride>,\n  chainOverride extends ChainEIP712 | undefined = undefined,\n>(\n  client: Client<Transport, chain, account>,\n  parameters: SendEip712TransactionParameters<\n    chain,\n    account,\n    chainOverride,\n    request\n  >,\n): Promise<SendEip712TransactionReturnType> {\n  const { account: account_ = client.account, chain = client.chain } =\n    parameters\n\n  const account = account_ ? parseAccount(account_) : client.account\n\n  if (!account)\n    throw new AccountNotFoundError({\n      docsPath: '/docs/actions/wallet/sendTransaction',\n    })\n\n  try {\n    assertEip712Request(parameters)\n\n    // Prepare the request for signing (assign appropriate fees, etc.)\n    const request = await prepareTransactionRequest(client, {\n      ...parameters,\n      nonceManager: account.nonceManager,\n      parameters: ['gas', 'nonce', 'fees'],\n    } as any)\n\n    let chainId: number | undefined\n    if (chain !== null) {\n      chainId = await getAction(client, getChainId, 'getChainId')({})\n      assertCurrentChain({\n        currentChainId: chainId,\n        chain,\n      })\n    }\n\n    const serializedTransaction = await signTransaction(client, {\n      ...request,\n      chainId,\n    } as any)\n\n    return await getAction(\n      client,\n      sendRawTransaction,\n      'sendRawTransaction',\n    )({\n      serializedTransaction,\n    })\n  } catch (err) {\n    throw getTransactionError(err as BaseError, {\n      ...(parameters as GetTransactionErrorParameters),\n      account,\n      chain: chain as Chain,\n    })\n  }\n}\n"],"mappings":";AACA,SAASA,YAAY,QAAQ,sCAAsC;AACnE,SAASC,UAAU,QAAQ,oCAAoC;AAC/D,SAASC,yBAAyB,QAAQ,mDAAmD;AAC7F,SAASC,kBAAkB,QAAQ,4CAA4C;AAS/E,SAASC,oBAAoB,QAAQ,yBAAyB;AAG9D,SAASC,kBAAkB,QAAQ,yCAAyC;AAC5E,SAEEC,mBAAmB,QACd,2CAA2C;AAClD,SAASC,SAAS,QAAQ,0BAA0B;AAEpD,SAASC,mBAAmB,QAAQ,iCAAiC;AACrE,SAASC,eAAe,QAAQ,sBAAsB;AAgBtD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,OAAO,eAAeC,qBAAqBA,CAMzCC,MAAyC,EACzCC,UAKC;EAED,MAAM;IAAEC,OAAO,EAAEC,QAAQ,GAAGH,MAAM,CAACE,OAAO;IAAEE,KAAK,GAAGJ,MAAM,CAACI;EAAK,CAAE,GAChEH,UAAU;EAEZ,MAAMC,OAAO,GAAGC,QAAQ,GAAGd,YAAY,CAACc,QAAQ,CAAC,GAAGH,MAAM,CAACE,OAAO;EAElE,IAAI,CAACA,OAAO,EACV,MAAM,IAAIT,oBAAoB,CAAC;IAC7BY,QAAQ,EAAE;GACX,CAAC;EAEJ,IAAI;IACFR,mBAAmB,CAACI,UAAU,CAAC;IAE/B;IACA,MAAMK,OAAO,GAAG,MAAMf,yBAAyB,CAACS,MAAM,EAAAO,aAAA,CAAAA,aAAA,KACjDN,UAAU;MACbO,YAAY,EAAEN,OAAO,CAACM,YAAY;MAClCP,UAAU,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,MAAM;IAAC,EAC9B,CAAC;IAET,IAAIQ,OAA2B;IAC/B,IAAIL,KAAK,KAAK,IAAI,EAAE;MAClBK,OAAO,GAAG,MAAMb,SAAS,CAACI,MAAM,EAAEV,UAAU,EAAE,YAAY,CAAC,CAAC,EAAE,CAAC;MAC/DI,kBAAkB,CAAC;QACjBgB,cAAc,EAAED,OAAO;QACvBL;OACD,CAAC;IACJ;IAEA,MAAMO,qBAAqB,GAAG,MAAMb,eAAe,CAACE,MAAM,EAAAO,aAAA,CAAAA,aAAA,KACrDD,OAAO;MACVG;IAAO,EACD,CAAC;IAET,OAAO,MAAMb,SAAS,CACpBI,MAAM,EACNR,kBAAkB,EAClB,oBAAoB,CACrB,CAAC;MACAmB;KACD,CAAC;EACJ,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZ,MAAMjB,mBAAmB,CAACiB,GAAgB,EAAAL,aAAA,CAAAA,aAAA,KACpCN,UAA4C;MAChDC,OAAO;MACPE,KAAK,EAAEA;IAAc,EACtB,CAAC;EACJ;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}