{"ast":null,"code":"import { ethereum } from \"../../chains/chain-definitions/ethereum.js\";\nimport { getContract } from \"../../contract/contract.js\";\nimport { getAddress, isAddress } from \"../../utils/address.js\";\nimport { toHex } from \"../../utils/encoding/hex.js\";\nimport { namehash } from \"../../utils/ens/namehash.js\";\nimport { packetToBytes } from \"../../utils/ens/packetToBytes.js\";\nimport { withCache } from \"../../utils/promise/withCache.js\";\nimport { encodeAddr } from \"./__generated__/AddressResolver/read/addr.js\";\nimport { resolve } from \"./__generated__/UniversalResolver/read/resolve.js\";\nimport { UNIVERSAL_RESOLVER_ADDRESS } from \"./constants.js\";\n/**\n * Resolves an ENS name to an Ethereum address.\n * @param options - The options for resolving an ENS address.\n * @example\n * ```ts\n * import { resolveAddress } from \"thirdweb/extensions/ens\";\n * const address = await resolveAddress({\n *    client,\n *    name: \"vitalik.eth\",\n * });\n * ```\n *\n * Resolve an address to a Basename.\n * ```ts\n * import { resolveAddress, BASENAME_RESOLVER_ADDRESS } from \"thirdweb/extensions/ens\";\n * import { base } from \"thirdweb/chains\";\n * const address = await resolveAddress({\n *    client,\n *    name: \"myk.base.eth\",\n *    resolverAddress: BASENAME_RESOLVER_ADDRESS,\n *    resolverChain: base,\n * });\n * ```\n * @extension ENS\n * @returns A promise that resolves to the Ethereum address.\n */\nexport async function resolveAddress(options) {\n  const {\n    client,\n    name,\n    resolverAddress,\n    resolverChain\n  } = options;\n  if (isAddress(name)) {\n    return getAddress(name);\n  }\n  return withCache(async () => {\n    const contract = getContract({\n      address: resolverAddress || UNIVERSAL_RESOLVER_ADDRESS,\n      chain: resolverChain || ethereum,\n      client\n    });\n    const data = encodeAddr({\n      name: namehash(name)\n    });\n    const result = await resolve({\n      contract,\n      data,\n      name: toHex(packetToBytes(name))\n    });\n    const resolvedAddress = getAddress(\"0x\".concat(result[0].slice(-40)));\n    return resolvedAddress;\n  }, {\n    cacheKey: \"ens:addr:\".concat((resolverChain === null || resolverChain === void 0 ? void 0 : resolverChain.id) || 1, \":\").concat(name),\n    // 1min cache\n    cacheTime: 60 * 1000\n  });\n}","map":{"version":3,"names":["ethereum","getContract","getAddress","isAddress","toHex","namehash","packetToBytes","withCache","encodeAddr","resolve","UNIVERSAL_RESOLVER_ADDRESS","resolveAddress","options","client","name","resolverAddress","resolverChain","contract","address","chain","data","result","resolvedAddress","concat","slice","cacheKey","id","cacheTime"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/extensions/ens/resolve-address.ts"],"sourcesContent":["import { ethereum } from \"../../chains/chain-definitions/ethereum.js\";\nimport type { Chain } from \"../../chains/types.js\";\nimport type { ThirdwebClient } from \"../../client/client.js\";\nimport { getContract } from \"../../contract/contract.js\";\nimport { getAddress, isAddress } from \"../../utils/address.js\";\nimport { toHex } from \"../../utils/encoding/hex.js\";\nimport { namehash } from \"../../utils/ens/namehash.js\";\nimport { packetToBytes } from \"../../utils/ens/packetToBytes.js\";\nimport { withCache } from \"../../utils/promise/withCache.js\";\nimport { encodeAddr } from \"./__generated__/AddressResolver/read/addr.js\";\nimport { resolve } from \"./__generated__/UniversalResolver/read/resolve.js\";\nimport { UNIVERSAL_RESOLVER_ADDRESS } from \"./constants.js\";\n\n/**\n * @extension ENS\n */\nexport type ResolveAddressOptions = {\n  client: ThirdwebClient;\n  name: string;\n  resolverAddress?: string;\n  resolverChain?: Chain;\n};\n\n/**\n * Resolves an ENS name to an Ethereum address.\n * @param options - The options for resolving an ENS address.\n * @example\n * ```ts\n * import { resolveAddress } from \"thirdweb/extensions/ens\";\n * const address = await resolveAddress({\n *    client,\n *    name: \"vitalik.eth\",\n * });\n * ```\n *\n * Resolve an address to a Basename.\n * ```ts\n * import { resolveAddress, BASENAME_RESOLVER_ADDRESS } from \"thirdweb/extensions/ens\";\n * import { base } from \"thirdweb/chains\";\n * const address = await resolveAddress({\n *    client,\n *    name: \"myk.base.eth\",\n *    resolverAddress: BASENAME_RESOLVER_ADDRESS,\n *    resolverChain: base,\n * });\n * ```\n * @extension ENS\n * @returns A promise that resolves to the Ethereum address.\n */\nexport async function resolveAddress(options: ResolveAddressOptions) {\n  const { client, name, resolverAddress, resolverChain } = options;\n  if (isAddress(name)) {\n    return getAddress(name);\n  }\n  return withCache(\n    async () => {\n      const contract = getContract({\n        address: resolverAddress || UNIVERSAL_RESOLVER_ADDRESS,\n        chain: resolverChain || ethereum,\n        client,\n      });\n      const data = encodeAddr({ name: namehash(name) });\n      const result = await resolve({\n        contract,\n        data,\n        name: toHex(packetToBytes(name)),\n      });\n      const resolvedAddress = getAddress(`0x${result[0].slice(-40)}`);\n\n      return resolvedAddress;\n    },\n    {\n      cacheKey: `ens:addr:${resolverChain?.id || 1}:${name}`,\n      // 1min cache\n      cacheTime: 60 * 1000,\n    },\n  );\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,4CAA4C;AAGrE,SAASC,WAAW,QAAQ,4BAA4B;AACxD,SAASC,UAAU,EAAEC,SAAS,QAAQ,wBAAwB;AAC9D,SAASC,KAAK,QAAQ,6BAA6B;AACnD,SAASC,QAAQ,QAAQ,6BAA6B;AACtD,SAASC,aAAa,QAAQ,kCAAkC;AAChE,SAASC,SAAS,QAAQ,kCAAkC;AAC5D,SAASC,UAAU,QAAQ,8CAA8C;AACzE,SAASC,OAAO,QAAQ,mDAAmD;AAC3E,SAASC,0BAA0B,QAAQ,gBAAgB;AAY3D;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,OAAO,eAAeC,cAAcA,CAACC,OAA8B;EACjE,MAAM;IAAEC,MAAM;IAAEC,IAAI;IAAEC,eAAe;IAAEC;EAAa,CAAE,GAAGJ,OAAO;EAChE,IAAIT,SAAS,CAACW,IAAI,CAAC,EAAE;IACnB,OAAOZ,UAAU,CAACY,IAAI,CAAC;EACzB;EACA,OAAOP,SAAS,CACd,YAAW;IACT,MAAMU,QAAQ,GAAGhB,WAAW,CAAC;MAC3BiB,OAAO,EAAEH,eAAe,IAAIL,0BAA0B;MACtDS,KAAK,EAAEH,aAAa,IAAIhB,QAAQ;MAChCa;KACD,CAAC;IACF,MAAMO,IAAI,GAAGZ,UAAU,CAAC;MAAEM,IAAI,EAAET,QAAQ,CAACS,IAAI;IAAC,CAAE,CAAC;IACjD,MAAMO,MAAM,GAAG,MAAMZ,OAAO,CAAC;MAC3BQ,QAAQ;MACRG,IAAI;MACJN,IAAI,EAAEV,KAAK,CAACE,aAAa,CAACQ,IAAI,CAAC;KAChC,CAAC;IACF,MAAMQ,eAAe,GAAGpB,UAAU,MAAAqB,MAAA,CAAMF,MAAM,CAAC,CAAC,CAAC,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAE,CAAC;IAE/D,OAAOF,eAAe;EACxB,CAAC,EACD;IACEG,QAAQ,cAAAF,MAAA,CAAc,CAAAP,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEU,EAAE,KAAI,CAAC,OAAAH,MAAA,CAAIT,IAAI,CAAE;IACtD;IACAa,SAAS,EAAE,EAAE,GAAG;GACjB,CACF;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}