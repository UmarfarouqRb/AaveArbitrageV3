{"ast":null,"code":"\"use client\";\n\nimport _objectSpread from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"iconResolver\", \"loadingComponent\", \"fallbackComponent\", \"queryOptions\", \"client\"];\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { getChainMetadata } from \"../../../../../chains/utils.js\";\nimport { getFunctionId } from \"../../../../../utils/function-id.js\";\nimport { resolveScheme } from \"../../../../../utils/ipfs.js\";\nimport { useChainContext } from \"./provider.js\";\n/**\n * This component tries to resolve the icon of a given chain, then return an image.\n * @returns an <img /> with the src of the chain icon\n *\n * @example\n * ### Basic usage\n * ```tsx\n * import { ChainProvider, ChainIcon } from \"thirdweb/react\";\n *\n * <ChainProvider chain={chain}>\n *   <ChainIcon />\n * </ChainProvider>\n * ```\n *\n * Result: An <img /> component with the src of the icon\n * ```html\n * <img src=\"chain-icon.png\" />\n * ```\n *\n * ### Override the icon with the `iconResolver` prop\n * If you already have the icon url, you can skip the network requests and pass it directly to the ChainIcon\n * ```tsx\n * <ChainIcon iconResolver=\"/ethereum-icon.png\" />\n * ```\n *\n * You can also pass in your own custom (async) function that retrieves the icon url\n * ```tsx\n * const getIcon = async () => {\n *   const icon = getIconFromCoinMarketCap(chainId, etc);\n *   return icon;\n * };\n *\n * <ChainIcon iconResolver={getIcon} />\n * ```\n *\n * ### Show a loading sign while the icon is being loaded\n * ```tsx\n * <ChainIcon loadingComponent={<Spinner />} />\n * ```\n *\n * ### Fallback to a dummy image if the chain icon fails to resolve\n * ```tsx\n * <ChainIcon fallbackComponent={<img src=\"blank-image.png\" />} />\n * ```\n *\n * ### Usage with queryOptions\n * ChainIcon uses useQuery() from tanstack query internally.\n * It allows you to pass a custom queryOptions of your choice for more control of the internal fetching logic\n * ```tsx\n * <ChainIcon queryOptions={{ enabled: someLogic, retry: 3, }} />\n * ```\n *\n * @component\n * @chain\n * @beta\n */\nexport function ChainIcon(_ref) {\n  let {\n      iconResolver,\n      loadingComponent,\n      fallbackComponent,\n      queryOptions,\n      client\n    } = _ref,\n    restProps = _objectWithoutProperties(_ref, _excluded);\n  const {\n    chain\n  } = useChainContext();\n  const iconQuery = useQuery(_objectSpread({\n    queryFn: async () => fetchChainIcon({\n      chain,\n      client,\n      iconResolver\n    }),\n    queryKey: getQueryKeys({\n      chainId: chain.id,\n      iconResolver\n    })\n  }, queryOptions));\n  if (iconQuery.isLoading) {\n    return loadingComponent || null;\n  }\n  if (!iconQuery.data) {\n    return fallbackComponent || null;\n  }\n  return _jsx(\"img\", _objectSpread(_objectSpread({\n    src: iconQuery.data\n  }, restProps), {}, {\n    alt: restProps.alt\n  }));\n}\n/**\n * @internal Exported for tests only\n */\nexport async function fetchChainIcon(props) {\n  var _chain$icon;\n  const {\n    chain,\n    client,\n    iconResolver\n  } = props;\n  if (typeof iconResolver === \"string\") {\n    return iconResolver;\n  }\n  if (typeof iconResolver === \"function\") {\n    return iconResolver();\n  }\n  // Check if the chain object already has \"icon\"\n  if ((_chain$icon = chain.icon) !== null && _chain$icon !== void 0 && _chain$icon.url) {\n    return resolveScheme({\n      client,\n      uri: chain.icon.url\n    });\n  }\n  const possibleUrl = await getChainMetadata(chain).then(data => {\n    var _data$icon;\n    return (_data$icon = data.icon) === null || _data$icon === void 0 ? void 0 : _data$icon.url;\n  }).catch(() => undefined);\n  if (!possibleUrl) {\n    throw new Error(\"Failed to resolve icon for chain\");\n  }\n  return resolveScheme({\n    client,\n    uri: possibleUrl\n  });\n}\n/**\n * @internal\n */\nexport function getQueryKeys(props) {\n  const {\n    chainId,\n    iconResolver\n  } = props;\n  return [\"_internal_chain_icon_\", chainId, {\n    resolver: typeof iconResolver === \"string\" ? iconResolver : typeof iconResolver === \"function\" ? getFunctionId(iconResolver) : undefined\n  }];\n}","map":{"version":3,"names":["_objectSpread","_objectWithoutProperties","_excluded","useQuery","getChainMetadata","getFunctionId","resolveScheme","useChainContext","ChainIcon","_ref","iconResolver","loadingComponent","fallbackComponent","queryOptions","client","restProps","chain","iconQuery","queryFn","fetchChainIcon","queryKey","getQueryKeys","chainId","id","isLoading","data","_jsx","src","alt","props","_chain$icon","icon","url","uri","possibleUrl","then","_data$icon","catch","undefined","Error","resolver"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/web/ui/prebuilt/Chain/icon.tsx"],"sourcesContent":["\"use client\";\n\nimport { type UseQueryOptions, useQuery } from \"@tanstack/react-query\";\nimport type { JSX } from \"react\";\nimport type { Chain } from \"../../../../../chains/types.js\";\nimport { getChainMetadata } from \"../../../../../chains/utils.js\";\nimport type { ThirdwebClient } from \"../../../../../client/client.js\";\nimport { getFunctionId } from \"../../../../../utils/function-id.js\";\nimport { resolveScheme } from \"../../../../../utils/ipfs.js\";\nimport { useChainContext } from \"./provider.js\";\n\n/**\n * Props for the ChainIcon component\n * @chain\n * @component\n */\nexport interface ChainIconProps\n  extends Omit<React.ImgHTMLAttributes<HTMLImageElement>, \"src\"> {\n  /**\n   * You need a ThirdwebClient to resolve the icon which is hosted on IPFS.\n   * (since most chain icons are hosted on IPFS, loading them via thirdweb gateway will ensure better performance)\n   */\n  client: ThirdwebClient;\n  /**\n   * This prop can be a string or a (async) function that resolves to a string, representing the icon url of the chain\n   * This is particularly useful if you already have a way to fetch the chain icon.\n   */\n  iconResolver?: string | (() => string) | (() => Promise<string>);\n  /**\n   * This component will be shown while the avatar of the icon is being fetched\n   * If not passed, the component will return `null`.\n   *\n   * You can pass a loading sign or spinner to this prop.\n   * @example\n   * ```tsx\n   * <ChainIcon loadingComponent={<Spinner />} />\n   * ```\n   */\n  loadingComponent?: JSX.Element;\n  /**\n   * This component will be shown if the request for fetching the avatar is done\n   * but could not retreive any result.\n   * You can pass a dummy avatar/image to this prop.\n   *\n   * If not passed, the component will return `null`\n   *\n   * @example\n   * ```tsx\n   * <ChainIcon fallbackComponent={<DummyImage />} />\n   * ```\n   */\n  fallbackComponent?: JSX.Element;\n\n  /**\n   * Optional query options for `useQuery`\n   */\n  queryOptions?: Omit<UseQueryOptions<string>, \"queryFn\" | \"queryKey\">;\n}\n\n/**\n * This component tries to resolve the icon of a given chain, then return an image.\n * @returns an <img /> with the src of the chain icon\n *\n * @example\n * ### Basic usage\n * ```tsx\n * import { ChainProvider, ChainIcon } from \"thirdweb/react\";\n *\n * <ChainProvider chain={chain}>\n *   <ChainIcon />\n * </ChainProvider>\n * ```\n *\n * Result: An <img /> component with the src of the icon\n * ```html\n * <img src=\"chain-icon.png\" />\n * ```\n *\n * ### Override the icon with the `iconResolver` prop\n * If you already have the icon url, you can skip the network requests and pass it directly to the ChainIcon\n * ```tsx\n * <ChainIcon iconResolver=\"/ethereum-icon.png\" />\n * ```\n *\n * You can also pass in your own custom (async) function that retrieves the icon url\n * ```tsx\n * const getIcon = async () => {\n *   const icon = getIconFromCoinMarketCap(chainId, etc);\n *   return icon;\n * };\n *\n * <ChainIcon iconResolver={getIcon} />\n * ```\n *\n * ### Show a loading sign while the icon is being loaded\n * ```tsx\n * <ChainIcon loadingComponent={<Spinner />} />\n * ```\n *\n * ### Fallback to a dummy image if the chain icon fails to resolve\n * ```tsx\n * <ChainIcon fallbackComponent={<img src=\"blank-image.png\" />} />\n * ```\n *\n * ### Usage with queryOptions\n * ChainIcon uses useQuery() from tanstack query internally.\n * It allows you to pass a custom queryOptions of your choice for more control of the internal fetching logic\n * ```tsx\n * <ChainIcon queryOptions={{ enabled: someLogic, retry: 3, }} />\n * ```\n *\n * @component\n * @chain\n * @beta\n */\nexport function ChainIcon({\n  iconResolver,\n  loadingComponent,\n  fallbackComponent,\n  queryOptions,\n  client,\n  ...restProps\n}: ChainIconProps) {\n  const { chain } = useChainContext();\n  const iconQuery = useQuery({\n    queryFn: async () => fetchChainIcon({ chain, client, iconResolver }),\n    queryKey: getQueryKeys({ chainId: chain.id, iconResolver }),\n    ...queryOptions,\n  });\n\n  if (iconQuery.isLoading) {\n    return loadingComponent || null;\n  }\n\n  if (!iconQuery.data) {\n    return fallbackComponent || null;\n  }\n\n  return <img src={iconQuery.data} {...restProps} alt={restProps.alt} />;\n}\n\n/**\n * @internal Exported for tests only\n */\nexport async function fetchChainIcon(props: {\n  chain: Chain;\n  client: ThirdwebClient;\n  iconResolver?: string | (() => string) | (() => Promise<string>);\n}) {\n  const { chain, client, iconResolver } = props;\n  if (typeof iconResolver === \"string\") {\n    return iconResolver;\n  }\n  if (typeof iconResolver === \"function\") {\n    return iconResolver();\n  }\n  // Check if the chain object already has \"icon\"\n  if (chain.icon?.url) {\n    return resolveScheme({ client, uri: chain.icon.url });\n  }\n  const possibleUrl = await getChainMetadata(chain)\n    .then((data) => data.icon?.url)\n    .catch(() => undefined);\n  if (!possibleUrl) {\n    throw new Error(\"Failed to resolve icon for chain\");\n  }\n  return resolveScheme({ client, uri: possibleUrl });\n}\n\n/**\n * @internal\n */\nexport function getQueryKeys(props: {\n  chainId: number;\n  iconResolver?: string | (() => string) | (() => Promise<string>);\n}) {\n  const { chainId, iconResolver } = props;\n  return [\n    \"_internal_chain_icon_\",\n    chainId,\n    {\n      resolver:\n        typeof iconResolver === \"string\"\n          ? iconResolver\n          : typeof iconResolver === \"function\"\n            ? getFunctionId(iconResolver)\n            : undefined,\n    },\n  ] as const;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}