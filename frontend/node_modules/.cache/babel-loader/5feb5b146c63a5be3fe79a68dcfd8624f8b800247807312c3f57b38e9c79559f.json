{"ast":null,"code":"import { stringify } from \"../json.js\";\nconst CONNECT_PARAMS_MAP_KEY = \"tw:connected-wallet-params\";\n/**\n * Save the connection params to storage for given wallet id\n * It saves an object with wallet id as key and params as value to storage on CONNECT_PARAMS_MAP_KEY\n * CONNECT_PARAMS_MAP_KEY: { walletId1: walletId1Params, walletId2: walletId2Params, ... }\n *\n * @param walletId\n * @param params\n * @internal\n */\nexport async function saveConnectParamsToStorage(storage, walletId, params) {\n  // params must be stringifiable\n  if (!isStringifiable(params)) {\n    throw new Error(\"given params are not stringifiable\");\n  }\n  const currentValueStr = await storage.getItem(CONNECT_PARAMS_MAP_KEY);\n  let value;\n  if (currentValueStr) {\n    try {\n      value = JSON.parse(currentValueStr);\n    } catch (_unused) {\n      value = {};\n    }\n    value[walletId] = params;\n  } else {\n    value = {\n      [walletId]: params\n    };\n  }\n  storage.setItem(CONNECT_PARAMS_MAP_KEY, stringify(value));\n}\n/**\n * Save the connection params to storage for given wallet id\n * It saves an object with wallet id as key and params as value to storage on CONNECT_PARAMS_MAP_KEY\n * CONNECT_PARAMS_MAP_KEY: { walletId1: walletId1Params, walletId2: walletId2Params, ... }\n *\n * @param walletId\n * @param params\n * @internal\n */\nexport async function deleteConnectParamsFromStorage(storage, walletId) {\n  const currentValueStr = await storage.getItem(CONNECT_PARAMS_MAP_KEY);\n  let value;\n  if (currentValueStr) {\n    try {\n      value = JSON.parse(currentValueStr);\n    } catch (_unused2) {\n      value = {};\n    }\n    delete value[walletId];\n    storage.setItem(CONNECT_PARAMS_MAP_KEY, stringify(value));\n  }\n}\n/**\n * Get the saved connection params from storage for given wallet id\n * @internal\n */\nexport async function getSavedConnectParamsFromStorage(storage, walletId) {\n  const valueStr = await storage.getItem(CONNECT_PARAMS_MAP_KEY);\n  if (!valueStr) {\n    return null;\n  }\n  try {\n    const value = JSON.parse(valueStr);\n    if (value !== null && value !== void 0 && value[walletId]) {\n      return value[walletId];\n    }\n    return null;\n  } catch (_unused3) {\n    return null;\n  }\n}\nfunction isStringifiable(value) {\n  try {\n    stringify(value);\n    return true;\n  } catch (_unused4) {\n    return false;\n  }\n}","map":{"version":3,"names":["stringify","CONNECT_PARAMS_MAP_KEY","saveConnectParamsToStorage","storage","walletId","params","isStringifiable","Error","currentValueStr","getItem","value","JSON","parse","_unused","setItem","deleteConnectParamsFromStorage","_unused2","getSavedConnectParamsFromStorage","valueStr","_unused3","_unused4"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/utils/storage/walletStorage.ts"],"sourcesContent":["import { stringify } from \"../json.js\";\nimport type { AsyncStorage } from \"./AsyncStorage.js\";\n\nconst CONNECT_PARAMS_MAP_KEY = \"tw:connected-wallet-params\";\n\n/**\n * Save the connection params to storage for given wallet id\n * It saves an object with wallet id as key and params as value to storage on CONNECT_PARAMS_MAP_KEY\n * CONNECT_PARAMS_MAP_KEY: { walletId1: walletId1Params, walletId2: walletId2Params, ... }\n *\n * @param walletId\n * @param params\n * @internal\n */\nexport async function saveConnectParamsToStorage<T extends object>(\n  storage: AsyncStorage,\n  walletId: string,\n  params: T,\n) {\n  // params must be stringifiable\n  if (!isStringifiable(params)) {\n    throw new Error(\"given params are not stringifiable\");\n  }\n\n  const currentValueStr = await storage.getItem(CONNECT_PARAMS_MAP_KEY);\n\n  let value: Record<string, T>;\n\n  if (currentValueStr) {\n    try {\n      value = JSON.parse(currentValueStr);\n    } catch {\n      value = {};\n    }\n\n    value[walletId] = params;\n  } else {\n    value = {\n      [walletId]: params,\n    };\n  }\n\n  storage.setItem(CONNECT_PARAMS_MAP_KEY, stringify(value));\n}\n\n/**\n * Save the connection params to storage for given wallet id\n * It saves an object with wallet id as key and params as value to storage on CONNECT_PARAMS_MAP_KEY\n * CONNECT_PARAMS_MAP_KEY: { walletId1: walletId1Params, walletId2: walletId2Params, ... }\n *\n * @param walletId\n * @param params\n * @internal\n */\nexport async function deleteConnectParamsFromStorage(\n  storage: AsyncStorage,\n  walletId: string,\n) {\n  const currentValueStr = await storage.getItem(CONNECT_PARAMS_MAP_KEY);\n\n  let value: Record<string, object>;\n\n  if (currentValueStr) {\n    try {\n      value = JSON.parse(currentValueStr);\n    } catch {\n      value = {};\n    }\n\n    delete value[walletId];\n    storage.setItem(CONNECT_PARAMS_MAP_KEY, stringify(value));\n  }\n}\n\n/**\n * Get the saved connection params from storage for given wallet id\n * @internal\n */\nexport async function getSavedConnectParamsFromStorage<T extends object>(\n  storage: AsyncStorage,\n  walletId: string,\n): Promise<T | null> {\n  const valueStr = await storage.getItem(CONNECT_PARAMS_MAP_KEY);\n\n  if (!valueStr) {\n    return null;\n  }\n\n  try {\n    const value = JSON.parse(valueStr);\n\n    if (value?.[walletId]) {\n      return value[walletId];\n    }\n\n    return null;\n  } catch {\n    return null;\n  }\n}\n\nfunction isStringifiable(value: unknown): boolean {\n  try {\n    stringify(value);\n    return true;\n  } catch {\n    return false;\n  }\n}\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,YAAY;AAGtC,MAAMC,sBAAsB,GAAG,4BAA4B;AAE3D;;;;;;;;;AASA,OAAO,eAAeC,0BAA0BA,CAC9CC,OAAqB,EACrBC,QAAgB,EAChBC,MAAS;EAET;EACA,IAAI,CAACC,eAAe,CAACD,MAAM,CAAC,EAAE;IAC5B,MAAM,IAAIE,KAAK,CAAC,oCAAoC,CAAC;EACvD;EAEA,MAAMC,eAAe,GAAG,MAAML,OAAO,CAACM,OAAO,CAACR,sBAAsB,CAAC;EAErE,IAAIS,KAAwB;EAE5B,IAAIF,eAAe,EAAE;IACnB,IAAI;MACFE,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACJ,eAAe,CAAC;IACrC,CAAC,CAAC,OAAAK,OAAA,EAAM;MACNH,KAAK,GAAG,EAAE;IACZ;IAEAA,KAAK,CAACN,QAAQ,CAAC,GAAGC,MAAM;EAC1B,CAAC,MAAM;IACLK,KAAK,GAAG;MACN,CAACN,QAAQ,GAAGC;KACb;EACH;EAEAF,OAAO,CAACW,OAAO,CAACb,sBAAsB,EAAED,SAAS,CAACU,KAAK,CAAC,CAAC;AAC3D;AAEA;;;;;;;;;AASA,OAAO,eAAeK,8BAA8BA,CAClDZ,OAAqB,EACrBC,QAAgB;EAEhB,MAAMI,eAAe,GAAG,MAAML,OAAO,CAACM,OAAO,CAACR,sBAAsB,CAAC;EAErE,IAAIS,KAA6B;EAEjC,IAAIF,eAAe,EAAE;IACnB,IAAI;MACFE,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACJ,eAAe,CAAC;IACrC,CAAC,CAAC,OAAAQ,QAAA,EAAM;MACNN,KAAK,GAAG,EAAE;IACZ;IAEA,OAAOA,KAAK,CAACN,QAAQ,CAAC;IACtBD,OAAO,CAACW,OAAO,CAACb,sBAAsB,EAAED,SAAS,CAACU,KAAK,CAAC,CAAC;EAC3D;AACF;AAEA;;;;AAIA,OAAO,eAAeO,gCAAgCA,CACpDd,OAAqB,EACrBC,QAAgB;EAEhB,MAAMc,QAAQ,GAAG,MAAMf,OAAO,CAACM,OAAO,CAACR,sBAAsB,CAAC;EAE9D,IAAI,CAACiB,QAAQ,EAAE;IACb,OAAO,IAAI;EACb;EAEA,IAAI;IACF,MAAMR,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACM,QAAQ,CAAC;IAElC,IAAIR,KAAK,aAALA,KAAK,eAALA,KAAK,CAAGN,QAAQ,CAAC,EAAE;MACrB,OAAOM,KAAK,CAACN,QAAQ,CAAC;IACxB;IAEA,OAAO,IAAI;EACb,CAAC,CAAC,OAAAe,QAAA,EAAM;IACN,OAAO,IAAI;EACb;AACF;AAEA,SAASb,eAAeA,CAACI,KAAc;EACrC,IAAI;IACFV,SAAS,CAACU,KAAK,CAAC;IAChB,OAAO,IAAI;EACb,CAAC,CAAC,OAAAU,QAAA,EAAM;IACN,OAAO,KAAK;EACd;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}