{"ast":null,"code":"/**\n * Create a readonly store whose value is computed from other stores\n * @param computation - The function to compute the value of the store\n * @param dependencies - The stores it depends on\n * @example\n * ```ts\n * const foo = computed(() => bar.getValue() + baz.getValue(), [bar, baz]);\n * ```\n * @returns A store object\n */\nexport function computedStore(\n// pass the values of the dependencies to the computation function\ncomputation,\n// biome-ignore lint/suspicious/noExplicitAny: library function that accepts any store type\ndependencies) {\n  const listeners = new Set();\n  let value = computation();\n  const notify = () => {\n    for (const listener of listeners) {\n      listener();\n    }\n  };\n  const setValue = newValue => {\n    value = newValue;\n    notify();\n  };\n  // when any of the dependencies change, recompute the value and set it\n  for (const store of dependencies) {\n    store.subscribe(() => {\n      setValue(computation());\n    });\n  }\n  return {\n    getValue() {\n      return value;\n    },\n    subscribe(listener) {\n      listeners.add(listener);\n      return () => {\n        listeners.delete(listener);\n      };\n    }\n  };\n}","map":{"version":3,"names":["computedStore","computation","dependencies","listeners","Set","value","notify","listener","setValue","newValue","store","subscribe","getValue","add","delete"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/reactive/computedStore.ts"],"sourcesContent":["import type { Store } from \"./store.js\";\n\nexport type ReadonlyStore<T> = {\n  getValue(): T;\n  subscribe(listener: () => void): () => void;\n};\n\n/**\n * Create a readonly store whose value is computed from other stores\n * @param computation - The function to compute the value of the store\n * @param dependencies - The stores it depends on\n * @example\n * ```ts\n * const foo = computed(() => bar.getValue() + baz.getValue(), [bar, baz]);\n * ```\n * @returns A store object\n */\nexport function computedStore<T>(\n  // pass the values of the dependencies to the computation function\n  computation: () => T,\n  // biome-ignore lint/suspicious/noExplicitAny: library function that accepts any store type\n  dependencies: (Store<any> | ReadonlyStore<any>)[],\n): ReadonlyStore<T> {\n  type Listener = () => void;\n  const listeners = new Set<Listener>();\n\n  let value = computation();\n\n  const notify = () => {\n    for (const listener of listeners) {\n      listener();\n    }\n  };\n\n  const setValue = (newValue: T) => {\n    value = newValue;\n    notify();\n  };\n\n  // when any of the dependencies change, recompute the value and set it\n  for (const store of dependencies) {\n    store.subscribe(() => {\n      setValue(computation());\n    });\n  }\n\n  return {\n    getValue() {\n      return value;\n    },\n    subscribe(listener: Listener) {\n      listeners.add(listener);\n      return () => {\n        listeners.delete(listener);\n      };\n    },\n  };\n}\n"],"mappings":"AAOA;;;;;;;;;;AAUA,OAAM,SAAUA,aAAaA;AAC3B;AACAC,WAAoB;AACpB;AACAC,YAAiD;EAGjD,MAAMC,SAAS,GAAG,IAAIC,GAAG,EAAY;EAErC,IAAIC,KAAK,GAAGJ,WAAW,EAAE;EAEzB,MAAMK,MAAM,GAAGA,CAAA,KAAK;IAClB,KAAK,MAAMC,QAAQ,IAAIJ,SAAS,EAAE;MAChCI,QAAQ,EAAE;IACZ;EACF,CAAC;EAED,MAAMC,QAAQ,GAAIC,QAAW,IAAI;IAC/BJ,KAAK,GAAGI,QAAQ;IAChBH,MAAM,EAAE;EACV,CAAC;EAED;EACA,KAAK,MAAMI,KAAK,IAAIR,YAAY,EAAE;IAChCQ,KAAK,CAACC,SAAS,CAAC,MAAK;MACnBH,QAAQ,CAACP,WAAW,EAAE,CAAC;IACzB,CAAC,CAAC;EACJ;EAEA,OAAO;IACLW,QAAQA,CAAA;MACN,OAAOP,KAAK;IACd,CAAC;IACDM,SAASA,CAACJ,QAAkB;MAC1BJ,SAAS,CAACU,GAAG,CAACN,QAAQ,CAAC;MACvB,OAAO,MAAK;QACVJ,SAAS,CAACW,MAAM,CAACP,QAAQ,CAAC;MAC5B,CAAC;IACH;GACD;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}