{"ast":null,"code":"import _objectSpread from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { defineChain } from \"../chains/utils.js\";\nimport { getThirdwebBaseUrl } from \"../utils/domains.js\";\nimport { getClientFetch } from \"../utils/fetch.js\";\nimport { stringify } from \"../utils/json.js\";\nimport { ApiError } from \"./types/Errors.js\";\n/**\n * Retrieves a Bridge quote for the provided buy intent. The quote will specify the necessary `originAmount` to receive the desired `destinationAmount`, which is specified with the `buyAmountWei` option.\n *\n * @example\n * ```typescript\n * import { Bridge, NATIVE_TOKEN_ADDRESS } from \"thirdweb\";\n *\n * const quote = await Bridge.Buy.quote({\n *   originChainId: 1,\n *   originTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   destinationChainId: 10,\n *   destinationTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   amount: toWei(\"0.01\"),\n *   client: thirdwebClient,\n * });\n * ```\n *\n * This will return a quote that might look like:\n * ```typescript\n * {\n *   originAmount: 10000026098875381n,\n *   destinationAmount: 1000000000000000000n,\n *   blockNumber: 22026509n,\n *   timestamp: 1741730936680,\n *   estimatedExecutionTimeMs: 1000\n *   steps: [\n *     {\n *       originToken: {\n *         chainId: 1,\n *         address: \"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE\",\n *         symbol: \"ETH\",\n *         name: \"Ethereum\",\n *         decimals: 18,\n *         priceUsd: 0.0025,\n *         iconUri: \"https://...\"\n *       },\n *       destinationToken: {\n *         chainId: 10,\n *         address: \"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE\",\n *         symbol: \"ETH\",\n *         name: \"Ethereum\",\n *         decimals: 18,\n *         priceUsd: 0.0025,\n *         iconUri: \"https://...\"\n *       },\n *       originAmount: 10000026098875381n,\n *       destinationAmount: 1000000000000000000n,\n *       estimatedExecutionTimeMs: 1000\n *     }\n *   ],\n *   intent: {\n *     originChainId: 1,\n *     originTokenAddress: NATIVE_TOKEN_ADDRESS,\n *     destinationChainId: 10,\n *     destinationTokenAddress: NATIVE_TOKEN_ADDRESS,\n *     amount: 1000000000000000000n\n *   }\n * }\n * ```\n *\n * The quote is an **estimate** for how much you would expect to pay for a specific buy. This quote is not guaranteed and you should use `Buy.prepare` to get a finalized quote with transaction data ready for execution.\n * So why use `quote`? The quote function is sometimes slightly faster than `prepare`, and can be used before the user connects their wallet.\n *\n * You can access this functions input and output types with `Buy.quote.Options` and `Buy.quote.Result`, respectively.\n *\n * To limit quotes to routes that have a certain number of steps involved, use the `maxSteps` option.\n *\n * ```ts\n * const quote = await Bridge.Buy.quote({\n *   originChainId: 1,\n *   originTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   destinationChainId: 10,\n *   destinationTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   amount: toWei(\"0.01\"),\n *   maxSteps: 2, // Will only return a quote for routes with 2 or fewer steps\n *   client: thirdwebClient,\n * });\n * ```\n *\n * @param options - The options for the quote.\n * @param options.originChainId - The chain ID of the origin token.\n * @param options.originTokenAddress - The address of the origin token.\n * @param options.destinationChainId - The chain ID of the destination token.\n * @param options.destinationTokenAddress - The address of the destination token.\n * @param options.amount - The amount of the destination token to receive.\n * @param [options.maxSteps] - Limit the number of total steps in the route.\n * @param options.client - Your thirdweb client.\n *\n * @returns A promise that resolves to a non-finalized quote for the requested buy.\n *\n * @throws Will throw an error if there is an issue fetching the quote.\n * @bridge Buy\n */\nexport async function quote(options) {\n  const {\n    originChainId,\n    originTokenAddress,\n    destinationChainId,\n    destinationTokenAddress,\n    client,\n    maxSteps\n  } = options;\n  const amount = \"buyAmountWei\" in options ? options.buyAmountWei : options.amount;\n  const clientFetch = getClientFetch(client);\n  const url = new URL(\"\".concat(getThirdwebBaseUrl(\"bridge\"), \"/v1/buy/quote\"));\n  url.searchParams.set(\"originChainId\", originChainId.toString());\n  url.searchParams.set(\"originTokenAddress\", originTokenAddress);\n  url.searchParams.set(\"destinationChainId\", destinationChainId.toString());\n  url.searchParams.set(\"destinationTokenAddress\", destinationTokenAddress);\n  url.searchParams.set(\"buyAmountWei\", amount.toString());\n  url.searchParams.set(\"amount\", amount.toString());\n  if (maxSteps) {\n    url.searchParams.set(\"maxSteps\", maxSteps.toString());\n  }\n  const response = await clientFetch(url.toString());\n  if (!response.ok) {\n    const errorJson = await response.json();\n    throw new ApiError({\n      code: errorJson.code || \"UNKNOWN_ERROR\",\n      correlationId: errorJson.correlationId || undefined,\n      message: errorJson.message || response.statusText,\n      statusCode: response.status\n    });\n  }\n  const {\n    data\n  } = await response.json();\n  return {\n    blockNumber: data.blockNumber ? BigInt(data.blockNumber) : undefined,\n    destinationAmount: BigInt(data.destinationAmount),\n    estimatedExecutionTimeMs: data.estimatedExecutionTimeMs,\n    intent: {\n      amount,\n      buyAmountWei: amount,\n      destinationChainId,\n      destinationTokenAddress,\n      originChainId,\n      originTokenAddress\n    },\n    originAmount: BigInt(data.originAmount),\n    steps: data.steps,\n    timestamp: data.timestamp\n  };\n}\n/**\n * Prepares a **finalized** Bridge quote for the provided buy request with transaction data. This function will return everything `quote` does, with the addition of a series of prepared transactions and the associated expiration timestamp.\n *\n * @example\n * ```typescript\n * import { Bridge, NATIVE_TOKEN_ADDRESS } from \"thirdweb\";\n *\n * const quote = await Bridge.Buy.prepare({\n *   originChainId: 1,\n *   originTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   destinationChainId: 10,\n *   destinationTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   amount: toWei(\"0.01\"),\n *   sender: \"0x...\",\n *   receiver: \"0x...\",\n *   client: thirdwebClient,\n * });\n * ```\n *\n * This will return a quote that might look like:\n * ```typescript\n * {\n *   originAmount: 2000030000n,\n *   destinationAmount: 1000000000000000000n,\n *   blockNumber: 22026509n,\n *   timestamp: 1741730936680,\n *   estimatedExecutionTimeMs: 1000\n *   steps: [\n *     {\n *       originToken: {\n *         chainId: 1,\n *         address: \"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48\",\n *         symbol: \"USDC\",\n *         name: \"USDC\",\n *         decimals: 6,\n *         priceUsd: 1,\n *         iconUri: \"https://...\"\n *       },\n *       destinationToken: {\n *         chainId: 10,\n *         address: \"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE\",\n *         symbol: \"ETH\",\n *         name: \"Ethereum\",\n *         decimals: 18,\n *         priceUsd: 2000,\n *         iconUri: \"https://...\"\n *       },\n *       originAmount: 2000030000n,\n *       destinationAmount: 1000000000000000000n,\n *       estimatedExecutionTimeMs: 1000\n *       transactions: [\n *         {\n *           action: \"approval\",\n *           id: \"0x\",\n *           to: \"0x...\",\n *           data: \"0x...\",\n *           chainId: 10,\n *           type: \"eip1559\"\n *         },\n *         {\n *           action: \"buy\",\n *           to: \"0x...\",\n *           value: 10000026098875381n,\n *           data: \"0x...\",\n *           chainId: 10,\n *           type: \"eip1559\"\n *         }\n *       ]\n *     }\n *   ],\n *   expiration: 1741730936680,\n *   intent: {\n *     originChainId: 1,\n *     originTokenAddress: \"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48\",\n *     destinationChainId: 10,\n *     destinationTokenAddress: \"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE\",\n *     amount: 1000000000000000000n\n *   }\n * }\n * ```\n *\n * ## Sending the transactions\n * The `transactions` array is a series of transactions ready to be executed (with `sendTransaction`) one after the other in order to fulfill the complete route. There are a few things to keep in mind when executing these transactions:\n *  - Approvals will have the `approval` action specified. You can perform approvals with `sendAndConfirmTransaction`, then proceed to the next transaction.\n *  - All transactions are assumed to be executed by the `sender` address, regardless of which chain they are on. The final transaction will use the `receiver` as the recipient address.\n *  - If an `expiration` timestamp is provided, all transactions must be executed before that time to guarantee successful execution at the specified price.\n *\n * NOTE: To get the status of each non-approval transaction, use `Bridge.status` rather than checking for transaction inclusion. This function will ensure full bridge completion on the destination chain.\n *\n * You can access this functions input and output types with `Buy.prepare.Options` and `Buy.prepare.Result`, respectively.\n *\n * You can include arbitrary data to be included on any webhooks and status responses with the `purchaseData` option.\n *\n * ```ts\n * const quote = await Bridge.Buy.prepare({\n *   originChainId: 1,\n *   originTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   destinationChainId: 10,\n *   destinationTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   amount: toWei(\"0.01\"),\n *   sender: \"0x...\",\n *   receiver: \"0x...\",\n *   purchaseData: {\n *     size: \"large\",\n *     shippingAddress: \"123 Main St, New York, NY 10001\",\n *   },\n *   client: thirdwebClient,\n * });\n * ```\n *\n * To limit quotes to routes that have a certain number of steps involved, use the `maxSteps` option.\n *\n * ```ts\n * const quote = await Bridge.Buy.prepare({\n *   originChainId: 1,\n *   originTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   destinationChainId: 10,\n *   destinationTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   amount: toWei(\"0.01\"),\n *   sender: \"0x...\",\n *   receiver: \"0x...\",\n *   maxSteps: 2, // Will only return a quote for routes with 2 or fewer steps\n *   client: thirdwebClient,\n * });\n * ```\n *\n * @param options - The options for the quote.\n * @param options.originChainId - The chain ID of the origin token.\n * @param options.originTokenAddress - The address of the origin token.\n * @param options.destinationChainId - The chain ID of the destination token.\n * @param options.destinationTokenAddress - The address of the destination token.\n * @param options.amount - The amount of the destination token to receive.\n * @param options.sender - The address of the sender.\n * @param options.receiver - The address of the recipient.\n * @param [options.purchaseData] - Arbitrary data to be passed to the purchase function and included with any webhooks or status calls.\n * @param [options.maxSteps] - Limit the number of total steps in the route.\n * @param options.client - Your thirdweb client.\n *\n * @returns A promise that resolves to a finalized quote and transactions for the requested buy.\n *\n * @throws Will throw an error if there is an issue fetching the quote.\n * @bridge Buy\n */\nexport async function prepare(options) {\n  const {\n    originChainId,\n    originTokenAddress,\n    destinationChainId,\n    destinationTokenAddress,\n    sender,\n    receiver,\n    client,\n    amount,\n    purchaseData,\n    maxSteps,\n    paymentLinkId\n  } = options;\n  const clientFetch = getClientFetch(client);\n  const url = new URL(\"\".concat(getThirdwebBaseUrl(\"bridge\"), \"/v1/buy/prepare\"));\n  const response = await clientFetch(url.toString(), {\n    body: stringify({\n      amount: amount.toString(),\n      // legacy\n      buyAmountWei: amount.toString(),\n      destinationChainId: destinationChainId.toString(),\n      destinationTokenAddress,\n      maxSteps,\n      originChainId: originChainId.toString(),\n      originTokenAddress,\n      paymentLinkId,\n      purchaseData,\n      receiver,\n      sender\n    }),\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"POST\"\n  });\n  if (!response.ok) {\n    const errorJson = await response.json();\n    throw new ApiError({\n      code: errorJson.code || \"UNKNOWN_ERROR\",\n      correlationId: errorJson.correlationId || undefined,\n      message: errorJson.message || response.statusText,\n      statusCode: response.status\n    });\n  }\n  const {\n    data\n  } = await response.json();\n  return {\n    blockNumber: data.blockNumber ? BigInt(data.blockNumber) : undefined,\n    destinationAmount: BigInt(data.destinationAmount),\n    estimatedExecutionTimeMs: data.estimatedExecutionTimeMs,\n    intent: {\n      amount,\n      destinationChainId,\n      destinationTokenAddress,\n      originChainId,\n      originTokenAddress,\n      receiver,\n      sender\n    },\n    originAmount: BigInt(data.originAmount),\n    steps: data.steps.map(step => _objectSpread(_objectSpread({}, step), {}, {\n      transactions: step.transactions.map(transaction => _objectSpread(_objectSpread({}, transaction), {}, {\n        chain: defineChain(transaction.chainId),\n        client,\n        value: transaction.value ? BigInt(transaction.value) : undefined\n      }))\n    })),\n    timestamp: data.timestamp\n  };\n}","map":{"version":3,"names":["defineChain","getThirdwebBaseUrl","getClientFetch","stringify","ApiError","quote","options","originChainId","originTokenAddress","destinationChainId","destinationTokenAddress","client","maxSteps","amount","buyAmountWei","clientFetch","url","URL","concat","searchParams","set","toString","response","ok","errorJson","json","code","correlationId","undefined","message","statusText","statusCode","status","data","blockNumber","BigInt","destinationAmount","estimatedExecutionTimeMs","intent","originAmount","steps","timestamp","prepare","sender","receiver","purchaseData","paymentLinkId","body","headers","method","map","step","_objectSpread","transactions","transaction","chain","chainId","value"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/bridge/Buy.ts"],"sourcesContent":["import type { Address as ox__Address } from \"ox\";\nimport { defineChain } from \"../chains/utils.js\";\nimport type { ThirdwebClient } from \"../client/client.js\";\nimport type { PurchaseData } from \"../pay/types.js\";\nimport { getThirdwebBaseUrl } from \"../utils/domains.js\";\nimport { getClientFetch } from \"../utils/fetch.js\";\nimport { stringify } from \"../utils/json.js\";\nimport { ApiError } from \"./types/Errors.js\";\nimport type { PreparedQuote, Quote } from \"./types/Quote.js\";\n\n/**\n * Retrieves a Bridge quote for the provided buy intent. The quote will specify the necessary `originAmount` to receive the desired `destinationAmount`, which is specified with the `buyAmountWei` option.\n *\n * @example\n * ```typescript\n * import { Bridge, NATIVE_TOKEN_ADDRESS } from \"thirdweb\";\n *\n * const quote = await Bridge.Buy.quote({\n *   originChainId: 1,\n *   originTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   destinationChainId: 10,\n *   destinationTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   amount: toWei(\"0.01\"),\n *   client: thirdwebClient,\n * });\n * ```\n *\n * This will return a quote that might look like:\n * ```typescript\n * {\n *   originAmount: 10000026098875381n,\n *   destinationAmount: 1000000000000000000n,\n *   blockNumber: 22026509n,\n *   timestamp: 1741730936680,\n *   estimatedExecutionTimeMs: 1000\n *   steps: [\n *     {\n *       originToken: {\n *         chainId: 1,\n *         address: \"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE\",\n *         symbol: \"ETH\",\n *         name: \"Ethereum\",\n *         decimals: 18,\n *         priceUsd: 0.0025,\n *         iconUri: \"https://...\"\n *       },\n *       destinationToken: {\n *         chainId: 10,\n *         address: \"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE\",\n *         symbol: \"ETH\",\n *         name: \"Ethereum\",\n *         decimals: 18,\n *         priceUsd: 0.0025,\n *         iconUri: \"https://...\"\n *       },\n *       originAmount: 10000026098875381n,\n *       destinationAmount: 1000000000000000000n,\n *       estimatedExecutionTimeMs: 1000\n *     }\n *   ],\n *   intent: {\n *     originChainId: 1,\n *     originTokenAddress: NATIVE_TOKEN_ADDRESS,\n *     destinationChainId: 10,\n *     destinationTokenAddress: NATIVE_TOKEN_ADDRESS,\n *     amount: 1000000000000000000n\n *   }\n * }\n * ```\n *\n * The quote is an **estimate** for how much you would expect to pay for a specific buy. This quote is not guaranteed and you should use `Buy.prepare` to get a finalized quote with transaction data ready for execution.\n * So why use `quote`? The quote function is sometimes slightly faster than `prepare`, and can be used before the user connects their wallet.\n *\n * You can access this functions input and output types with `Buy.quote.Options` and `Buy.quote.Result`, respectively.\n *\n * To limit quotes to routes that have a certain number of steps involved, use the `maxSteps` option.\n *\n * ```ts\n * const quote = await Bridge.Buy.quote({\n *   originChainId: 1,\n *   originTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   destinationChainId: 10,\n *   destinationTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   amount: toWei(\"0.01\"),\n *   maxSteps: 2, // Will only return a quote for routes with 2 or fewer steps\n *   client: thirdwebClient,\n * });\n * ```\n *\n * @param options - The options for the quote.\n * @param options.originChainId - The chain ID of the origin token.\n * @param options.originTokenAddress - The address of the origin token.\n * @param options.destinationChainId - The chain ID of the destination token.\n * @param options.destinationTokenAddress - The address of the destination token.\n * @param options.amount - The amount of the destination token to receive.\n * @param [options.maxSteps] - Limit the number of total steps in the route.\n * @param options.client - Your thirdweb client.\n *\n * @returns A promise that resolves to a non-finalized quote for the requested buy.\n *\n * @throws Will throw an error if there is an issue fetching the quote.\n * @bridge Buy\n */\nexport async function quote(options: quote.Options): Promise<quote.Result> {\n  const {\n    originChainId,\n    originTokenAddress,\n    destinationChainId,\n    destinationTokenAddress,\n    client,\n    maxSteps,\n  } = options;\n  const amount =\n    \"buyAmountWei\" in options ? options.buyAmountWei : options.amount;\n\n  const clientFetch = getClientFetch(client);\n  const url = new URL(`${getThirdwebBaseUrl(\"bridge\")}/v1/buy/quote`);\n  url.searchParams.set(\"originChainId\", originChainId.toString());\n  url.searchParams.set(\"originTokenAddress\", originTokenAddress);\n  url.searchParams.set(\"destinationChainId\", destinationChainId.toString());\n  url.searchParams.set(\"destinationTokenAddress\", destinationTokenAddress);\n  url.searchParams.set(\"buyAmountWei\", amount.toString());\n  url.searchParams.set(\"amount\", amount.toString());\n  if (maxSteps) {\n    url.searchParams.set(\"maxSteps\", maxSteps.toString());\n  }\n\n  const response = await clientFetch(url.toString());\n  if (!response.ok) {\n    const errorJson = await response.json();\n    throw new ApiError({\n      code: errorJson.code || \"UNKNOWN_ERROR\",\n      correlationId: errorJson.correlationId || undefined,\n      message: errorJson.message || response.statusText,\n      statusCode: response.status,\n    });\n  }\n\n  const { data }: { data: Quote } = await response.json();\n  return {\n    blockNumber: data.blockNumber ? BigInt(data.blockNumber) : undefined,\n    destinationAmount: BigInt(data.destinationAmount),\n    estimatedExecutionTimeMs: data.estimatedExecutionTimeMs,\n    intent: {\n      amount,\n      buyAmountWei: amount,\n      destinationChainId,\n      destinationTokenAddress,\n      originChainId,\n      originTokenAddress,\n    },\n    originAmount: BigInt(data.originAmount),\n    steps: data.steps,\n    timestamp: data.timestamp,\n  };\n}\n\n/**\n * Namespace containing types for the buy quote function.\n * @namespace quote\n * @bridge Buy\n */\nexport declare namespace quote {\n  /**\n   * Options for getting a buy quote.\n   * @interface Options\n   * @bridge Buy\n   */\n  type Options = {\n    /** The origin chain ID */\n    originChainId: number;\n    /** The origin token address */\n    originTokenAddress: ox__Address.Address;\n    /** The destination chain ID */\n    destinationChainId: number;\n    /** The destination token address */\n    destinationTokenAddress: ox__Address.Address;\n    /** Your thirdweb client */\n    client: ThirdwebClient;\n    /** Maximum number of steps in the route */\n    maxSteps?: number;\n  } & (\n    | {\n        /** The amount to buy in wei */\n        buyAmountWei: bigint;\n      }\n    | {\n        /** The amount to spend in wei */\n        amount: bigint;\n      }\n  );\n\n  /**\n   * Result returned from getting a buy quote.\n   * Contains quote details and intent information.\n   * @interface Result\n   * @bridge Buy\n   */\n  type Result = Quote & {\n    intent: {\n      originChainId: number;\n      originTokenAddress: ox__Address.Address;\n      destinationChainId: number;\n      destinationTokenAddress: ox__Address.Address;\n      buyAmountWei: bigint;\n      amount: bigint;\n    };\n  };\n}\n\n/**\n * Prepares a **finalized** Bridge quote for the provided buy request with transaction data. This function will return everything `quote` does, with the addition of a series of prepared transactions and the associated expiration timestamp.\n *\n * @example\n * ```typescript\n * import { Bridge, NATIVE_TOKEN_ADDRESS } from \"thirdweb\";\n *\n * const quote = await Bridge.Buy.prepare({\n *   originChainId: 1,\n *   originTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   destinationChainId: 10,\n *   destinationTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   amount: toWei(\"0.01\"),\n *   sender: \"0x...\",\n *   receiver: \"0x...\",\n *   client: thirdwebClient,\n * });\n * ```\n *\n * This will return a quote that might look like:\n * ```typescript\n * {\n *   originAmount: 2000030000n,\n *   destinationAmount: 1000000000000000000n,\n *   blockNumber: 22026509n,\n *   timestamp: 1741730936680,\n *   estimatedExecutionTimeMs: 1000\n *   steps: [\n *     {\n *       originToken: {\n *         chainId: 1,\n *         address: \"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48\",\n *         symbol: \"USDC\",\n *         name: \"USDC\",\n *         decimals: 6,\n *         priceUsd: 1,\n *         iconUri: \"https://...\"\n *       },\n *       destinationToken: {\n *         chainId: 10,\n *         address: \"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE\",\n *         symbol: \"ETH\",\n *         name: \"Ethereum\",\n *         decimals: 18,\n *         priceUsd: 2000,\n *         iconUri: \"https://...\"\n *       },\n *       originAmount: 2000030000n,\n *       destinationAmount: 1000000000000000000n,\n *       estimatedExecutionTimeMs: 1000\n *       transactions: [\n *         {\n *           action: \"approval\",\n *           id: \"0x\",\n *           to: \"0x...\",\n *           data: \"0x...\",\n *           chainId: 10,\n *           type: \"eip1559\"\n *         },\n *         {\n *           action: \"buy\",\n *           to: \"0x...\",\n *           value: 10000026098875381n,\n *           data: \"0x...\",\n *           chainId: 10,\n *           type: \"eip1559\"\n *         }\n *       ]\n *     }\n *   ],\n *   expiration: 1741730936680,\n *   intent: {\n *     originChainId: 1,\n *     originTokenAddress: \"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48\",\n *     destinationChainId: 10,\n *     destinationTokenAddress: \"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE\",\n *     amount: 1000000000000000000n\n *   }\n * }\n * ```\n *\n * ## Sending the transactions\n * The `transactions` array is a series of transactions ready to be executed (with `sendTransaction`) one after the other in order to fulfill the complete route. There are a few things to keep in mind when executing these transactions:\n *  - Approvals will have the `approval` action specified. You can perform approvals with `sendAndConfirmTransaction`, then proceed to the next transaction.\n *  - All transactions are assumed to be executed by the `sender` address, regardless of which chain they are on. The final transaction will use the `receiver` as the recipient address.\n *  - If an `expiration` timestamp is provided, all transactions must be executed before that time to guarantee successful execution at the specified price.\n *\n * NOTE: To get the status of each non-approval transaction, use `Bridge.status` rather than checking for transaction inclusion. This function will ensure full bridge completion on the destination chain.\n *\n * You can access this functions input and output types with `Buy.prepare.Options` and `Buy.prepare.Result`, respectively.\n *\n * You can include arbitrary data to be included on any webhooks and status responses with the `purchaseData` option.\n *\n * ```ts\n * const quote = await Bridge.Buy.prepare({\n *   originChainId: 1,\n *   originTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   destinationChainId: 10,\n *   destinationTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   amount: toWei(\"0.01\"),\n *   sender: \"0x...\",\n *   receiver: \"0x...\",\n *   purchaseData: {\n *     size: \"large\",\n *     shippingAddress: \"123 Main St, New York, NY 10001\",\n *   },\n *   client: thirdwebClient,\n * });\n * ```\n *\n * To limit quotes to routes that have a certain number of steps involved, use the `maxSteps` option.\n *\n * ```ts\n * const quote = await Bridge.Buy.prepare({\n *   originChainId: 1,\n *   originTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   destinationChainId: 10,\n *   destinationTokenAddress: NATIVE_TOKEN_ADDRESS,\n *   amount: toWei(\"0.01\"),\n *   sender: \"0x...\",\n *   receiver: \"0x...\",\n *   maxSteps: 2, // Will only return a quote for routes with 2 or fewer steps\n *   client: thirdwebClient,\n * });\n * ```\n *\n * @param options - The options for the quote.\n * @param options.originChainId - The chain ID of the origin token.\n * @param options.originTokenAddress - The address of the origin token.\n * @param options.destinationChainId - The chain ID of the destination token.\n * @param options.destinationTokenAddress - The address of the destination token.\n * @param options.amount - The amount of the destination token to receive.\n * @param options.sender - The address of the sender.\n * @param options.receiver - The address of the recipient.\n * @param [options.purchaseData] - Arbitrary data to be passed to the purchase function and included with any webhooks or status calls.\n * @param [options.maxSteps] - Limit the number of total steps in the route.\n * @param options.client - Your thirdweb client.\n *\n * @returns A promise that resolves to a finalized quote and transactions for the requested buy.\n *\n * @throws Will throw an error if there is an issue fetching the quote.\n * @bridge Buy\n */\nexport async function prepare(\n  options: prepare.Options,\n): Promise<prepare.Result> {\n  const {\n    originChainId,\n    originTokenAddress,\n    destinationChainId,\n    destinationTokenAddress,\n    sender,\n    receiver,\n    client,\n    amount,\n    purchaseData,\n    maxSteps,\n    paymentLinkId,\n  } = options;\n\n  const clientFetch = getClientFetch(client);\n  const url = new URL(`${getThirdwebBaseUrl(\"bridge\")}/v1/buy/prepare`);\n\n  const response = await clientFetch(url.toString(), {\n    body: stringify({\n      amount: amount.toString(), // legacy\n      buyAmountWei: amount.toString(),\n      destinationChainId: destinationChainId.toString(),\n      destinationTokenAddress,\n      maxSteps,\n      originChainId: originChainId.toString(),\n      originTokenAddress,\n      paymentLinkId,\n      purchaseData,\n      receiver,\n      sender,\n    }),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    method: \"POST\",\n  });\n  if (!response.ok) {\n    const errorJson = await response.json();\n    throw new ApiError({\n      code: errorJson.code || \"UNKNOWN_ERROR\",\n      correlationId: errorJson.correlationId || undefined,\n      message: errorJson.message || response.statusText,\n      statusCode: response.status,\n    });\n  }\n\n  const { data }: { data: PreparedQuote } = await response.json();\n  return {\n    blockNumber: data.blockNumber ? BigInt(data.blockNumber) : undefined,\n    destinationAmount: BigInt(data.destinationAmount),\n    estimatedExecutionTimeMs: data.estimatedExecutionTimeMs,\n    intent: {\n      amount,\n      destinationChainId,\n      destinationTokenAddress,\n      originChainId,\n      originTokenAddress,\n      receiver,\n      sender,\n    },\n    originAmount: BigInt(data.originAmount),\n    steps: data.steps.map((step) => ({\n      ...step,\n      transactions: step.transactions.map((transaction) => ({\n        ...transaction,\n        chain: defineChain(transaction.chainId),\n        client,\n        value: transaction.value ? BigInt(transaction.value) : undefined,\n      })),\n    })),\n    timestamp: data.timestamp,\n  };\n}\n\n/**\n * Namespace containing types for the buy prepare function.\n * @namespace prepare\n * @bridge Buy\n */\nexport declare namespace prepare {\n  /**\n   * Options for preparing a buy transaction.\n   * @interface Options\n   * @bridge Buy\n   */\n  type Options = {\n    /** The origin chain ID */\n    originChainId: number;\n    /** The origin token address */\n    originTokenAddress: ox__Address.Address;\n    /** The destination chain ID */\n    destinationChainId: number;\n    /** The destination token address */\n    destinationTokenAddress: ox__Address.Address;\n    /** The sender address */\n    sender: ox__Address.Address;\n    /** The receiver address */\n    receiver: ox__Address.Address;\n    /** The amount to buy in wei */\n    amount: bigint;\n    /** Your thirdweb client */\n    client: ThirdwebClient;\n    /** Arbitrary purchase data */\n    purchaseData?: PurchaseData;\n    /** Maximum number of steps in the route */\n    maxSteps?: number;\n    /**\n     * @hidden\n     */\n    paymentLinkId?: string;\n  };\n\n  /**\n   * Result returned from preparing a buy transaction.\n   * Contains prepared quote with transaction data and intent information.\n   * @interface Result\n   * @bridge Buy\n   */\n  type Result = PreparedQuote & {\n    intent: {\n      originChainId: number;\n      originTokenAddress: ox__Address.Address;\n      destinationChainId: number;\n      destinationTokenAddress: ox__Address.Address;\n      amount: bigint;\n      sender: ox__Address.Address;\n      receiver: ox__Address.Address;\n      purchaseData?: PurchaseData;\n    };\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}