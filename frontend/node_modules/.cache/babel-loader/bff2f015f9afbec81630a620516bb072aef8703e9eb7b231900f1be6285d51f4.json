{"ast":null,"code":"import { getClientFetch } from \"../../../../utils/fetch.js\";\nimport { stringify } from \"../../../../utils/json.js\";\nimport { ROUTE_AUTH_ENDPOINT_CALLBACK } from \"../../native/helpers/constants.js\";\nimport { createErrorMessage } from \"../../native/helpers/errors.js\";\nexport async function authEndpoint(args) {\n  const clientFetch = getClientFetch(args.client, args.ecosystem);\n  const res = await clientFetch(ROUTE_AUTH_ENDPOINT_CALLBACK, {\n    body: stringify({\n      developerClientId: args.client.clientId,\n      payload: args.payload\n    }),\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"POST\"\n  });\n  if (!res.ok) {\n    const error = await res.json();\n    throw new Error(\"Custom auth endpoint authentication error: \".concat(error.message));\n  }\n  try {\n    const {\n      verifiedToken\n    } = await res.json();\n    return {\n      storedToken: verifiedToken\n    };\n  } catch (e) {\n    throw new Error(createErrorMessage(\"Malformed response from post auth_endpoint authentication\", e));\n  }\n}","map":{"version":3,"names":["getClientFetch","stringify","ROUTE_AUTH_ENDPOINT_CALLBACK","createErrorMessage","authEndpoint","args","clientFetch","client","ecosystem","res","body","developerClientId","clientId","payload","headers","method","ok","error","json","Error","concat","message","verifiedToken","storedToken","e"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/wallets/in-app/core/authentication/authEndpoint.ts"],"sourcesContent":["import type { ThirdwebClient } from \"../../../../client/client.js\";\nimport { getClientFetch } from \"../../../../utils/fetch.js\";\nimport { stringify } from \"../../../../utils/json.js\";\nimport { ROUTE_AUTH_ENDPOINT_CALLBACK } from \"../../native/helpers/constants.js\";\nimport { createErrorMessage } from \"../../native/helpers/errors.js\";\nimport type { Ecosystem } from \"../wallet/types.js\";\nimport type { AuthStoredTokenWithCookieReturnType } from \"./types.js\";\n\nexport async function authEndpoint(args: {\n  payload: string;\n  client: ThirdwebClient;\n  ecosystem?: Ecosystem;\n}): Promise<AuthStoredTokenWithCookieReturnType> {\n  const clientFetch = getClientFetch(args.client, args.ecosystem);\n\n  const res = await clientFetch(ROUTE_AUTH_ENDPOINT_CALLBACK, {\n    body: stringify({\n      developerClientId: args.client.clientId,\n      payload: args.payload,\n    }),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    method: \"POST\",\n  });\n\n  if (!res.ok) {\n    const error = await res.json();\n    throw new Error(\n      `Custom auth endpoint authentication error: ${error.message}`,\n    );\n  }\n\n  try {\n    const { verifiedToken } = await res.json();\n\n    return { storedToken: verifiedToken };\n  } catch (e) {\n    throw new Error(\n      createErrorMessage(\n        \"Malformed response from post auth_endpoint authentication\",\n        e,\n      ),\n    );\n  }\n}\n"],"mappings":"AACA,SAASA,cAAc,QAAQ,4BAA4B;AAC3D,SAASC,SAAS,QAAQ,2BAA2B;AACrD,SAASC,4BAA4B,QAAQ,mCAAmC;AAChF,SAASC,kBAAkB,QAAQ,gCAAgC;AAInE,OAAO,eAAeC,YAAYA,CAACC,IAIlC;EACC,MAAMC,WAAW,GAAGN,cAAc,CAACK,IAAI,CAACE,MAAM,EAAEF,IAAI,CAACG,SAAS,CAAC;EAE/D,MAAMC,GAAG,GAAG,MAAMH,WAAW,CAACJ,4BAA4B,EAAE;IAC1DQ,IAAI,EAAET,SAAS,CAAC;MACdU,iBAAiB,EAAEN,IAAI,CAACE,MAAM,CAACK,QAAQ;MACvCC,OAAO,EAAER,IAAI,CAACQ;KACf,CAAC;IACFC,OAAO,EAAE;MACP,cAAc,EAAE;KACjB;IACDC,MAAM,EAAE;GACT,CAAC;EAEF,IAAI,CAACN,GAAG,CAACO,EAAE,EAAE;IACX,MAAMC,KAAK,GAAG,MAAMR,GAAG,CAACS,IAAI,EAAE;IAC9B,MAAM,IAAIC,KAAK,+CAAAC,MAAA,CACiCH,KAAK,CAACI,OAAO,CAAE,CAC9D;EACH;EAEA,IAAI;IACF,MAAM;MAAEC;IAAa,CAAE,GAAG,MAAMb,GAAG,CAACS,IAAI,EAAE;IAE1C,OAAO;MAAEK,WAAW,EAAED;IAAa,CAAE;EACvC,CAAC,CAAC,OAAOE,CAAC,EAAE;IACV,MAAM,IAAIL,KAAK,CACbhB,kBAAkB,CAChB,2DAA2D,EAC3DqB,CAAC,CACF,CACF;EACH;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}