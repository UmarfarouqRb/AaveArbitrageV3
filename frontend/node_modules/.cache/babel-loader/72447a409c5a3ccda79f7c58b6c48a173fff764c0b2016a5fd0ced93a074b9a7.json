{"ast":null,"code":"import { useMutation } from \"@tanstack/react-query\";\nimport { waitForReceipt } from \"../../../../transaction/actions/wait-for-tx-receipt.js\";\nimport { stringify } from \"../../../../utils/json.js\";\nexport const useTransactionButtonMutation = (props, sendTransactionFn) => {\n  const {\n    transaction,\n    onTransactionSent,\n    onTransactionConfirmed,\n    onError,\n    onClick\n  } = props;\n  return useMutation({\n    mutationFn: async () => {\n      if (onClick) {\n        onClick();\n      }\n      try {\n        const resolvedTx = await transaction();\n        const result = await sendTransactionFn(resolvedTx);\n        if (onTransactionSent) {\n          onTransactionSent(result);\n        }\n        if (onTransactionConfirmed) {\n          const receipt = await waitForReceipt(result);\n          if (receipt.status === \"reverted\") {\n            throw new Error(\"Execution reverted: \".concat(stringify(receipt, null, 2)));\n          }\n          onTransactionConfirmed(receipt);\n        }\n      } catch (error) {\n        if (onError) {\n          onError(error);\n        }\n      } finally {}\n    }\n  });\n};","map":{"version":3,"names":["useMutation","waitForReceipt","stringify","useTransactionButtonMutation","props","sendTransactionFn","transaction","onTransactionSent","onTransactionConfirmed","onError","onClick","mutationFn","resolvedTx","result","receipt","status","Error","concat","error"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/core/hooks/transaction/transaction-button-utils.ts"],"sourcesContent":["import { useMutation } from \"@tanstack/react-query\";\nimport type { TransactionReceipt } from \"viem\";\nimport type { GaslessOptions } from \"../../../../transaction/actions/gasless/types.js\";\nimport {\n  type WaitForReceiptOptions,\n  waitForReceipt,\n} from \"../../../../transaction/actions/wait-for-tx-receipt.js\";\nimport type { PreparedTransaction } from \"../../../../transaction/prepare-transaction.js\";\nimport { stringify } from \"../../../../utils/json.js\";\nimport type { Theme } from \"../../design-system/index.js\";\nimport type {\n  SendTransactionPayModalConfig,\n  useSendTransactionCore,\n} from \"./useSendTransaction.js\";\n\n/**\n * Props for the [`TransactionButton`](https://portal.thirdweb.com/references/typescript/v5/TransactionButton) component.\n * @transaction\n */\nexport type TransactionButtonProps = {\n  /**\n   * The a function returning a prepared transaction of type [`PreparedTransaction`](https://portal.thirdweb.com/references/typescript/v5/PreparedTransaction) to be sent when the button is clicked\n   */\n  transaction: () => // biome-ignore lint/suspicious/noExplicitAny: TODO: fix any\n    | PreparedTransaction<any>\n    // biome-ignore lint/suspicious/noExplicitAny: TODO: fix any\n    | Promise<PreparedTransaction<any>>;\n\n  /**\n   * Callback that will be called when the transaction is submitted onchain\n   * @param transactionResult - The object of type [`WaitForReceiptOptions`](https://portal.thirdweb.com/references/typescript/v5/WaitForReceiptOptions)\n   */\n  onTransactionSent?: (transactionResult: WaitForReceiptOptions) => void;\n  /**\n   *\n   * Callback that will be called when the transaction is confirmed onchain.\n   * If this callback is set, the component will wait for the transaction to be confirmed.\n   * @param receipt - The transaction receipt object of type [`TransactionReceipt`](https://portal.thirdweb.com/references/typescript/v5/TransactionReceipt)\n   */\n  onTransactionConfirmed?: (receipt: TransactionReceipt) => void;\n  /**\n   * The Error thrown when trying to send the transaction\n   * @param error - The `Error` object thrown\n   */\n  onError?: (error: Error) => void;\n  /**\n   * Callback to be called when the button is clicked\n   * This function is provoked before the transaction is sent\n   */\n  onClick?: () => void;\n  /**\n   * The className to apply to the button element for custom styling\n   */\n  className?: string;\n  /**\n   * The style to apply to the button element for custom styling\n   */\n  style?: React.CSSProperties;\n  /**\n   * Remove all default styling from the button\n   */\n  unstyled?: boolean;\n  /**\n   * The `React.ReactNode` to be rendered inside the button\n   */\n  children: React.ReactNode;\n\n  /**\n   * Configuration for gasless transactions.\n   * Refer to [`GaslessOptions`](https://portal.thirdweb.com/references/typescript/v5/GaslessOptions) for more details.\n   */\n  gasless?: GaslessOptions;\n\n  /**\n   * The button's disabled state\n   */\n  disabled?: boolean;\n\n  /**\n   * Configuration for the \"Pay Modal\" that opens when the user doesn't have enough funds to send a transaction.\n   * Set `payModal: false` to disable the \"Pay Modal\" popup\n   *\n   * This configuration object includes the following properties to configure the \"Pay Modal\" UI:\n   *\n   * ### `locale`\n   * The language to use for the \"Pay Modal\" UI. Defaults to `\"en_US\"`.\n   *\n   * ### `supportedTokens`\n   * An object of type [`SupportedTokens`](https://portal.thirdweb.com/references/typescript/v5/SupportedTokens) to configure the tokens to show for a chain.\n   *\n   * ### `theme`\n   * The theme to use for the \"Pay Modal\" UI. Defaults to `\"dark\"`.\n   *\n   * It can be set to `\"light\"` or `\"dark\"` or an object of type [`Theme`](https://portal.thirdweb.com/references/typescript/v5/Theme) for a custom theme.\n   *\n   * Refer to [`lightTheme`](https://portal.thirdweb.com/references/typescript/v5/lightTheme)\n   * or [`darkTheme`](https://portal.thirdweb.com/references/typescript/v5/darkTheme) helper functions to use the default light or dark theme and customize it.\n   */\n  payModal?: SendTransactionPayModalConfig;\n\n  /**\n   * The theme to use for the button\n   */\n  theme?: \"dark\" | \"light\" | Theme;\n\n  /**\n   * Set the type attribute of the button element.\n   *\n   * [MDN Reference](https://developer.mozilla.org/docs/Web/API/HTMLButtonElement/type)\n   */\n  type?: HTMLButtonElement[\"type\"];\n};\n\nexport const useTransactionButtonMutation = (\n  props: TransactionButtonProps,\n  sendTransactionFn: ReturnType<typeof useSendTransactionCore>[\"mutateAsync\"],\n) => {\n  const {\n    transaction,\n    onTransactionSent,\n    onTransactionConfirmed,\n    onError,\n    onClick,\n  } = props;\n  return useMutation({\n    mutationFn: async () => {\n      if (onClick) {\n        onClick();\n      }\n      try {\n        const resolvedTx = await transaction();\n        const result = await sendTransactionFn(resolvedTx);\n\n        if (onTransactionSent) {\n          onTransactionSent(result);\n        }\n\n        if (onTransactionConfirmed) {\n          const receipt = await waitForReceipt(result);\n          if (receipt.status === \"reverted\") {\n            throw new Error(\n              `Execution reverted: ${stringify(receipt, null, 2)}`,\n            );\n          }\n          onTransactionConfirmed(receipt);\n        }\n      } catch (error) {\n        if (onError) {\n          onError(error as Error);\n        }\n      } finally {\n      }\n    },\n  });\n};\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,uBAAuB;AAGnD,SAEEC,cAAc,QACT,wDAAwD;AAE/D,SAASC,SAAS,QAAQ,2BAA2B;AAyGrD,OAAO,MAAMC,4BAA4B,GAAGA,CAC1CC,KAA6B,EAC7BC,iBAA2E,KACzE;EACF,MAAM;IACJC,WAAW;IACXC,iBAAiB;IACjBC,sBAAsB;IACtBC,OAAO;IACPC;EAAO,CACR,GAAGN,KAAK;EACT,OAAOJ,WAAW,CAAC;IACjBW,UAAU,EAAE,MAAAA,CAAA,KAAW;MACrB,IAAID,OAAO,EAAE;QACXA,OAAO,EAAE;MACX;MACA,IAAI;QACF,MAAME,UAAU,GAAG,MAAMN,WAAW,EAAE;QACtC,MAAMO,MAAM,GAAG,MAAMR,iBAAiB,CAACO,UAAU,CAAC;QAElD,IAAIL,iBAAiB,EAAE;UACrBA,iBAAiB,CAACM,MAAM,CAAC;QAC3B;QAEA,IAAIL,sBAAsB,EAAE;UAC1B,MAAMM,OAAO,GAAG,MAAMb,cAAc,CAACY,MAAM,CAAC;UAC5C,IAAIC,OAAO,CAACC,MAAM,KAAK,UAAU,EAAE;YACjC,MAAM,IAAIC,KAAK,wBAAAC,MAAA,CACUf,SAAS,CAACY,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,CAAE,CACrD;UACH;UACAN,sBAAsB,CAACM,OAAO,CAAC;QACjC;MACF,CAAC,CAAC,OAAOI,KAAK,EAAE;QACd,IAAIT,OAAO,EAAE;UACXA,OAAO,CAACS,KAAc,CAAC;QACzB;MACF,CAAC,SAAS,CACV;IACF;GACD,CAAC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}