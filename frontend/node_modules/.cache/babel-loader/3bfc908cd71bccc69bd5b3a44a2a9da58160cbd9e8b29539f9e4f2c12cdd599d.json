{"ast":null,"code":"import { getTransactionReceipt } from '../../../actions/index.js';\nimport { isAddressEqual, toFunctionHash } from '../../../utils/index.js';\nimport { l1MessengerAddress } from '../../constants/address.js';\n/** @internal */\nexport async function getWithdrawalLog(client, parameters) {\n  const {\n    hash,\n    index = 0\n  } = parameters;\n  const receipt = await getTransactionReceipt(client, {\n    hash\n  });\n  const log = receipt.logs.filter(log => isAddressEqual(log.address, l1MessengerAddress) && log.topics[0] === toFunctionHash('L1MessageSent(address,bytes32,bytes)'))[index];\n  return {\n    log,\n    l1BatchTxId: receipt.l1BatchTxIndex\n  };\n}","map":{"version":3,"names":["getTransactionReceipt","isAddressEqual","toFunctionHash","l1MessengerAddress","getWithdrawalLog","client","parameters","hash","index","receipt","log","logs","filter","address","topics","l1BatchTxId","l1BatchTxIndex"],"sources":["/home/user/Arbitrage/frontend/node_modules/viem/zksync/utils/bridge/getWithdrawalLog.ts"],"sourcesContent":["import type { Account } from '../../../accounts/types.js'\nimport { getTransactionReceipt } from '../../../actions/index.js'\nimport type { Client } from '../../../clients/createClient.js'\nimport type { Transport } from '../../../clients/transports/createTransport.js'\nimport type { Chain } from '../../../types/chain.js'\nimport type { Hash } from '../../../types/misc.js'\nimport { isAddressEqual, toFunctionHash } from '../../../utils/index.js'\nimport { l1MessengerAddress } from '../../constants/address.js'\nimport type { ZksyncLog } from '../../types/log.js'\nimport type { ZksyncTransactionReceipt } from '../../types/transaction.js'\n\nexport type GetWithdrawalLogParameters = {\n  /** Hash of the L2 transaction where the withdrawal was initiated. */\n  hash: Hash\n  /** In case there were multiple withdrawals in one transaction, you may pass an index of the\n     withdrawal you want to finalize. */\n  index?: number | undefined\n}\n\nexport type GetWithdrawalLogReturnType = {\n  log: ZksyncLog\n  l1BatchTxId: bigint | null\n}\n\n/** @internal */\nexport async function getWithdrawalLog<\n  chain extends Chain | undefined,\n  account extends Account | undefined,\n>(\n  client: Client<Transport, chain, account>,\n  parameters: GetWithdrawalLogParameters,\n): Promise<GetWithdrawalLogReturnType> {\n  const { hash, index = 0 } = parameters\n  const receipt = (await getTransactionReceipt(client, {\n    hash,\n  })) as ZksyncTransactionReceipt\n  const log = receipt.logs.filter(\n    (log) =>\n      isAddressEqual(log.address, l1MessengerAddress) &&\n      log.topics[0] === toFunctionHash('L1MessageSent(address,bytes32,bytes)'),\n  )[index]\n\n  return {\n    log,\n    l1BatchTxId: receipt.l1BatchTxIndex,\n  }\n}\n"],"mappings":"AACA,SAASA,qBAAqB,QAAQ,2BAA2B;AAKjE,SAASC,cAAc,EAAEC,cAAc,QAAQ,yBAAyB;AACxE,SAASC,kBAAkB,QAAQ,4BAA4B;AAiB/D;AACA,OAAO,eAAeC,gBAAgBA,CAIpCC,MAAyC,EACzCC,UAAsC;EAEtC,MAAM;IAAEC,IAAI;IAAEC,KAAK,GAAG;EAAC,CAAE,GAAGF,UAAU;EACtC,MAAMG,OAAO,GAAI,MAAMT,qBAAqB,CAACK,MAAM,EAAE;IACnDE;GACD,CAA8B;EAC/B,MAAMG,GAAG,GAAGD,OAAO,CAACE,IAAI,CAACC,MAAM,CAC5BF,GAAG,IACFT,cAAc,CAACS,GAAG,CAACG,OAAO,EAAEV,kBAAkB,CAAC,IAC/CO,GAAG,CAACI,MAAM,CAAC,CAAC,CAAC,KAAKZ,cAAc,CAAC,sCAAsC,CAAC,CAC3E,CAACM,KAAK,CAAC;EAER,OAAO;IACLE,GAAG;IACHK,WAAW,EAAEN,OAAO,CAACO;GACtB;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}