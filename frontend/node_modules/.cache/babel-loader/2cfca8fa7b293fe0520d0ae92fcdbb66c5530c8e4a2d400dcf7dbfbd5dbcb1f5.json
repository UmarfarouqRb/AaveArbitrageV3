{"ast":null,"code":"/**\n * internal helper functions\n */\nimport { trackConnect } from \"../../analytics/track/connect.js\";\nimport { getCachedChainIfExists } from \"../../chains/utils.js\";\nimport { COINBASE } from \"../constants.js\";\nimport { createWalletEmitter } from \"../wallet-emitter.js\";\n/**\n * @internal\n */\nexport function coinbaseWalletSDK(args) {\n  const {\n    createOptions\n  } = args;\n  const emitter = createWalletEmitter();\n  let account;\n  let chain;\n  function reset() {\n    account = undefined;\n    chain = undefined;\n  }\n  let handleDisconnect = async () => {};\n  let handleSwitchChain = async newChain => {\n    chain = newChain;\n  };\n  const unsubscribeChainChanged = emitter.subscribe(\"chainChanged\", newChain => {\n    chain = newChain;\n  });\n  const unsubscribeDisconnect = emitter.subscribe(\"disconnect\", () => {\n    reset();\n    unsubscribeChainChanged();\n    unsubscribeDisconnect();\n  });\n  emitter.subscribe(\"accountChanged\", _account => {\n    account = _account;\n  });\n  return {\n    autoConnect: async options => {\n      const {\n        autoConnectCoinbaseWalletSDK\n      } = await import(\"./coinbase-web.js\");\n      const provider = await args.providerFactory();\n      const [connectedAccount, connectedChain, doDisconnect, doSwitchChain] = await autoConnectCoinbaseWalletSDK(options, emitter, provider);\n      // set the states\n      account = connectedAccount;\n      chain = connectedChain;\n      handleDisconnect = doDisconnect;\n      handleSwitchChain = doSwitchChain;\n      trackConnect({\n        chainId: chain.id,\n        client: options.client,\n        walletAddress: account.address,\n        walletType: COINBASE\n      });\n      // return account\n      return account;\n    },\n    connect: async options => {\n      const {\n        connectCoinbaseWalletSDK\n      } = await import(\"./coinbase-web.js\");\n      const provider = await args.providerFactory();\n      const [connectedAccount, connectedChain, doDisconnect, doSwitchChain] = await connectCoinbaseWalletSDK(options, emitter, provider);\n      // set the states\n      account = connectedAccount;\n      chain = connectedChain;\n      handleDisconnect = doDisconnect;\n      handleSwitchChain = doSwitchChain;\n      trackConnect({\n        chainId: chain.id,\n        client: options.client,\n        walletAddress: account.address,\n        walletType: COINBASE\n      });\n      // return account\n      return account;\n    },\n    disconnect: async () => {\n      reset();\n      await handleDisconnect();\n    },\n    getAccount: () => account,\n    getChain() {\n      if (!chain) {\n        return undefined;\n      }\n      chain = getCachedChainIfExists(chain.id) || chain;\n      return chain;\n    },\n    getConfig: () => createOptions,\n    id: COINBASE,\n    onConnectRequested: async () => {\n      if (args.onConnectRequested) {\n        var _args$onConnectReques;\n        const provider = await args.providerFactory();\n        return (_args$onConnectReques = args.onConnectRequested) === null || _args$onConnectReques === void 0 ? void 0 : _args$onConnectReques.call(args, provider);\n      }\n    },\n    subscribe: emitter.subscribe,\n    switchChain: async newChain => {\n      await handleSwitchChain(newChain);\n    }\n  };\n}","map":{"version":3,"names":["trackConnect","getCachedChainIfExists","COINBASE","createWalletEmitter","coinbaseWalletSDK","args","createOptions","emitter","account","chain","reset","undefined","handleDisconnect","handleSwitchChain","newChain","unsubscribeChainChanged","subscribe","unsubscribeDisconnect","_account","autoConnect","options","autoConnectCoinbaseWalletSDK","provider","providerFactory","connectedAccount","connectedChain","doDisconnect","doSwitchChain","chainId","id","client","walletAddress","address","walletType","connect","connectCoinbaseWalletSDK","disconnect","getAccount","getChain","getConfig","onConnectRequested","_args$onConnectReques","call","switchChain"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/wallets/coinbase/coinbase-wallet.ts"],"sourcesContent":["/**\n * internal helper functions\n */\n\nimport type { ProviderInterface } from \"@coinbase/wallet-sdk\";\nimport { trackConnect } from \"../../analytics/track/connect.js\";\nimport type { Chain } from \"../../chains/types.js\";\nimport { getCachedChainIfExists } from \"../../chains/utils.js\";\nimport { COINBASE } from \"../constants.js\";\nimport type { Account, Wallet } from \"../interfaces/wallet.js\";\nimport { createWalletEmitter } from \"../wallet-emitter.js\";\nimport type { CreateWalletArgs } from \"../wallet-types.js\";\n\n/**\n * @internal\n */\nexport function coinbaseWalletSDK(args: {\n  createOptions?: CreateWalletArgs<typeof COINBASE>[1];\n  providerFactory: () => Promise<ProviderInterface>;\n  onConnectRequested?: (provider: ProviderInterface) => Promise<void>;\n}): Wallet<typeof COINBASE> {\n  const { createOptions } = args;\n  const emitter = createWalletEmitter<typeof COINBASE>();\n  let account: Account | undefined;\n  let chain: Chain | undefined;\n\n  function reset() {\n    account = undefined;\n    chain = undefined;\n  }\n\n  let handleDisconnect = async () => {};\n\n  let handleSwitchChain = async (newChain: Chain) => {\n    chain = newChain;\n  };\n\n  const unsubscribeChainChanged = emitter.subscribe(\n    \"chainChanged\",\n    (newChain) => {\n      chain = newChain;\n    },\n  );\n\n  const unsubscribeDisconnect = emitter.subscribe(\"disconnect\", () => {\n    reset();\n    unsubscribeChainChanged();\n    unsubscribeDisconnect();\n  });\n\n  emitter.subscribe(\"accountChanged\", (_account) => {\n    account = _account;\n  });\n\n  return {\n    autoConnect: async (options) => {\n      const { autoConnectCoinbaseWalletSDK } = await import(\n        \"./coinbase-web.js\"\n      );\n      const provider = await args.providerFactory();\n      const [connectedAccount, connectedChain, doDisconnect, doSwitchChain] =\n        await autoConnectCoinbaseWalletSDK(options, emitter, provider);\n      // set the states\n      account = connectedAccount;\n      chain = connectedChain;\n      handleDisconnect = doDisconnect;\n      handleSwitchChain = doSwitchChain;\n      trackConnect({\n        chainId: chain.id,\n        client: options.client,\n        walletAddress: account.address,\n        walletType: COINBASE,\n      });\n      // return account\n      return account;\n    },\n    connect: async (options) => {\n      const { connectCoinbaseWalletSDK } = await import(\"./coinbase-web.js\");\n      const provider = await args.providerFactory();\n      const [connectedAccount, connectedChain, doDisconnect, doSwitchChain] =\n        await connectCoinbaseWalletSDK(options, emitter, provider);\n\n      // set the states\n      account = connectedAccount;\n      chain = connectedChain;\n      handleDisconnect = doDisconnect;\n      handleSwitchChain = doSwitchChain;\n      trackConnect({\n        chainId: chain.id,\n        client: options.client,\n        walletAddress: account.address,\n        walletType: COINBASE,\n      });\n      // return account\n      return account;\n    },\n    disconnect: async () => {\n      reset();\n      await handleDisconnect();\n    },\n    getAccount: () => account,\n    getChain() {\n      if (!chain) {\n        return undefined;\n      }\n\n      chain = getCachedChainIfExists(chain.id) || chain;\n      return chain;\n    },\n    getConfig: () => createOptions,\n    id: COINBASE,\n    onConnectRequested: async () => {\n      if (args.onConnectRequested) {\n        const provider = await args.providerFactory();\n        return args.onConnectRequested?.(provider);\n      }\n    },\n    subscribe: emitter.subscribe,\n    switchChain: async (newChain) => {\n      await handleSwitchChain(newChain);\n    },\n  };\n}\n"],"mappings":"AAAA;;;AAKA,SAASA,YAAY,QAAQ,kCAAkC;AAE/D,SAASC,sBAAsB,QAAQ,uBAAuB;AAC9D,SAASC,QAAQ,QAAQ,iBAAiB;AAE1C,SAASC,mBAAmB,QAAQ,sBAAsB;AAG1D;;;AAGA,OAAM,SAAUC,iBAAiBA,CAACC,IAIjC;EACC,MAAM;IAAEC;EAAa,CAAE,GAAGD,IAAI;EAC9B,MAAME,OAAO,GAAGJ,mBAAmB,EAAmB;EACtD,IAAIK,OAA4B;EAChC,IAAIC,KAAwB;EAE5B,SAASC,KAAKA,CAAA;IACZF,OAAO,GAAGG,SAAS;IACnBF,KAAK,GAAGE,SAAS;EACnB;EAEA,IAAIC,gBAAgB,GAAG,MAAAA,CAAA,KAAW,CAAE,CAAC;EAErC,IAAIC,iBAAiB,GAAG,MAAOC,QAAe,IAAI;IAChDL,KAAK,GAAGK,QAAQ;EAClB,CAAC;EAED,MAAMC,uBAAuB,GAAGR,OAAO,CAACS,SAAS,CAC/C,cAAc,EACbF,QAAQ,IAAI;IACXL,KAAK,GAAGK,QAAQ;EAClB,CAAC,CACF;EAED,MAAMG,qBAAqB,GAAGV,OAAO,CAACS,SAAS,CAAC,YAAY,EAAE,MAAK;IACjEN,KAAK,EAAE;IACPK,uBAAuB,EAAE;IACzBE,qBAAqB,EAAE;EACzB,CAAC,CAAC;EAEFV,OAAO,CAACS,SAAS,CAAC,gBAAgB,EAAGE,QAAQ,IAAI;IAC/CV,OAAO,GAAGU,QAAQ;EACpB,CAAC,CAAC;EAEF,OAAO;IACLC,WAAW,EAAE,MAAOC,OAAO,IAAI;MAC7B,MAAM;QAAEC;MAA4B,CAAE,GAAG,MAAM,MAAM,CACnD,mBAAmB,CACpB;MACD,MAAMC,QAAQ,GAAG,MAAMjB,IAAI,CAACkB,eAAe,EAAE;MAC7C,MAAM,CAACC,gBAAgB,EAAEC,cAAc,EAAEC,YAAY,EAAEC,aAAa,CAAC,GACnE,MAAMN,4BAA4B,CAACD,OAAO,EAAEb,OAAO,EAAEe,QAAQ,CAAC;MAChE;MACAd,OAAO,GAAGgB,gBAAgB;MAC1Bf,KAAK,GAAGgB,cAAc;MACtBb,gBAAgB,GAAGc,YAAY;MAC/Bb,iBAAiB,GAAGc,aAAa;MACjC3B,YAAY,CAAC;QACX4B,OAAO,EAAEnB,KAAK,CAACoB,EAAE;QACjBC,MAAM,EAAEV,OAAO,CAACU,MAAM;QACtBC,aAAa,EAAEvB,OAAO,CAACwB,OAAO;QAC9BC,UAAU,EAAE/B;OACb,CAAC;MACF;MACA,OAAOM,OAAO;IAChB,CAAC;IACD0B,OAAO,EAAE,MAAOd,OAAO,IAAI;MACzB,MAAM;QAAEe;MAAwB,CAAE,GAAG,MAAM,MAAM,CAAC,mBAAmB,CAAC;MACtE,MAAMb,QAAQ,GAAG,MAAMjB,IAAI,CAACkB,eAAe,EAAE;MAC7C,MAAM,CAACC,gBAAgB,EAAEC,cAAc,EAAEC,YAAY,EAAEC,aAAa,CAAC,GACnE,MAAMQ,wBAAwB,CAACf,OAAO,EAAEb,OAAO,EAAEe,QAAQ,CAAC;MAE5D;MACAd,OAAO,GAAGgB,gBAAgB;MAC1Bf,KAAK,GAAGgB,cAAc;MACtBb,gBAAgB,GAAGc,YAAY;MAC/Bb,iBAAiB,GAAGc,aAAa;MACjC3B,YAAY,CAAC;QACX4B,OAAO,EAAEnB,KAAK,CAACoB,EAAE;QACjBC,MAAM,EAAEV,OAAO,CAACU,MAAM;QACtBC,aAAa,EAAEvB,OAAO,CAACwB,OAAO;QAC9BC,UAAU,EAAE/B;OACb,CAAC;MACF;MACA,OAAOM,OAAO;IAChB,CAAC;IACD4B,UAAU,EAAE,MAAAA,CAAA,KAAW;MACrB1B,KAAK,EAAE;MACP,MAAME,gBAAgB,EAAE;IAC1B,CAAC;IACDyB,UAAU,EAAEA,CAAA,KAAM7B,OAAO;IACzB8B,QAAQA,CAAA;MACN,IAAI,CAAC7B,KAAK,EAAE;QACV,OAAOE,SAAS;MAClB;MAEAF,KAAK,GAAGR,sBAAsB,CAACQ,KAAK,CAACoB,EAAE,CAAC,IAAIpB,KAAK;MACjD,OAAOA,KAAK;IACd,CAAC;IACD8B,SAAS,EAAEA,CAAA,KAAMjC,aAAa;IAC9BuB,EAAE,EAAE3B,QAAQ;IACZsC,kBAAkB,EAAE,MAAAA,CAAA,KAAW;MAC7B,IAAInC,IAAI,CAACmC,kBAAkB,EAAE;QAAA,IAAAC,qBAAA;QAC3B,MAAMnB,QAAQ,GAAG,MAAMjB,IAAI,CAACkB,eAAe,EAAE;QAC7C,QAAAkB,qBAAA,GAAOpC,IAAI,CAACmC,kBAAkB,cAAAC,qBAAA,uBAAvBA,qBAAA,CAAAC,IAAA,CAAArC,IAAI,EAAsBiB,QAAQ,CAAC;MAC5C;IACF,CAAC;IACDN,SAAS,EAAET,OAAO,CAACS,SAAS;IAC5B2B,WAAW,EAAE,MAAO7B,QAAQ,IAAI;MAC9B,MAAMD,iBAAiB,CAACC,QAAQ,CAAC;IACnC;GACD;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}