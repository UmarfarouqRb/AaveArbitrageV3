{"ast":null,"code":"import _objectSpread from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n/**\n * Get contract events\n * @example\n * ```ts\n * import { Insight } from \"thirdweb\";\n *\n * const events = await Insight.getContractEvents({\n *   client,\n *   chains: [sepolia],\n *   contractAddress: \"0x1234567890123456789012345678901234567890\",\n *   event: transferEvent(),\n *   decodeLogs: true,\n * });\n * ```\n * @insight\n */\nexport async function getContractEvents(options) {\n  var _result$data$data, _result$data;\n  const [{\n    getV1EventsByContractAddress\n  }, {\n    getThirdwebDomains\n  }, {\n    getClientFetch\n  }, {\n    assertInsightEnabled\n  }, {\n    stringify\n  }] = await Promise.all([import(\"@thirdweb-dev/insight\"), import(\"../utils/domains.js\"), import(\"../utils/fetch.js\"), import(\"./common.js\"), import(\"../utils/json.js\")]);\n  const {\n    client,\n    chains,\n    contractAddress,\n    event,\n    queryOptions,\n    decodeLogs\n  } = options;\n  await assertInsightEnabled(chains);\n  const defaultQueryOptions = {\n    chain: chains.map(chain => chain.id),\n    decode: decodeLogs,\n    limit: 100\n  };\n  if (event) {\n    defaultQueryOptions.filter_topic_0 = event.topics[0];\n    defaultQueryOptions.filter_topic_1 = event.topics[1];\n    defaultQueryOptions.filter_topic_2 = event.topics[2];\n    defaultQueryOptions.filter_topic_3 = event.topics[3];\n  }\n  const result = await getV1EventsByContractAddress({\n    baseUrl: \"https://\".concat(getThirdwebDomains().insight),\n    fetch: getClientFetch(client),\n    path: {\n      contractAddress\n    },\n    query: _objectSpread(_objectSpread({}, defaultQueryOptions), queryOptions)\n  });\n  if (result.error) {\n    throw new Error(\"\".concat(result.response.status, \" \").concat(result.response.statusText, \" - \").concat(result.error ? stringify(result.error) : \"Unknown error\"));\n  }\n  return (_result$data$data = (_result$data = result.data) === null || _result$data === void 0 ? void 0 : _result$data.data) !== null && _result$data$data !== void 0 ? _result$data$data : [];\n}","map":{"version":3,"names":["getContractEvents","options","_result$data$data","_result$data","getV1EventsByContractAddress","getThirdwebDomains","getClientFetch","assertInsightEnabled","stringify","Promise","all","client","chains","contractAddress","event","queryOptions","decodeLogs","defaultQueryOptions","chain","map","id","decode","limit","filter_topic_0","topics","filter_topic_1","filter_topic_2","filter_topic_3","result","baseUrl","concat","insight","fetch","path","query","_objectSpread","error","Error","response","status","statusText","data"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/insight/get-events.ts"],"sourcesContent":["import type {\n  GetV1EventsByContractAddressData,\n  GetV1EventsByContractAddressResponse,\n} from \"@thirdweb-dev/insight\";\nimport type { AbiEvent } from \"ox/AbiEvent\";\nimport type { Chain } from \"../chains/types.js\";\nimport type { ThirdwebClient } from \"../client/client.js\";\nimport type { PreparedEvent } from \"../event/prepare-event.js\";\n\nexport type ContractEvent = NonNullable<\n  GetV1EventsByContractAddressResponse[\"data\"]\n>[number];\n\n/**\n * Get contract events\n * @example\n * ```ts\n * import { Insight } from \"thirdweb\";\n *\n * const events = await Insight.getContractEvents({\n *   client,\n *   chains: [sepolia],\n *   contractAddress: \"0x1234567890123456789012345678901234567890\",\n *   event: transferEvent(),\n *   decodeLogs: true,\n * });\n * ```\n * @insight\n */\nexport async function getContractEvents(options: {\n  client: ThirdwebClient;\n  chains: Chain[];\n  contractAddress: string;\n  event?: PreparedEvent<AbiEvent>;\n  decodeLogs?: boolean;\n  queryOptions?: Omit<\n    GetV1EventsByContractAddressData[\"query\"],\n    \"chain\" | \"decode\"\n  >;\n}): Promise<ContractEvent[]> {\n  const [\n    { getV1EventsByContractAddress },\n    { getThirdwebDomains },\n    { getClientFetch },\n    { assertInsightEnabled },\n    { stringify },\n  ] = await Promise.all([\n    import(\"@thirdweb-dev/insight\"),\n    import(\"../utils/domains.js\"),\n    import(\"../utils/fetch.js\"),\n    import(\"./common.js\"),\n    import(\"../utils/json.js\"),\n  ]);\n\n  const { client, chains, contractAddress, event, queryOptions, decodeLogs } =\n    options;\n\n  await assertInsightEnabled(chains);\n\n  const defaultQueryOptions: GetV1EventsByContractAddressData[\"query\"] = {\n    chain: chains.map((chain) => chain.id),\n    decode: decodeLogs,\n    limit: 100,\n  };\n\n  if (event) {\n    defaultQueryOptions.filter_topic_0 = event.topics[0];\n    defaultQueryOptions.filter_topic_1 = event.topics[1];\n    defaultQueryOptions.filter_topic_2 = event.topics[2];\n    defaultQueryOptions.filter_topic_3 = event.topics[3];\n  }\n\n  const result = await getV1EventsByContractAddress({\n    baseUrl: `https://${getThirdwebDomains().insight}`,\n    fetch: getClientFetch(client),\n    path: {\n      contractAddress,\n    },\n    query: {\n      ...defaultQueryOptions,\n      ...queryOptions,\n    },\n  });\n\n  if (result.error) {\n    throw new Error(\n      `${result.response.status} ${result.response.statusText} - ${result.error ? stringify(result.error) : \"Unknown error\"}`,\n    );\n  }\n\n  return result.data?.data ?? [];\n}\n"],"mappings":";AAaA;;;;;;;;;;;;;;;;AAgBA,OAAO,eAAeA,iBAAiBA,CAACC,OAUvC;EAAA,IAAAC,iBAAA,EAAAC,YAAA;EACC,MAAM,CACJ;IAAEC;EAA4B,CAAE,EAChC;IAAEC;EAAkB,CAAE,EACtB;IAAEC;EAAc,CAAE,EAClB;IAAEC;EAAoB,CAAE,EACxB;IAAEC;EAAS,CAAE,CACd,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CACpB,MAAM,CAAC,uBAAuB,CAAC,EAC/B,MAAM,CAAC,qBAAqB,CAAC,EAC7B,MAAM,CAAC,mBAAmB,CAAC,EAC3B,MAAM,CAAC,aAAa,CAAC,EACrB,MAAM,CAAC,kBAAkB,CAAC,CAC3B,CAAC;EAEF,MAAM;IAAEC,MAAM;IAAEC,MAAM;IAAEC,eAAe;IAAEC,KAAK;IAAEC,YAAY;IAAEC;EAAU,CAAE,GACxEf,OAAO;EAET,MAAMM,oBAAoB,CAACK,MAAM,CAAC;EAElC,MAAMK,mBAAmB,GAA8C;IACrEC,KAAK,EAAEN,MAAM,CAACO,GAAG,CAAED,KAAK,IAAKA,KAAK,CAACE,EAAE,CAAC;IACtCC,MAAM,EAAEL,UAAU;IAClBM,KAAK,EAAE;GACR;EAED,IAAIR,KAAK,EAAE;IACTG,mBAAmB,CAACM,cAAc,GAAGT,KAAK,CAACU,MAAM,CAAC,CAAC,CAAC;IACpDP,mBAAmB,CAACQ,cAAc,GAAGX,KAAK,CAACU,MAAM,CAAC,CAAC,CAAC;IACpDP,mBAAmB,CAACS,cAAc,GAAGZ,KAAK,CAACU,MAAM,CAAC,CAAC,CAAC;IACpDP,mBAAmB,CAACU,cAAc,GAAGb,KAAK,CAACU,MAAM,CAAC,CAAC,CAAC;EACtD;EAEA,MAAMI,MAAM,GAAG,MAAMxB,4BAA4B,CAAC;IAChDyB,OAAO,aAAAC,MAAA,CAAazB,kBAAkB,EAAE,CAAC0B,OAAO,CAAE;IAClDC,KAAK,EAAE1B,cAAc,CAACK,MAAM,CAAC;IAC7BsB,IAAI,EAAE;MACJpB;KACD;IACDqB,KAAK,EAAAC,aAAA,CAAAA,aAAA,KACAlB,mBAAmB,GACnBF,YAAY;GAElB,CAAC;EAEF,IAAIa,MAAM,CAACQ,KAAK,EAAE;IAChB,MAAM,IAAIC,KAAK,IAAAP,MAAA,CACVF,MAAM,CAACU,QAAQ,CAACC,MAAM,OAAAT,MAAA,CAAIF,MAAM,CAACU,QAAQ,CAACE,UAAU,SAAAV,MAAA,CAAMF,MAAM,CAACQ,KAAK,GAAG5B,SAAS,CAACoB,MAAM,CAACQ,KAAK,CAAC,GAAG,eAAe,CAAE,CACxH;EACH;EAEA,QAAAlC,iBAAA,IAAAC,YAAA,GAAOyB,MAAM,CAACa,IAAI,cAAAtC,YAAA,uBAAXA,YAAA,CAAasC,IAAI,cAAAvC,iBAAA,cAAAA,iBAAA,GAAI,EAAE;AAChC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}