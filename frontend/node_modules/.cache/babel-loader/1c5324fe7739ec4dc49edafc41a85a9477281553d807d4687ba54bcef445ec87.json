{"ast":null,"code":"\"use client\";\n\nimport _objectSpread from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/home/user/Arbitrage/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"href\", \"client\", \"ecosystem\", \"children\"];\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { getLastAuthProvider } from \"../../../react/core/utils/storage.js\";\nimport { webLocalStorage } from \"../../../utils/storage/webStorage.js\";\nimport { isEcosystemWallet } from \"../../../wallets/ecosystem/is-ecosystem-wallet.js\";\nimport { ClientScopedStorage } from \"../../../wallets/in-app/core/authentication/client-scoped-storage.js\";\nimport { useActiveWallet } from \"../../core/hooks/wallets/useActiveWallet.js\";\n/**\n * Creates a link to another thirdweb-supported site with wallet connection parameters.\n *\n *  The target site must support the connected wallet (ecosystem or in-app).\n *\n * @param {Object} props - The props to pass to the anchor tag\n * @param {String} props.href - The URL of the site to link to\n * @param {ThirdwebClient} props.client - The current site's thirdweb client\n * @param {Ecosystem} [props.ecosystem] - The ecosystem to use for the wallet connection in the target site\n * @param {React.ReactNode} props.children - The content to render inside the link\n *\n * @example\n * ```tsx\n * import { SiteLink } from \"thirdweb/react\";\n *\n * <SiteLink href=\"https://thirdweb.com\" client={thirdwebClient} ecosystem={{ id: \"ecosystem.thirdweb\" }}>\n *   Visit Site\n * </SiteLink>\n * ```\n * @walletConnection\n */\nexport function SiteLink(_ref) {\n  let {\n      href,\n      client,\n      ecosystem,\n      children\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  if (!client.clientId) {\n    throw new Error(\"The SiteLink client must have a clientId\");\n  }\n  const activeWallet = useActiveWallet();\n  const walletId = activeWallet === null || activeWallet === void 0 ? void 0 : activeWallet.id;\n  const {\n    data: {\n      authProvider,\n      authCookie\n    } = {}\n  } = useQuery({\n    enabled: activeWallet && (isEcosystemWallet(activeWallet) || walletId === \"inApp\" || walletId === \"smart\"),\n    queryFn: async () => {\n      const storage = new ClientScopedStorage({\n        clientId: client.clientId,\n        ecosystem,\n        storage: webLocalStorage\n      });\n      const authProvider = await getLastAuthProvider(webLocalStorage);\n      const authCookie = await storage.getAuthCookie();\n      return {\n        authCookie,\n        authProvider\n      };\n    },\n    queryKey: [\"site-link\", walletId, href, client.clientId, ecosystem]\n  });\n  const url = new URL(href);\n  if (walletId) {\n    url.searchParams.set(\"walletId\", walletId === \"smart\" ? \"inApp\" : walletId);\n  }\n  if (authProvider) {\n    url.searchParams.set(\"authProvider\", authProvider);\n  }\n  if (authCookie) {\n    url.searchParams.set(\"authCookie\", authCookie);\n  }\n  return _jsx(\"a\", _objectSpread(_objectSpread({\n    href: encodeURI(url.toString())\n  }, props), {}, {\n    children: children\n  }));\n}","map":{"version":3,"names":["_objectSpread","_objectWithoutProperties","_excluded","useQuery","getLastAuthProvider","webLocalStorage","isEcosystemWallet","ClientScopedStorage","useActiveWallet","SiteLink","_ref","href","client","ecosystem","children","props","clientId","Error","activeWallet","walletId","id","data","authProvider","authCookie","enabled","queryFn","storage","getAuthCookie","queryKey","url","URL","searchParams","set","_jsx","encodeURI","toString"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/web/ui/SiteLink.tsx"],"sourcesContent":["\"use client\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport type { ThirdwebClient } from \"../../../client/client.js\";\nimport { getLastAuthProvider } from \"../../../react/core/utils/storage.js\";\nimport { webLocalStorage } from \"../../../utils/storage/webStorage.js\";\nimport { isEcosystemWallet } from \"../../../wallets/ecosystem/is-ecosystem-wallet.js\";\nimport { ClientScopedStorage } from \"../../../wallets/in-app/core/authentication/client-scoped-storage.js\";\nimport type { Ecosystem } from \"../../../wallets/in-app/core/wallet/types.js\";\nimport { useActiveWallet } from \"../../core/hooks/wallets/useActiveWallet.js\";\n\n/**\n * Creates a link to another thirdweb-supported site with wallet connection parameters.\n *\n *  The target site must support the connected wallet (ecosystem or in-app).\n *\n * @param {Object} props - The props to pass to the anchor tag\n * @param {String} props.href - The URL of the site to link to\n * @param {ThirdwebClient} props.client - The current site's thirdweb client\n * @param {Ecosystem} [props.ecosystem] - The ecosystem to use for the wallet connection in the target site\n * @param {React.ReactNode} props.children - The content to render inside the link\n *\n * @example\n * ```tsx\n * import { SiteLink } from \"thirdweb/react\";\n *\n * <SiteLink href=\"https://thirdweb.com\" client={thirdwebClient} ecosystem={{ id: \"ecosystem.thirdweb\" }}>\n *   Visit Site\n * </SiteLink>\n * ```\n * @walletConnection\n */\nexport function SiteLink({\n  href,\n  client,\n  ecosystem,\n  children,\n  ...props\n}: {\n  href: string;\n  client: ThirdwebClient;\n  ecosystem?: Ecosystem;\n  children: React.ReactNode;\n} & Omit<React.AnchorHTMLAttributes<HTMLAnchorElement>, \"href\">) {\n  if (!client.clientId) {\n    throw new Error(\"The SiteLink client must have a clientId\");\n  }\n\n  const activeWallet = useActiveWallet();\n  const walletId = activeWallet?.id;\n\n  const { data: { authProvider, authCookie } = {} } = useQuery({\n    enabled:\n      activeWallet &&\n      (isEcosystemWallet(activeWallet) ||\n        walletId === \"inApp\" ||\n        walletId === \"smart\"),\n    queryFn: async () => {\n      const storage = new ClientScopedStorage({\n        clientId: client.clientId,\n        ecosystem,\n        storage: webLocalStorage,\n      });\n\n      const authProvider = await getLastAuthProvider(webLocalStorage);\n      const authCookie = await storage.getAuthCookie();\n\n      return { authCookie, authProvider };\n    },\n    queryKey: [\"site-link\", walletId, href, client.clientId, ecosystem],\n  });\n\n  const url = new URL(href);\n  if (walletId) {\n    url.searchParams.set(\"walletId\", walletId === \"smart\" ? \"inApp\" : walletId);\n  }\n  if (authProvider) {\n    url.searchParams.set(\"authProvider\", authProvider);\n  }\n  if (authCookie) {\n    url.searchParams.set(\"authCookie\", authCookie);\n  }\n\n  return (\n    <a href={encodeURI(url.toString())} {...props}>\n      {children}\n    </a>\n  );\n}\n"],"mappings":"AAAA,YAAY;;AAAC,OAAAA,aAAA;AAAA,OAAAC,wBAAA;AAAA,MAAAC,SAAA;;AACb,SAASC,QAAQ,QAAQ,uBAAuB;AAEhD,SAASC,mBAAmB,QAAQ,sCAAsC;AAC1E,SAASC,eAAe,QAAQ,sCAAsC;AACtE,SAASC,iBAAiB,QAAQ,mDAAmD;AACrF,SAASC,mBAAmB,QAAQ,sEAAsE;AAE1G,SAASC,eAAe,QAAQ,6CAA6C;AAE7E;;;;;;;;;;;;;;;;;;;;;AAqBA,OAAM,SAAUC,QAAQA,CAAAC,IAAA,EAWuC;EAAA,IAXtC;MACvBC,IAAI;MACJC,MAAM;MACNC,SAAS;MACTC;IACQ,CAMqD,GAAAJ,IAAA;IAN1DK,KAAK,GAAAd,wBAAA,CAAAS,IAAA,EAAAR,SAAA;EAOR,IAAI,CAACU,MAAM,CAACI,QAAQ,EAAE;IACpB,MAAM,IAAIC,KAAK,CAAC,0CAA0C,CAAC;EAC7D;EAEA,MAAMC,YAAY,GAAGV,eAAe,EAAE;EACtC,MAAMW,QAAQ,GAAGD,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEE,EAAE;EAEjC,MAAM;IAAEC,IAAI,EAAE;MAAEC,YAAY;MAAEC;IAAU,CAAE,GAAG;EAAE,CAAE,GAAGpB,QAAQ,CAAC;IAC3DqB,OAAO,EACLN,YAAY,KACXZ,iBAAiB,CAACY,YAAY,CAAC,IAC9BC,QAAQ,KAAK,OAAO,IACpBA,QAAQ,KAAK,OAAO,CAAC;IACzBM,OAAO,EAAE,MAAAA,CAAA,KAAW;MAClB,MAAMC,OAAO,GAAG,IAAInB,mBAAmB,CAAC;QACtCS,QAAQ,EAAEJ,MAAM,CAACI,QAAQ;QACzBH,SAAS;QACTa,OAAO,EAAErB;OACV,CAAC;MAEF,MAAMiB,YAAY,GAAG,MAAMlB,mBAAmB,CAACC,eAAe,CAAC;MAC/D,MAAMkB,UAAU,GAAG,MAAMG,OAAO,CAACC,aAAa,EAAE;MAEhD,OAAO;QAAEJ,UAAU;QAAED;MAAY,CAAE;IACrC,CAAC;IACDM,QAAQ,EAAE,CAAC,WAAW,EAAET,QAAQ,EAAER,IAAI,EAAEC,MAAM,CAACI,QAAQ,EAAEH,SAAS;GACnE,CAAC;EAEF,MAAMgB,GAAG,GAAG,IAAIC,GAAG,CAACnB,IAAI,CAAC;EACzB,IAAIQ,QAAQ,EAAE;IACZU,GAAG,CAACE,YAAY,CAACC,GAAG,CAAC,UAAU,EAAEb,QAAQ,KAAK,OAAO,GAAG,OAAO,GAAGA,QAAQ,CAAC;EAC7E;EACA,IAAIG,YAAY,EAAE;IAChBO,GAAG,CAACE,YAAY,CAACC,GAAG,CAAC,cAAc,EAAEV,YAAY,CAAC;EACpD;EACA,IAAIC,UAAU,EAAE;IACdM,GAAG,CAACE,YAAY,CAACC,GAAG,CAAC,YAAY,EAAET,UAAU,CAAC;EAChD;EAEA,OACEU,IAAA,MAAAjC,aAAA,CAAAA,aAAA;IAAGW,IAAI,EAAEuB,SAAS,CAACL,GAAG,CAACM,QAAQ,EAAE;EAAC,GAAMpB,KAAK;IAAAD,QAAA,EAC1CA;EAAQ,GACP;AAER","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}