{"ast":null,"code":"import { useQuery } from \"@tanstack/react-query\";\nimport { tokens } from \"../../../../../bridge/Token.js\";\nimport { isAddress } from \"../../../../../utils/address.js\";\nimport { getThirdwebBaseUrl } from \"../../../../../utils/domains.js\";\nexport function useTokens(options) {\n  return useQuery({\n    queryKey: [\"tokens\", options],\n    enabled: !!options.chainId,\n    retry: false,\n    queryFn: () => {\n      if (!options.chainId) {\n        throw new Error(\"Chain ID is required\");\n      }\n      const isSearchAddress = options.search ? isAddress(options.search) : false;\n      return tokens({\n        chainId: options.chainId,\n        client: options.client,\n        offset: options.offset,\n        limit: options.limit,\n        includePrices: false,\n        query: options.search && !isSearchAddress ? options.search : undefined,\n        tokenAddress: options.search && isSearchAddress ? options.search : undefined\n      });\n    }\n  });\n}\nexport function useTokenBalances(options) {\n  return useQuery({\n    queryKey: [\"bridge/v1/wallets\", options],\n    enabled: !!options.chainId && !!options.walletAddress,\n    queryFn: async () => {\n      if (!options.chainId || !options.walletAddress) {\n        throw new Error(\"invalid options\");\n      }\n      const baseUrl = getThirdwebBaseUrl(\"bridge\");\n      const isDev = baseUrl.includes(\"thirdweb-dev\");\n      const url = new URL(\"https://api.\".concat(isDev ? \"thirdweb-dev\" : \"thirdweb\", \".com/v1/wallets/\").concat(options.walletAddress, \"/tokens\"));\n      url.searchParams.set(\"chainId\", options.chainId.toString());\n      url.searchParams.set(\"limit\", options.limit.toString());\n      url.searchParams.set(\"page\", options.page.toString());\n      url.searchParams.set(\"metadata\", \"true\");\n      url.searchParams.set(\"resolveMetadataLinks\", \"true\");\n      url.searchParams.set(\"includeSpam\", \"false\");\n      url.searchParams.set(\"includeNative\", \"true\");\n      url.searchParams.set(\"sortBy\", \"usd_value\");\n      url.searchParams.set(\"sortOrder\", \"desc\");\n      url.searchParams.set(\"includeWithoutPrice\", \"false\"); // filter out tokens with no price\n      const response = await fetch(url.toString(), {\n        headers: {\n          \"x-client-id\": options.clientId\n        }\n      });\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch token balances: \".concat(response.statusText));\n      }\n      const json = await response.json();\n      return json.result;\n    },\n    refetchOnMount: false,\n    retry: false,\n    refetchOnWindowFocus: false\n  });\n}","map":{"version":3,"names":["useQuery","tokens","isAddress","getThirdwebBaseUrl","useTokens","options","queryKey","enabled","chainId","retry","queryFn","Error","isSearchAddress","search","client","offset","limit","includePrices","query","undefined","tokenAddress","useTokenBalances","walletAddress","baseUrl","isDev","includes","url","URL","concat","searchParams","set","toString","page","response","fetch","headers","clientId","ok","statusText","json","result","refetchOnMount","refetchOnWindowFocus"],"sources":["/home/user/Arbitrage/frontend/node_modules/thirdweb/src/react/web/ui/Bridge/swap-widget/use-tokens.ts"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\";\nimport type { Token } from \"../../../../../bridge/index.js\";\nimport { tokens } from \"../../../../../bridge/Token.js\";\nimport type { ThirdwebClient } from \"../../../../../client/client.js\";\nimport { isAddress } from \"../../../../../utils/address.js\";\nimport { getThirdwebBaseUrl } from \"../../../../../utils/domains.js\";\n\nexport function useTokens(options: {\n  client: ThirdwebClient;\n  chainId?: number;\n  search?: string;\n  offset: number;\n  limit: number;\n}) {\n  return useQuery<Token[]>({\n    queryKey: [\"tokens\", options],\n    enabled: !!options.chainId,\n    retry: false,\n    queryFn: () => {\n      if (!options.chainId) {\n        throw new Error(\"Chain ID is required\");\n      }\n\n      const isSearchAddress = options.search\n        ? isAddress(options.search)\n        : false;\n\n      return tokens({\n        chainId: options.chainId,\n        client: options.client,\n        offset: options.offset,\n        limit: options.limit,\n        includePrices: false,\n        query: options.search && !isSearchAddress ? options.search : undefined,\n        tokenAddress:\n          options.search && isSearchAddress ? options.search : undefined,\n      });\n    },\n  });\n}\n\nexport type TokenBalance = {\n  balance: string;\n  chain_id: number;\n  decimals: number;\n  name: string;\n  icon_uri: string;\n  price_data: {\n    circulating_supply: number;\n    market_cap_usd: number;\n    percent_change_24h: number;\n    price_timestamp: string;\n    price_usd: number;\n    total_supply: number;\n    usd_value: number;\n    volume_24h_usd: number;\n  };\n  symbol: string;\n  token_address: string;\n};\n\ntype TokenBalancesResponse = {\n  result: {\n    pagination: {\n      hasMore: boolean;\n      limit: number;\n      page: number;\n      totalCount: number;\n    };\n    tokens: TokenBalance[];\n  };\n};\n\nexport function useTokenBalances(options: {\n  clientId: string;\n  page: number;\n  limit: number;\n  walletAddress: string | undefined;\n  chainId: number | undefined;\n}) {\n  return useQuery({\n    queryKey: [\"bridge/v1/wallets\", options],\n    enabled: !!options.chainId && !!options.walletAddress,\n    queryFn: async () => {\n      if (!options.chainId || !options.walletAddress) {\n        throw new Error(\"invalid options\");\n      }\n      const baseUrl = getThirdwebBaseUrl(\"bridge\");\n      const isDev = baseUrl.includes(\"thirdweb-dev\");\n      const url = new URL(\n        `https://api.${isDev ? \"thirdweb-dev\" : \"thirdweb\"}.com/v1/wallets/${options.walletAddress}/tokens`,\n      );\n      url.searchParams.set(\"chainId\", options.chainId.toString());\n      url.searchParams.set(\"limit\", options.limit.toString());\n      url.searchParams.set(\"page\", options.page.toString());\n      url.searchParams.set(\"metadata\", \"true\");\n      url.searchParams.set(\"resolveMetadataLinks\", \"true\");\n      url.searchParams.set(\"includeSpam\", \"false\");\n      url.searchParams.set(\"includeNative\", \"true\");\n      url.searchParams.set(\"sortBy\", \"usd_value\");\n      url.searchParams.set(\"sortOrder\", \"desc\");\n      url.searchParams.set(\"includeWithoutPrice\", \"false\"); // filter out tokens with no price\n\n      const response = await fetch(url.toString(), {\n        headers: {\n          \"x-client-id\": options.clientId,\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(\n          `Failed to fetch token balances: ${response.statusText}`,\n        );\n      }\n\n      const json = (await response.json()) as TokenBalancesResponse;\n      return json.result;\n    },\n    refetchOnMount: false,\n    retry: false,\n    refetchOnWindowFocus: false,\n  });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}