{"version":3,"file":"static/js/20176.fc8ea5a3.chunk.js","mappings":"iLAOOA,eAAeC,EACpBC,EACAC,EACAC,EACAC,GAA+B,IAAAC,EAE/B,GAAIC,EAAAA,EACF,OAAOC,EAAAA,EAAAA,GAAiBL,GAG1B,MAEMM,QAAYC,EAAAA,EAAAA,IAAeR,EAAfQ,CAAuB,WAADC,QAC3BC,EAAAA,EAAAA,MAAqBC,QAAO,gBACvC,CACEC,KAAMX,EACNY,QANyB,CAAC,EAO1BC,OAAQ,OACRC,kBACe,QAAbX,EAAAJ,EAAOgB,cAAM,IAAAZ,GAAS,QAATA,EAAbA,EAAeO,eAAO,IAAAP,GAAO,QAAPA,EAAtBA,EAAwBa,aAAK,IAAAb,OAAA,EAA7BA,EAA+BW,mBAAoB,KAErDG,cAAc,IAIlB,IAAKX,EAAIY,GAAI,CACX,GAAmB,MAAfZ,EAAIa,OACN,MAAM,IAAIC,MACR,iEAGJ,GAAmB,MAAfd,EAAIa,OACN,MAAM,IAAIC,MACR,yGAGJ,GAAmB,MAAfd,EAAIa,OACN,MAAM,IAAIC,MACR,8DAGJ,MAAM,IAAIA,MAAM,oCAADZ,OACuBF,EAAIa,OAAM,OAAAX,OAAMF,EAAIe,YAE5D,CAEA,MAEMC,SAFahB,EAAIiB,QAENC,SACjB,IAAKF,EACH,MAAM,IAAIF,MAAM,4CAGlB,OAAW,OAAPlB,QAAO,IAAPA,GAAAA,EAASuB,uBACJ,CAAC,UAADjB,OAAWc,IAEbrB,EAAUyB,IAAKC,GAAI,UAAAnB,OAAec,EAAG,KAAAd,OAAImB,GAClD,C","sources":["../node_modules/thirdweb/src/storage/upload/web-node.ts"],"sourcesContent":["import type { ThirdwebClient } from \"../../client/client.js\";\nimport { getThirdwebDomains } from \"../../utils/domains.js\";\nimport { getClientFetch } from \"../../utils/fetch.js\";\nimport { IS_TEST } from \"../../utils/process.js\";\nimport { addToMockStorage } from \"../mock.js\";\nimport type { UploadableFile, UploadOptions } from \"./types.js\";\n\nexport async function uploadBatch<const TFiles extends UploadableFile[]>(\n  client: ThirdwebClient,\n  form: FormData,\n  fileNames: string[],\n  options?: UploadOptions<TFiles>,\n) {\n  if (IS_TEST) {\n    return addToMockStorage(form);\n  }\n\n  const headers: HeadersInit = {};\n\n  const res = await getClientFetch(client)(\n    `https://${getThirdwebDomains().storage}/ipfs/upload`,\n    {\n      body: form,\n      headers,\n      method: \"POST\",\n      requestTimeoutMs:\n        client.config?.storage?.fetch?.requestTimeoutMs || 120000,\n      // force auth token usage for storage uploads\n      useAuthToken: true,\n    },\n  );\n\n  if (!res.ok) {\n    if (res.status === 401) {\n      throw new Error(\n        \"Unauthorized - You don't have permission to use this service.\",\n      );\n    }\n    if (res.status === 402) {\n      throw new Error(\n        \"You have reached your storage limit. Please add a valid payment method to continue using the service.\",\n      );\n    }\n    if (res.status === 403) {\n      throw new Error(\n        \"Forbidden - You don't have permission to use this service.\",\n      );\n    }\n    throw new Error(\n      `Failed to upload files to IPFS - ${res.status} - ${res.statusText}`,\n    );\n  }\n\n  const body = await res.json();\n\n  const cid = body.IpfsHash;\n  if (!cid) {\n    throw new Error(\"Failed to upload files to IPFS - Bad CID\");\n  }\n\n  if (options?.uploadWithoutDirectory) {\n    return [`ipfs://${cid}`];\n  }\n  return fileNames.map((name) => `ipfs://${cid}/${name}`);\n}\n"],"names":["async","uploadBatch","client","form","fileNames","options","_client$config","IS_TEST","addToMockStorage","res","getClientFetch","concat","getThirdwebDomains","storage","body","headers","method","requestTimeoutMs","config","fetch","useAuthToken","ok","status","Error","statusText","cid","json","IpfsHash","uploadWithoutDirectory","map","name"],"sourceRoot":""}