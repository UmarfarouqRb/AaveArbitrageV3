"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[62239],{17477:(t,n,a)=>{a.d(n,{inAppWalletGetCallsStatus:()=>m,inAppWalletSendCalls:()=>b});var e=a(8),s=a(75666),c=a(72364),o=a(30293),r=a(83583);async function i(t){const n=await(0,o.sendTransaction)(t);return(0,r.L)(n)}var l=a(46325),u=a(79002);var d=a(65304),h=a(41940);const f=new d.A(1e3);async function b(t){const{account:n,calls:a}=t,s=a.map(n=>(0,e.A)((0,e.A)({},n),{},{chain:t.chain})),c=[],o=(0,h.O)(65);if(f.set(o,c),n.sendBatchTransaction){const t=await async function(t){const{account:n,transactions:a}=t;if(!n)throw new Error("not connected");if(0===a.length)throw new Error("No transactions to send");const s=a[0];if(!s)throw new Error("No transactions to send");if(n.sendBatchTransaction){const t=await Promise.all(a.map(async t=>{const[n,a,e,s]=await Promise.all([(0,u.encode)(t),(0,l.r)(t.to),(0,l.r)(t.accessList),(0,l.r)(t.value)]);return{accessList:e,chainId:t.chain.id,data:n,to:a,value:s}})),c=await n.sendBatchTransaction(t);return(0,e.A)((0,e.A)({},c),{},{chain:s.chain,client:s.client})}throw new Error("Account doesn't implement sendBatchTransaction")}({account:n,transactions:s});c.push(t.transactionHash),f.set(o,c)}else for(const e of s){const t=await i({account:n,transaction:e});c.push(t.transactionHash),f.set(o,c)}return o}async function m(t){const{chain:n,client:a,id:e}=t,o=f.get(e);if(!o)throw new Error("Failed to get calls status, unknown bundle id");const r=(0,c.getRpcClient)({chain:n,client:a});let i="success";const l=await Promise.all(o.map(t=>(0,s.l)(r,{hash:t}).then(t=>({blockHash:t.blockHash,blockNumber:t.blockNumber,gasUsed:t.gasUsed,logs:t.logs.map(t=>({address:t.address,data:t.data,topics:t.topics})),status:t.status,transactionHash:t.transactionHash})).catch(()=>(i="pending",null))));return{atomic:!1,chainId:n.id,id:e,receipts:l.filter(t=>null!==t),status:i,statusCode:200,version:"2.0.0"}}},62600:(t,n,a)=>{function e(t){return new Promise(n=>setTimeout(n,t))}a.d(n,{y:()=>e})},75666:(t,n,a)=>{a.d(n,{l:()=>i});var e=a(8),s=a(67962);var c=a(83213);const o={"0x0":"reverted","0x1":"success"};function r(t){const n=(0,e.A)((0,e.A)({},t),{},{blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(t=>function(t){let{args:n,eventName:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.A)((0,e.A)({},t),{},{blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null},a?{args:n,eventName:a}:{})}(t)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?(0,s.ME)(t.transactionIndex):null,status:t.status?o[t.status]:null,type:t.type?c.b4[t.type]||t.type:null});return t.blobGasPrice&&(n.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(n.blobGasUsed=BigInt(t.blobGasUsed)),n}async function i(t,n){const a=await t({method:"eth_getTransactionReceipt",params:[n.hash]});if(!a)throw new Error("Transaction receipt not found.");return r(a)}},83583:(t,n,a)=>{a.d(n,{L:()=>w});var e=a(75666),s=a(72364),c=a(62600),o=a(3340);const r=5e3,i=1e3,l=500,u=2,d=10;function h(t,n,a,e){let h,f,b=[],m=[],w=!1;const g=(0,s.getRpcClient)({chain:n,client:t});async function p(){if(!w)return;try{const t=await async function(t){const n=await t({method:"eth_blockNumber"});return(0,o.uU)(n)}(g);if(!h||t>h){let n=[];if(h)for(let e=h+1n;e<=t;e++)n.push(BigInt(e));else n=[t];h=t;const a=Date.now();if(f){const t=(a-f)/n.length;m.push(t),m=m.slice(-d)}f=a;for(const t of n)for(const n of b)n(t)}}catch(s){e?e(s):console.error("[watchBlockNumber]: Failed to poll for latest block number: ".concat(s))}const t=function(t){for(;t.length<d;)t.unshift(i);return t.reduce((t,n)=>t+n,0)/t.length}(m),n=Math.max(l,Math.min(r,Math.max(l,t)));await(0,c.y)(n/(null!==a&&void 0!==a?a:u)),p()}return function(t,n){return b.push(t),w||(h=n,w=!0,p()),function(){b=b.filter(n=>n!==t),0===b.length&&(h=void 0,f=void 0,w=!1)}}}const f=new Map;const b=100,m=new Map;function w(t){var n;const{transactionHash:a,chain:c,client:o}=t,r=c.id,i="".concat(r,":tx_").concat(a),l=null!==(n=t.maxBlocksWaitTime)&&void 0!==n?n:b;if(m.has(i))return m.get(i);const u=new Promise((t,n)=>{a||n(new Error("Transaction has no transactionHash to wait for, did you execute it?"));const r=(0,s.getRpcClient)({chain:c,client:o});let i=-1;const u=function(t){const{client:n,chain:a,onNewBlockNumber:e,overPollRatio:s,latestBlockNumber:c,onError:o}=t,r=a.id;let i=f.get(r);return i||(i=h(n,a,s,o),f.set(r,i)),i(e,c)}({chain:c,client:o,onNewBlockNumber:async()=>{if(i++,i>=l)return u(),void n(new Error("Transaction receipt for ".concat(a," not found after ").concat(l," blocks")));try{const n=await(0,e.l)(r,{hash:a});u(),t(n)}catch(s){}}})}).finally(()=>{m.delete(i)});return m.set(i,u),u}}}]);
//# sourceMappingURL=62239.66c9e9ee.chunk.js.map