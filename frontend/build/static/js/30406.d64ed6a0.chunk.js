"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[30406],{30406:(e,t,n)=>{n.d(t,{upload:()=>g});var r=n(8),i=n(966),o=n(77717);function a(e){return"object"===typeof e&&null!==e}var f=n(43830);function l(e){return globalThis.File&&e instanceof File}function c(e){return!!e&&(!!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a(e)&&t.every(t=>t in e)}(e,["data","name"])&&!("string"!==typeof e.name||"string"!==typeof e.data&&!(0,f.mg)(e.data)))}function s(e,t){if(l(e)&&l(t)){if(e.name===t.name&&e.lastModified===t.lastModified&&e.size===t.size)return!0}else{if((0,f.mg)(e)&&(0,f.mg)(t))return(0,f.tv)(e,t);if(c(e)&&c(t)&&e.name===t.name){if("string"===typeof e.data&&"string"===typeof t.data)return e.data===t.data;if((0,f.mg)(e.data)&&(0,f.mg)(t.data))return(0,f.tv)(e.data,t.data)}}return!1}function u(e){return l(e)||(0,f.mg)(e)||c(e)}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(u(e))return t.push(e),t;if("object"===typeof e){if(!e)return t;if(Array.isArray(e))for(const n of e)p(n,t);else Object.keys(e).map(n=>p(e[n],t))}return t}function d(e,t){if(u(e)){if(t.length)return t.shift();console.warn("Not enough URIs to replace all files in object.")}return"object"===typeof e&&e?Array.isArray(e)?e.map(e=>d(e,t)):Object.fromEntries(Object.entries(e).map(e=>{let[n,r]=e;return[n,d(r,t)]})):e}function m(e){return"string"===typeof e?function(e){if(e.includes("/ipfs/")){const t=e.split("/ipfs/")[1];return"ipfs://".concat(t)}return e}(e):"object"===typeof e&&e?u(e)?e:Array.isArray(e)?e.map(e=>m(e)):Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t,m(n)]})):e}async function g(e){if(0===e.files.length)return null;let t;if(e.files.map(e=>u(e)||"string"===typeof e).every(e=>!!e))t=e.files;else{let n=e.files;n=m(n);const i=p(n);if(i.length){const t=await g((0,r.A)((0,r.A)({},e),{},{files:i}));n=d(n,Array.isArray(t)?t:[t])}t=n.map(e=>"string"===typeof e?e:(0,o.A)(e))}const a=new FormData,{fileNames:f,form:y}=function(e,t,n){const i=new Map,o=[];for(let r=0;r<t.length;r++){const a=t[r];let f="",u=a;if(l(a))if(null!==n&&void 0!==n&&n.rewriteFileNames){let e="";if(a.name){const t=a.name.lastIndexOf(".");t>-1&&(e=a.name.substring(t))}f="".concat(r+n.rewriteFileNames.fileStartNumber).concat(e)}else f="".concat(a.name);else c(a)?(u=a.data,f=null!==n&&void 0!==n&&n.rewriteFileNames?"".concat(r+n.rewriteFileNames.fileStartNumber):"".concat(a.name)):f=null!==n&&void 0!==n&&n.rewriteFileNames?"".concat(r+n.rewriteFileNames.fileStartNumber):"".concat(r);const p=null!==n&&void 0!==n&&n.uploadWithoutDirectory?"files":"files/".concat(f);if(i.has(f)){if(s(i.get(f),a)){o.push(f);continue}throw new Error("[DUPLICATE_FILE_NAME_ERROR] File name ".concat(f," was passed for more than one different file."))}i.set(f,a),o.push(f),e.append("file",new Blob([u]),p)}const a={keyvalues:(0,r.A)({},null===n||void 0===n?void 0:n.metadata),name:"Storage SDK"};return e.append("pinataMetadata",JSON.stringify(a)),null!==n&&void 0!==n&&n.uploadWithoutDirectory&&e.append("pinataOptions",JSON.stringify({wrapWithDirectory:!1})),{fileNames:o.map(e=>encodeURIComponent(e)),form:e}}(a,t,e),h=(0,i.l)();if("browser"===h||"node"===h){const{uploadBatch:t}=await n.e(20176).then(n.bind(n,20176)),r=await t(e.client,y,f,e);return 1===e.files.length?r[0]:r}throw new Error("Please, use the uploadMobile function in mobile environments.")}},43830:(e,t,n)=>{let r;n.d(t,{tv:()=>f,QM:()=>u,pM:()=>s,mg:()=>a});const i="[object Uint8Array]";function o(e){if(!a(e))throw new TypeError("Expected `Uint8Array`, got `".concat(typeof e,"`"))}function a(e){return!!e&&(e.constructor===Uint8Array||Object.prototype.toString.call(e)===i)}function f(e,t){if(o(e),o(t),e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function l(e){return o(e),(r||(r=new TextDecoder),r).decode(e)}function c(e){if("string"!==typeof e)throw new TypeError("Expected `string`, got `".concat(typeof e,"`"))}function s(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");const n=t.length%4;return 0!==n&&(t+="=".repeat(4-n)),t}function u(e){return c(e),l(function(e){return c(e),Uint8Array.from(globalThis.atob(s(e)),e=>e.codePointAt(0))}(e))}}}]);
//# sourceMappingURL=30406.d64ed6a0.chunk.js.map