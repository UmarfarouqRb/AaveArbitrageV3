"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[42244],{2442:(e,n,t)=>{t.d(n,{a:()=>v});var i=t(70579),l=t(65043),r=t(22318),a=t(81270),o=t(31512),c=t(89199),s=t(73310),d=t(74394),u=t(64339),p=t(14494),h=t(34153),x=t(4230),m=t(70844),g=t(43571),f=t(27238);function v(e){const{wallet:n,done:t,client:r,chain:o,size:s,locale:d}=e,[u,h]=(0,l.useState)("loading"),m=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{m.current||(m.current=!0,(0,c.A)(r,(0,a.Y)(n.id)?n.id:void 0).then(e=>{h(e?"login":"select")}).catch(()=>{h("select")}))},[r,n.id]),(0,i.jsxs)(p.mc,{animate:"fadein",flex:"column",fullHeight:!0,children:[(0,i.jsx)(p.mc,{p:"lg",children:(0,i.jsx)(p.rQ,{onBack:e.onBack,title:e.isLinking?d.passkeys.linkPasskey:d.passkeys.title})}),(0,i.jsx)(p.mc,{center:"y",expand:!0,flex:"column",px:"wide"===s?"xxl":"lg",children:(0,i.jsxs)("div",{children:["loading"===u&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.x,{}),(0,i.jsx)(x.h,{y:"xxl"})]}),"select"===u&&(0,i.jsx)(w,{onSignin:()=>{h("login")},onSignup:()=>{h("signup")}}),"login"===u&&(0,i.jsx)(y,{chain:o,client:r,done:t,isLinking:e.isLinking,onCreate:()=>{h("signup")},wallet:n}),"signup"===u&&(0,i.jsx)(j,{chain:o,client:r,done:t,isLinking:e.isLinking,wallet:n})]})})]})}function y(e){const{wallet:n,done:t,client:a,chain:c}=e,[p,g]=(0,l.useState)("loading"),[v,y]=(0,l.useState)();async function j(){g("loading");try{e.isLinking?await(0,o.oO)({client:a,strategy:"passkey",type:"sign-in"}).catch(e=>{throw y(e.message),e}):(await n.connect({chain:c,client:a,strategy:"passkey",type:"sign-in"}),await(0,d.OM)("passkey",r.n)),t()}catch(i){console.error("Failed to login with passkey",i),g("error")}}const w=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{w.current||(w.current=!0,j())}),"loading"===p?(0,i.jsx)(f.G,{icon:(0,i.jsx)(u.C,{size:s.RK.xxl}),subtitle:"A pop-up prompt will appear to sign-in and verify your passkey",title:"Requesting Passkey"}):"error"===p?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.W,{onTryAgain:j,title:v||"Failed to Login"}),(0,i.jsx)(x.h,{y:"sm"}),(0,i.jsx)(h.$n,{fullWidth:!0,onClick:e.onCreate,variant:"outline",children:"Create a new Passkey"}),(0,i.jsx)(x.h,{y:"lg"})]}):null}function j(e){var n;const{wallet:t,done:c,client:p,chain:h}=e,[g,v]=(0,l.useState)(),[y,j]=(0,l.useState)("loading"),w=(0,a.Y)(t)?{id:t.id,partnerId:null===(n=t.getConfig())||void 0===n?void 0:n.partnerId}:void 0;async function k(){j("loading");try{e.isLinking?await(0,o.oO)({client:p,ecosystem:w,strategy:"passkey",type:"sign-up"}):(await t.connect({chain:h,client:p,strategy:"passkey",type:"sign-up"}),await(0,d.OM)("passkey",r.n)),c()}catch(n){console.error(n),n instanceof Error&&v("Error creating passkey: ".concat(n.message)),j("error")}}const E=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{E.current||(E.current=!0,k())}),"loading"===y?(0,i.jsx)(f.G,{icon:(0,i.jsx)(u.C,{size:s.RK.xxl}),subtitle:"A pop-up prompt will appear to sign-in and verify your passkey",title:"Creating Passkey"}):"error"===y?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.W,{onTryAgain:k,title:g||"Failed to create passkey"}),(0,i.jsx)(x.h,{y:"lg"})]}):null}function w(e){return(0,i.jsxs)(p.mc,{children:[(0,i.jsx)(x.h,{y:"xxl"}),(0,i.jsx)(p.mc,{center:"x",color:"accentText",flex:"row",children:(0,i.jsx)(u.C,{size:s.RK["4xl"]})}),(0,i.jsx)(x.h,{y:"xl"}),(0,i.jsx)(x.h,{y:"xxl"}),(0,i.jsx)(h.$n,{fullWidth:!0,onClick:e.onSignup,variant:"accent",children:"Create a Passkey"}),(0,i.jsx)(x.h,{y:"sm"}),(0,i.jsx)(h.$n,{fullWidth:!0,onClick:e.onSignin,variant:"outline",children:"I have a Passkey"}),(0,i.jsx)(x.h,{y:"lg"})]})}},8287:(e,n,t)=>{t.d(n,{C:()=>y});var i=t(70579),l=t(65043),r=t(9893),a=t(44403),o=t(81270),c=t(31512),s=t(73310),d=t(95996);var u=t(83880),p=t(617),h=t(14494),x=t(4230),m=t(4242),g=t(70844),f=t(43571),v=t(27238);function y(e){var n,t;const{wallet:y,done:j}=e,w=(0,d.S4)("useAddConnectedWallet").addConnectedWallet,k=(0,l.useRef)(void 0),[E,b]=(0,l.useState)("selecting"),[C,S]=(0,l.useState)(),[A,T]=(0,l.useState)(!1),P=(0,o.Y)(y)?{id:y.id,partnerId:null===(n=y.getConfig())||void 0===n?void 0:n.partnerId}:void 0,W=()=>{b("selecting"),k.current=void 0,e.onBack()};async function I(n){b("loading"),S(void 0),k.current=n;try{e.isLinking?await(0,c.oO)({chain:e.chain||y.getChain()||(0,r.xH)(1),client:e.client,ecosystem:P,strategy:"wallet",wallet:n}):await y.connect({chain:e.chain||n.getChain()||(0,r.xH)(1),client:e.client,strategy:"wallet",wallet:n}),w(n),j()}catch(t){S(t instanceof Error?t.message:"Unknown error"),b("error")}}return k.current?(0,i.jsxs)(h.mc,{animate:"fadein",flex:"column",fullHeight:!0,children:[(0,i.jsx)(h.mc,{p:"lg",children:(0,i.jsx)(h.rQ,{onBack:W,title:e.isLinking?e.inAppLocale.linkWallet:e.inAppLocale.signInWithWallet})}),(0,i.jsx)(h.mc,{center:"y",expand:!0,flex:"column",px:"wide"===e.size?"xxl":"lg",children:(0,i.jsx)("div",{children:"error"===E?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.W,{onTryAgain:()=>{if(!k.current)throw new Error("Failed to connect to unknown wallet");I(k.current)},title:C||"Failed to Login"}),(0,i.jsx)(x.h,{y:"lg"})]}):(0,i.jsx)(v.G,{icon:(0,i.jsx)(m.j,{client:e.client,id:null!==(t=k.current.id)&&void 0!==t?t:"",size:s.RK.xl}),subtitle:"A pop-up prompt will appear to sign-in and verify your wallet",title:"Sign in with your wallet"})})})]}):A?(0,i.jsx)(l.Suspense,{fallback:(0,i.jsx)(f.x,{}),children:(0,i.jsx)(u.default,{client:e.client,connectLocale:e.locale,disableSelectionDataReset:!0,onBack:()=>T(!1),onSelect:async e=>{I(e),T(!1)},recommendedWallets:void 0,size:e.size})}):(0,i.jsx)(p.d,{chain:y.getChain(),chains:[],client:e.client,connectLocale:e.locale,disableSelectionDataReset:!0,done:()=>{},goBack:W,hideHeader:!1,meta:e.meta||{},modalHeader:{onBack:W,title:e.isLinking?e.inAppLocale.linkWallet:e.inAppLocale.signInWithWallet},onShowAll:()=>{T(!0)},recommendedWallets:void 0,selectWallet:async e=>{I(e)},setModalVisibility:()=>{},showAllWallets:!0,size:e.size,title:e.locale.connectAWallet,walletConnect:e.walletConnect,walletIdsToHide:["inApp"],wallets:(0,a.E)()})}},27238:(e,n,t)=>{t.d(n,{G:()=>c});var i=t(70579),l=t(14494),r=t(4230),a=t(5961),o=t(46025);function c(e){return(0,i.jsxs)(l.mc,{animate:"fadein",children:[(0,i.jsx)(r.h,{y:"xxl"}),(0,i.jsxs)(l.mc,{center:"x",flex:"row",style:{position:"relative"},children:[(0,i.jsx)(a.y,{color:"accentText",size:"4xl"}),(0,i.jsx)(l.mc,{color:"accentText",style:{left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)"},children:e.icon})]}),(0,i.jsx)(r.h,{y:"xl"}),(0,i.jsx)(o.E,{center:!0,color:"primaryText",size:"lg",children:e.title}),(0,i.jsx)(r.h,{y:"md"}),(0,i.jsx)(o.E,{center:!0,multiline:!0,children:e.subtitle}),(0,i.jsx)(r.h,{y:"xxl"}),(0,i.jsx)(r.h,{y:"xxl"})]})}},42683:(e,n,t)=>{t.d(n,{R:()=>f});var i=t(70579),l=t(65043),r=t(22318),a=t(81270),o=t(31512),c=t(9142),s=t(56703),d=t(74394),u=t(14494),p=t(34153),h=t(4230),x=t(5961),m=t(46025),g=t(49354);function f(e){var n,t;const f=e.locale,v=f.socialLoginScreen,y=(0,s.QP)(),j=(0,a.Y)(e.wallet)?{id:e.wallet.id,partnerId:null===(n=e.wallet.getConfig())||void 0===n?void 0:n.partnerId}:void 0,[w,k]=(0,l.useState)(void 0),{done:E,wallet:b}=e,[C,S]=(0,l.useState)("connecting"),A=null===(t=e.state)||void 0===t?void 0:t.socialLogin,T=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{T.current||A&&(T.current=!0,S("connecting"),A.connectionPromise.then(()=>{E(),S("connected")}).catch(e=>{k(e.message),S("error")}))},[E,A]),(0,i.jsx)(u.mc,{animate:"fadein",flex:"column",fullHeight:!0,className:"tw-social-login-screen",children:(0,i.jsxs)(u.mc,{expand:!0,flex:"column",p:"lg",style:{paddingBottom:0},children:[e.goBack&&(0,i.jsx)(u.rQ,{onBack:e.goBack,title:e.isLinking?e.connectLocale.manageWallet.linkProfile:v.title}),"compact"===e.size?(0,i.jsx)(h.h,{y:"xl"}):null,(0,i.jsxs)(u.mc,{center:"both",expand:!0,flex:"column",style:{minHeight:"250px",textAlign:"center"},children:["error"!==C&&(0,i.jsxs)(u.mc,{animate:"fadein",children:[(0,i.jsx)(m.E,{center:!0,color:"primaryText",multiline:!0,style:{maxWidth:"250px"},children:v.instruction}),(0,i.jsx)(h.h,{y:"xl"}),(0,i.jsx)(u.mc,{center:"x",flex:"row",children:(0,i.jsx)(x.y,{color:"accentText",size:"lg"})}),(0,i.jsx)(h.h,{y:"xxl"})]}),"error"===C&&(0,i.jsxs)(u.mc,{animate:"fadein",children:[w?(0,i.jsx)(m.E,{center:!0,color:"danger",children:w}):(0,i.jsx)(m.E,{color:"danger",children:v.failed}),(0,i.jsx)(h.h,{y:"lg"}),(0,i.jsx)(p.$n,{onClick:async()=>{var n,t;const i=b.getConfig(),l=i&&"auth"in i&&null!==(n=null===i||void 0===i||null===(t=i.auth)||void 0===t?void 0:t.mode)&&void 0!==n?n:"popup";var a,s;if(i&&"auth"in i&&"popup"!==l&&!e.isLinking)return(0,c.N)({authOption:e.socialAuth,client:e.client,ecosystem:j,mode:null===i||void 0===i||null===(a=i.auth)||void 0===a?void 0:a.mode,redirectUrl:null===i||void 0===i||null===(s=i.auth)||void 0===s?void 0:s.redirectUrl});try{const n=(0,g.C)({authOption:e.socialAuth,client:e.client,ecosystem:j,themeObj:y});if(!n)throw new Error("Failed to open ".concat(e.socialAuth," login window"));S("connecting"),e.isLinking?await(0,o.oO)({client:e.client,closeOpenedWindow:e=>{e.close()},ecosystem:j,openedWindow:n,strategy:e.socialAuth}).catch(e=>{throw k(e.message),e}):await b.connect({chain:e.chain,client:e.client,closeOpenedWindow:e=>{e.close()},openedWindow:n,strategy:e.socialAuth}),await(0,d.OM)(e.socialAuth,r.n),S("connected"),E()}catch(p){var u;S("error"),p instanceof Error&&null!==p&&void 0!==p&&null!==(u=p.message)&&void 0!==u&&u.includes("PAYMENT_METHOD_REQUIRED")&&k(f.maxAccountsExceeded),console.error("Error signing in with ".concat(e.socialAuth),p)}},variant:"primary",children:v.retry}),(0,i.jsx)(h.h,{y:"xxl"})]})]})]})})}},55994:(e,n,t)=>{t.d(n,{_:()=>h});var i=t(70579),l=t(65043),r=t(22318),a=t(81270),o=t(74394),c=t(14494),s=t(34153),d=t(4230),u=t(5961),p=t(46025);function h(e){var n;const t=e.locale,h=t.socialLoginScreen,[x,m]=(0,l.useState)(void 0),{done:g,wallet:f}=e,[v,y]=(0,l.useState)("connecting"),j=null===(n=e.state)||void 0===n?void 0:n.guestLogin,w=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{w.current||j&&(w.current=!0,y("connecting"),j.connectionPromise.then(()=>{g(),y("connected")}).catch(e=>{m(e.message),y("error")}))},[g,j]),(0,i.jsx)(c.mc,{animate:"fadein",flex:"column",fullHeight:!0,className:"tw-guest-login-screen",children:(0,i.jsxs)(c.mc,{expand:!0,flex:"column",p:"lg",style:{paddingBottom:0},children:[e.goBack&&(0,i.jsx)(c.rQ,{onBack:e.goBack,title:h.title}),"compact"===e.size?(0,i.jsx)(d.h,{y:"xl"}):null,(0,i.jsxs)(c.mc,{center:"both",expand:!0,flex:"column",style:{minHeight:"250px",textAlign:"center"},children:["error"!==v&&(0,i.jsxs)(c.mc,{animate:"fadein",children:[(0,i.jsx)(p.E,{center:!0,color:"primaryText",multiline:!0,style:{maxWidth:"250px"},children:"Generating your guest account"}),(0,i.jsx)(d.h,{y:"xl"}),(0,i.jsx)(c.mc,{center:"x",flex:"row",children:(0,i.jsx)(u.y,{color:"accentText",size:"lg"})}),(0,i.jsx)(d.h,{y:"xxl"})]}),"error"===v&&(0,i.jsxs)(c.mc,{animate:"fadein",children:[x?(0,i.jsx)(p.E,{center:!0,color:"danger",children:x}):(0,i.jsx)(p.E,{color:"danger",children:h.failed}),(0,i.jsx)(d.h,{y:"lg"}),(0,i.jsx)(s.$n,{onClick:async()=>{var n;const i={client:e.client,ecosystem:(0,a.Y)(f)?{id:f.id,partnerId:null===(n=f.getConfig())||void 0===n?void 0:n.partnerId}:void 0,strategy:"guest"};try{await f.connect(i),await(0,o.OM)("guest",r.n),y("connected"),g()}catch(c){var l;y("error"),c instanceof Error&&null!==c&&void 0!==c&&null!==(l=c.message)&&void 0!==l&&l.includes("PAYMENT_METHOD_REQUIRED")&&m(t.maxAccountsExceeded),console.error("Error generating guest account",c)}},variant:"primary",children:h.retry}),(0,i.jsx)(d.h,{y:"xxl"})]})]})]})})}},70844:(e,n,t)=>{t.d(n,{W:()=>d});var i=t(70579),l=t(73310),r=t(50503),a=t(14494),o=t(34153),c=t(4230),s=t(46025);function d(e){return(0,i.jsxs)(a.mc,{animate:"fadein",children:[(0,i.jsx)(c.h,{y:"xxl"}),(0,i.jsx)(a.mc,{center:"x",flex:"row",children:(0,i.jsx)(r.g,{size:l.RK["3xl"]})}),(0,i.jsx)(c.h,{y:"lg"}),(0,i.jsx)(s.E,{center:!0,color:"primaryText",size:"md",children:e.title}),(0,i.jsx)(c.h,{y:"xl"}),(0,i.jsx)(c.h,{y:"xxl"}),(0,i.jsx)(o.$n,{fullWidth:!0,onClick:e.onTryAgain,variant:"accent",children:"Try Again"})]})}},73364:(e,n,t)=>{t.d(n,{$:()=>_});var i=t(70579),l=t(65043),r=t(22318),a=t(81270),o=t(31512),c=t(56703),s=t(73310),d=t(74394),u=t(14494),p=t(34153),h=t(83609),x=t(58911);const m=(0,x.jx)({animation:"".concat(h.I0," 0.15s ease-in")});var g=t(57528),f=t(8),v=t(83290),y=Object.defineProperty,j=Object.defineProperties,w=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,C=(e,n,t)=>n in e?y(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var S="".concat(40,"px"),A=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");var T=l.createContext({}),P=l.forwardRef((e,n)=>{var t,i,r,a,o,c=e,{value:s,onChange:d,maxLength:u,textAlign:p="left",pattern:h,placeholder:x,inputMode:m="numeric",onComplete:g,pushPasswordManagerStrategy:f="increase-width",pasteTransformer:v,containerClassName:y,noScriptCSSFallback:P=L,render:I,children:R}=c,M=((e,n)=>{var t={};for(var i in e)E.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&k)for(var i of k(e))n.indexOf(i)<0&&b.call(e,i)&&(t[i]=e[i]);return t})(c,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]);let[O,z]=l.useState("string"==typeof M.defaultValue?M.defaultValue:""),B=null!=s?s:O,D=function(e){let n=l.useRef();return l.useEffect(()=>{n.current=e}),n.current}(B),H=l.useCallback(e=>{null==d||d(e),z(e)},[d]),N=l.useMemo(()=>h?"string"==typeof h?new RegExp(h):h:null,[h]),F=l.useRef(null),_=l.useRef(null),Q=l.useRef({value:B,onChange:H,isIOS:"undefined"!=typeof window&&(null==(i=null==(t=null==window?void 0:window.CSS)?void 0:t.supports)?void 0:i.call(t,"-webkit-touch-callout","none"))}),Y=l.useRef({prev:[null==(r=F.current)?void 0:r.selectionStart,null==(a=F.current)?void 0:a.selectionEnd,null==(o=F.current)?void 0:o.selectionDirection]});l.useImperativeHandle(n,()=>F.current,[]),l.useEffect(()=>{let e=F.current,n=_.current;if(!e||!n)return;function t(){if(document.activeElement!==e)return q(null),void X(null);let n,t=e.selectionStart,i=e.selectionEnd,l=e.selectionDirection,r=e.maxLength,a=e.value,o=Y.current.prev,c=-1,s=-1;if(0!==a.length&&null!==t&&null!==i){let e=t===i,l=t===a.length&&a.length<r;if(e&&!l){let e=t;if(0===e)c=0,s=1,n="forward";else if(e===r)c=e-1,s=e,n="backward";else if(r>1&&a.length>1){let t=0;if(null!==o[0]&&null!==o[1]){n=e<o[1]?"backward":"forward";let i=o[0]===o[1]&&o[0]<r;"backward"===n&&!i&&(t=-1)}c=t+e,s=t+e+1}}-1!==c&&-1!==s&&c!==s&&F.current.setSelectionRange(c,s,n)}let d=-1!==c?c:t,u=-1!==s?s:i,p=null!=n?n:l;q(d),X(u),Y.current.prev=[d,u,p]}if(Q.current.value!==e.value&&Q.current.onChange(e.value),Y.current.prev=[e.selectionStart,e.selectionEnd,e.selectionDirection],document.addEventListener("selectionchange",t,{capture:!0}),t(),document.activeElement===e&&V(!0),!document.getElementById("input-otp-style")){let e=document.createElement("style");if(e.id="input-otp-style",document.head.appendChild(e),e.sheet){let n="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";W(e.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),W(e.sheet,"[data-input-otp]:autofill { ".concat(n," }")),W(e.sheet,"[data-input-otp]:-webkit-autofill { ".concat(n," }")),W(e.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),W(e.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let i=()=>{n&&n.style.setProperty("--root-height","".concat(e.clientHeight,"px"))};i();let l=new ResizeObserver(i);return l.observe(e),()=>{document.removeEventListener("selectionchange",t,{capture:!0}),l.disconnect()}},[]);let[G,$]=l.useState(!1),[U,V]=l.useState(!1),[K,q]=l.useState(null),[J,X]=l.useState(null);l.useEffect(()=>{!function(e){setTimeout(e,0),setTimeout(e,10),setTimeout(e,50)}(()=>{var e,n,t,i;null==(e=F.current)||e.dispatchEvent(new Event("input"));let l=null==(n=F.current)?void 0:n.selectionStart,r=null==(t=F.current)?void 0:t.selectionEnd,a=null==(i=F.current)?void 0:i.selectionDirection;null!==l&&null!==r&&(q(l),X(r),Y.current.prev=[l,r,a])})},[B,U]),l.useEffect(()=>{void 0!==D&&B!==D&&D.length<u&&B.length===u&&(null==g||g(B))},[u,g,D,B]);let Z=function(e){let{containerRef:n,inputRef:t,pushPasswordManagerStrategy:i,isFocused:r}=e,[a,o]=l.useState(!1),[c,s]=l.useState(!1),[d,u]=l.useState(!1),p=l.useMemo(()=>"none"!==i&&("increase-width"===i||"experimental-no-flickering"===i)&&a&&c,[a,c,i]),h=l.useCallback(()=>{let e=n.current,l=t.current;if(!e||!l||d||"none"===i)return;let r=e,a=r.getBoundingClientRect().left+r.offsetWidth-18,c=r.getBoundingClientRect().top+r.offsetHeight/2;0===document.querySelectorAll(A).length&&document.elementFromPoint(a,c)===e||(o(!0),u(!0))},[n,t,d,i]);return l.useEffect(()=>{let e=n.current;if(!e||"none"===i)return;function t(){let n=window.innerWidth-e.getBoundingClientRect().right;s(n>=40)}t();let l=setInterval(t,1e3);return()=>{clearInterval(l)}},[n,i]),l.useEffect(()=>{let e=r||document.activeElement===t.current;if("none"===i||!e)return;let n=setTimeout(h,0),l=setTimeout(h,2e3),a=setTimeout(h,5e3),o=setTimeout(()=>{u(!0)},6e3);return()=>{clearTimeout(n),clearTimeout(l),clearTimeout(a),clearTimeout(o)}},[t,r,i,h]),{hasPWMBadge:a,willPushPWMBadge:p,PWM_BADGE_SPACE_WIDTH:S}}({containerRef:_,inputRef:F,pushPasswordManagerStrategy:f,isFocused:U}),ee=l.useCallback(e=>{let n=e.currentTarget.value.slice(0,u);n.length>0&&N&&!N.test(n)?e.preventDefault():("string"==typeof D&&n.length<D.length&&document.dispatchEvent(new Event("selectionchange")),H(n))},[u,H,D,N]),ne=l.useCallback(()=>{var e;if(F.current){let n=Math.min(F.current.value.length,u-1),t=F.current.value.length;null==(e=F.current)||e.setSelectionRange(n,t),q(n),X(t)}V(!0)},[u]),te=l.useCallback(e=>{var n,t;let i=F.current;if(!v&&(!Q.current.isIOS||!e.clipboardData||!i))return;let l=e.clipboardData.getData("text/plain"),r=v?v(l):l;e.preventDefault();let a=null==(n=F.current)?void 0:n.selectionStart,o=null==(t=F.current)?void 0:t.selectionEnd,c=(a!==o?B.slice(0,a)+r+B.slice(o):B.slice(0,a)+r+B.slice(a)).slice(0,u);if(c.length>0&&N&&!N.test(c))return;i.value=c,H(c);let s=Math.min(c.length,u-1),d=c.length;i.setSelectionRange(s,d),q(s),X(d)},[u,H,N,B]),ie=l.useMemo(()=>({position:"relative",cursor:M.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[M.disabled]),le=l.useMemo(()=>({position:"absolute",inset:0,width:Z.willPushPWMBadge?"calc(100% + ".concat(Z.PWM_BADGE_SPACE_WIDTH,")"):"100%",clipPath:Z.willPushPWMBadge?"inset(0 ".concat(Z.PWM_BADGE_SPACE_WIDTH," 0 0)"):void 0,height:"100%",display:"flex",textAlign:p,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[Z.PWM_BADGE_SPACE_WIDTH,Z.willPushPWMBadge,p]),re=l.useMemo(()=>l.createElement("input",((e,n)=>j(e,w(n)))(((e,n)=>{for(var t in n||(n={}))E.call(n,t)&&C(e,t,n[t]);if(k)for(var t of k(n))b.call(n,t)&&C(e,t,n[t]);return e})({autoComplete:M.autoComplete||"one-time-code"},M),{"data-input-otp":!0,"data-input-otp-placeholder-shown":0===B.length||void 0,"data-input-otp-mss":K,"data-input-otp-mse":J,inputMode:m,pattern:null==N?void 0:N.source,"aria-placeholder":x,style:le,maxLength:u,value:B,ref:F,onPaste:e=>{var n;te(e),null==(n=M.onPaste)||n.call(M,e)},onChange:ee,onMouseOver:e=>{var n;$(!0),null==(n=M.onMouseOver)||n.call(M,e)},onMouseLeave:e=>{var n;$(!1),null==(n=M.onMouseLeave)||n.call(M,e)},onFocus:e=>{var n;ne(),null==(n=M.onFocus)||n.call(M,e)},onBlur:e=>{var n;V(!1),null==(n=M.onBlur)||n.call(M,e)}})),[ee,ne,te,m,le,u,J,K,M,null==N?void 0:N.source,B]),ae=l.useMemo(()=>({slots:Array.from({length:u}).map((e,n)=>{var t;let i=U&&null!==K&&null!==J&&(K===J&&n===K||n>=K&&n<J),l=void 0!==B[n]?B[n]:null;return{char:l,placeholderChar:void 0!==B[0]?null:null!=(t=null==x?void 0:x[n])?t:null,isActive:i,hasFakeCaret:i&&null===l}}),isFocused:U,isHovering:!M.disabled&&G}),[U,G,u,J,K,M.disabled,B]),oe=l.useMemo(()=>I?I(ae):l.createElement(T.Provider,{value:ae},R),[R,ae,I]);return l.createElement(l.Fragment,null,null!==P&&l.createElement("noscript",null,l.createElement("style",null,P)),l.createElement("div",{ref:_,"data-input-otp-container":!0,style:ie,className:y},oe,l.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},re)))});function W(e,n){try{e.insertRule(n)}catch(t){console.error("input-otp could not insert CSS rule:",n)}}P.displayName="Input";var I,L="\n[data-input-otp] {\n  --nojs-bg: white !important;\n  --nojs-fg: black !important;\n\n  background-color: var(--nojs-bg) !important;\n  color: var(--nojs-fg) !important;\n  caret-color: var(--nojs-fg) !important;\n  letter-spacing: .25em !important;\n  text-align: center !important;\n  border: 1px solid var(--nojs-fg) !important;\n  border-radius: 4px !important;\n  width: 100% !important;\n}\n@media (prefers-color-scheme: dark) {\n  [data-input-otp] {\n    --nojs-bg: black !important;\n    --nojs-fg: white !important;\n  }\n}";function R(e){return(0,i.jsx)(M,{className:"tw-otp-input-container",children:(0,i.jsx)(P,{maxLength:6,onChange:n=>{e.setValue(n)},onComplete:()=>{e.onEnter()},render:n=>{let{slots:t}=n;return(0,i.jsx)(u.mc,{center:"both",flex:"row",gap:"xs",children:t.map((n,t)=>(0,i.jsx)(O,(0,f.A)((0,f.A)({},n),{},{isInvalid:e.isInvalid}),t))})},value:e.value})})}const M=(0,x.jx)({"& input":{maxWidth:"100%"}});function O(e){return(0,i.jsxs)(D,{"data-active":e.isActive,"data-error":e.isInvalid,children:[null!==e.char&&(0,i.jsx)("div",{children:e.char}),e.hasFakeCaret&&(0,i.jsx)(B,{})]})}const z=(0,v.i7)(I||(I=(0,g.A)(["\n  0%, 100% {\n    opacity: 0;\n  },\n  50% {\n    opacity: 1;\n  }\n  "]))),B=(0,x.jx)(e=>({"&::before":{backgroundColor:(0,c.QP)().colors.primaryText,content:"''",display:"block",height:"1em",width:"1.5px"},alignItems:"center",animation:"".concat(z," 1s infinite"),display:"flex",inset:0,justifyContent:"center",pointerEvents:"none",position:"absolute"})),D=(0,x.jx)(e=>{const n=(0,c.QP)();return{"&[data-active='true']":{borderColor:n.colors.accentText},"&[data-error='true']":{borderColor:n.colors.danger},alignItems:"center",border:"2px solid ".concat(n.colors.borderColor),borderRadius:s.r8.lg,boxSizing:"border-box",color:n.colors.primaryText,display:"flex",fontSize:s.J.md,height:"40px",justifyContent:"center",padding:s.YK.xs,position:"relative",textAlign:"center",transition:"color 200ms ease",width:"40px"}});var H=t(4230),N=t(5961),F=t(46025);function _(e){var n;const{wallet:t,done:c,goBack:s,userInfo:h}=e,x="wide"===e.size,g=e.locale,[f,v]=(0,l.useState)(""),[y,j]=(0,l.useState)("idle"),[w,k]=(0,l.useState)(),[E,b]=(0,l.useState)("sending"),[C,S]=(0,l.useState)(0),A=(0,a.Y)(t)?{id:t.id,partnerId:null===(n=t.getConfig())||void 0===n?void 0:n.partnerId}:void 0,[T]=(0,l.useState)("base"),P=(0,l.useCallback)(async()=>{v(""),j("idle"),b("sending");try{if("email"in h)await(0,o.je)({client:e.client,ecosystem:A,email:h.email,strategy:"email"}),b("sent"),S(60);else{if(!("phone"in h))throw new Error("Invalid userInfo");await(0,o.je)({client:e.client,ecosystem:A,phoneNumber:h.phone,strategy:"phone"}),b("sent"),S(60)}}catch(n){console.error(n),j("idle"),b("error")}},[e.client,h,A]);const W=async n=>{if(6===n.length){j("verifying");try{e.isLinking?await async function(n){"email"in h?await(0,o.oO)({client:e.client,ecosystem:A,email:h.email,strategy:"email",verificationCode:n}):"phone"in h&&await(0,o.oO)({client:e.client,ecosystem:A,phoneNumber:h.phone,strategy:"phone",verificationCode:n})}(n):await async function(n){if("email"in h)await t.connect({chain:e.chain,client:e.client,email:h.email,strategy:"email",verificationCode:n}),await(0,d.OM)("email",r.n);else{if(!("phone"in h))throw new Error("Invalid userInfo");await t.connect({chain:e.chain,client:e.client,phoneNumber:h.phone,strategy:"phone",verificationCode:n}),await(0,d.OM)("phone",r.n)}}(n),c(),j("valid")}catch(l){var i;l instanceof Error&&null!==l&&void 0!==l&&null!==(i=l.message)&&void 0!==i&&i.includes("PAYMENT_METHOD_REQUIRED")?j("payment_required"):l instanceof Error&&(l.message.toLowerCase().includes("link")||l.message.toLowerCase().includes("profile"))?(j("linking_error"),k(l.message)):j("invalid"),console.error("Authentication Error",l)}}},I=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{I.current||(I.current=!0,P())},[P]),(0,l.useEffect)(()=>{if(C<=0)return;const e=setInterval(()=>{S(n=>n<=1?(clearInterval(e),0):n-1)},1e3);return()=>clearInterval(e)},[C]),"base"===T?(0,i.jsxs)(u.mc,{animate:"fadein",flex:"column",fullHeight:!0,className:"tw-otp-login-screen",children:[(0,i.jsx)(u.mc,{p:"lg",children:(0,i.jsx)(u.rQ,{onBack:s,title:g.signIn})}),(0,i.jsx)(u.mc,{center:"y",expand:!0,flex:"column",children:(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault()},children:[(0,i.jsxs)(u.mc,{center:"x",flex:"column",px:"lg",children:[!x&&(0,i.jsx)(H.h,{y:"xl"}),(0,i.jsx)(F.E,{className:"tw-screen-title",children:g.emailLoginScreen.enterCodeSendTo}),(0,i.jsx)(H.h,{y:"sm"}),(0,i.jsx)(F.E,{color:"primaryText",children:"email"in h?h.email:h.phone}),(0,i.jsx)(H.h,{y:"xl"})]}),(0,i.jsx)(R,{digits:6,isInvalid:"invalid"===y,onEnter:()=>{W(f)},setValue:e=>{v(e),j("idle")},value:f}),"invalid"===y&&(0,i.jsxs)(m,{children:[(0,i.jsx)(H.h,{y:"md"}),(0,i.jsx)(F.E,{center:!0,color:"danger",size:"sm",className:"tw-invalid-code-text",children:g.emailLoginScreen.invalidCode})]}),"linking_error"===y&&(0,i.jsxs)(m,{children:[(0,i.jsx)(H.h,{y:"md"}),(0,i.jsx)(F.E,{center:!0,color:"danger",size:"sm",className:"tw-screen-error",children:w||"Failed to verify code"})]}),"payment_required"===y&&(0,i.jsxs)(m,{children:[(0,i.jsx)(H.h,{y:"md"}),(0,i.jsx)(F.E,{center:!0,color:"danger",size:"sm",className:"tw-screen-error",children:g.maxAccountsExceeded})]}),(0,i.jsx)(H.h,{y:"xl"}),(0,i.jsx)(u.mc,{px:x?"xxl":"lg",children:"verifying"===y?(0,i.jsx)(u.mc,{animate:"fadein",center:"x",flex:"row",children:(0,i.jsx)(N.y,{color:"accentText",size:"lg"})}):(0,i.jsx)(u.mc,{animate:"fadein",children:(0,i.jsx)(p.$n,{onClick:()=>W(f),style:{width:"100%"},type:"submit",variant:"accent",className:"tw-verify-button",children:g.emailLoginScreen.verify})},"btn-container")}),(0,i.jsx)(H.h,{y:"xl"}),!x&&(0,i.jsx)(u.N1,{}),(0,i.jsxs)(u.mc,{gap:"xs",p:x?void 0:"lg",children:["error"===E&&(0,i.jsx)(F.E,{center:!0,color:"danger",size:"sm",className:"tw-screen-error",children:g.emailLoginScreen.failedToSendCode}),"sending"===E&&(0,i.jsxs)(u.mc,{center:"both",flex:"row",gap:"xs",style:{textAlign:"center"},children:[(0,i.jsx)(F.E,{size:"sm",children:g.emailLoginScreen.sendingCode}),(0,i.jsx)(N.y,{color:"secondaryText",size:"xs"})]}),"sending"!==E&&(0,i.jsx)(Q,{onClick:0===C?P:void 0,style:{cursor:C>0?"default":"pointer",opacity:C>0?.5:1},className:"tw-resend-button",type:"button",children:C>0?"Resend code in ".concat(C," seconds"):g.emailLoginScreen.resendCode})]})]})})]}):null}const Q=(0,x.OV)(e=>{const n=(0,c.QP)();return{all:"unset","&:hover":{color:n.colors.primaryText},color:n.colors.accentText,cursor:"pointer",fontSize:s.J.sm,fontWeight:500,textAlign:"center",width:"100%"}})}}]);
//# sourceMappingURL=42244.40769123.chunk.js.map