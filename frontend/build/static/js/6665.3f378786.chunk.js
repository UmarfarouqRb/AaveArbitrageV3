"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6665],{6665:(e,n,o)=>{o.d(n,{autoConnectWC:()=>ne,connectWC:()=>G});var t=o(8),a=o(23094),r=o(21627),i=o(23512);r.C;r.C;class s extends r.C{constructor(e){let{body:n,error:o,url:t}=e;super("RPC Request failed.",{cause:o,details:o.message,metaMessages:["URL: ".concat(t),"Request body: ".concat((0,i.A)(n))],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=o.code,this.data=o.data}}r.C;r.C;class c extends r.C{constructor(e,n){let{code:o,docsPath:t,metaMessages:a,name:r,shortMessage:i}=n;super(i,{cause:e,docsPath:t,metaMessages:a||(null===e||void 0===e?void 0:e.metaMessages),name:r||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=r||e.name,this.code=e instanceof s?e.code:null!==o&&void 0!==o?o:-1}}class l extends c{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class d extends c{constructor(e){super(e,{code:d.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(d,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class u extends c{constructor(e){super(e,{code:u.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(u,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class p extends c{constructor(e){let{method:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,{code:p.code,name:"MethodNotFoundRpcError",shortMessage:"The method".concat(n?' "'.concat(n,'"'):""," does not exist / is not available.")})}}Object.defineProperty(p,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class h extends c{constructor(e){super(e,{code:h.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(h,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class v extends c{constructor(e){super(e,{code:v.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(v,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class b extends c{constructor(e){super(e,{code:b.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(b,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class m extends c{constructor(e){super(e,{code:m.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(m,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class f extends c{constructor(e){super(e,{code:f.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(f,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class w extends c{constructor(e){super(e,{code:w.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(w,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class g extends c{constructor(e){let{method:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,{code:g.code,name:"MethodNotSupportedRpcError",shortMessage:"Method".concat(n?' "'.concat(n,'"'):""," is not supported.")})}}Object.defineProperty(g,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class y extends c{constructor(e){super(e,{code:y.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class C extends c{constructor(e){super(e,{code:C.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(C,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class E extends l{constructor(e){super(e,{code:E.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(E,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class P extends l{constructor(e){super(e,{code:P.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(P,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class I extends l{constructor(e){let{method:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,{code:I.code,name:"UnsupportedProviderMethodError",shortMessage:"The Provider does not support the requested method".concat(n?' " '.concat(n,'"'):"",".")})}}Object.defineProperty(I,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class j extends l{constructor(e){super(e,{code:j.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(j,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class M extends l{constructor(e){super(e,{code:M.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(M,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class R extends l{constructor(e){super(e,{code:R.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(R,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class O extends l{constructor(e){super(e,{code:O.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(O,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class T extends l{constructor(e){super(e,{code:T.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(T,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class x extends l{constructor(e){super(e,{code:x.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(x,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class q extends l{constructor(e){super(e,{code:q.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(q,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class _ extends l{constructor(e){super(e,{code:_.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(_,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class U extends l{constructor(e){super(e,{code:U.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(U,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class N extends l{constructor(e){super(e,{code:N.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(N,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});var A=o(15222),D=o(9893),S=o(83423),k=o(3340),H=o(77717),L=o(34476);const W="tw:connected-wallet-params";async function J(e,n,o){if(!function(e){try{return(0,H.A)(e),!0}catch(n){return!1}}(o))throw new Error("given params are not stringifiable");const t=await e.getItem(W);let a;if(t){try{a=JSON.parse(t)}catch(r){a={}}a[n]=o}else a={[n]:o};e.setItem(W,(0,H.A)(a))}var Q=o(85602),F=o(26711),K=o(11177),V=o(55881);const Y="08c4b07e3ad25f1a27c14a4e8cecb6f0",z="eip155";let B=null;const $={lastUsedChainId:"tw.wc.lastUsedChainId",requestedChains:"tw.wc.requestedChains"};async function G(e,n,o,a,r){var i;const s=await oe(e,o,r),c=e.walletConnect;let{onDisplayUri:l}=c||{};const d=await(0,F.u)(o);if(!l&&r){l=e=>{const n=d.mobile.native||d.mobile.universal;if(!n)return void r(e);const o=(0,Q.YP)(n,e).redirect;r(o)}}l&&s.events.addListener("display_uri",l);let u=null===c||void 0===c?void 0:c.optionalChains,p=e.chain;"global.safe"===o&&(u=se.map(D.Q4),p&&!u.includes(p)&&(p=void 0));const{chains:h,rpcMap:v}=function(e){const n={},o=[];e.chain&&(n[e.chain.id]=(0,D.r8)({chain:e.chain,client:e.client}),o.push(e.chain.id));const t=((null===e||void 0===e?void 0:e.optionalChains)||[]).slice(0,10);for(const a of t)n[a.id]=(0,D.r8)({chain:a,client:e.client}),o.push(a.id);o.includes(1)||(n[1]=(0,D.Q4)(1).rpc,o.push(1));return{chains:o.map(e=>"eip155:".concat(e)),rpcMap:n}}({chain:p,client:e.client,optionalChains:u});await s.connect((0,t.A)((0,t.A)({},null!==c&&void 0!==c&&c.pairingTopic?{pairingTopic:null===c||void 0===c?void 0:c.pairingTopic}:{}),{},{optionalNamespaces:{[z]:{chains:h,events:["chainChanged","accountsChanged"],methods:["eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain"],rpcMap:v}}})),ie(h.map(e=>Number(e.split(":")[1])),a);const b=(null===(i=h[0])||void 0===i?void 0:i.split(":")[1])||1,m=(0,V.A)(b),f=function(e,n){var o,t;const a=Z(e),r=(null===a||void 0===a||null===(o=a.accounts)||void 0===o?void 0:o.find(e=>e.startsWith("".concat(n,":"))))||(null===a||void 0===a?void 0:a.accounts[0]);return r&&null!==(t=r.split(":")[2])&&void 0!==t?t:null}(s.session,"eip155:1");if(!f)throw new Error("No accounts found on provider.");const w=e.chain&&e.chain.id===m?e.chain:(0,D.Q4)(m);if(e){var g,y;const n={chain:e.chain,optionalChains:null===(g=e.walletConnect)||void 0===g?void 0:g.optionalChains,pairingTopic:null===(y=e.walletConnect)||void 0===y?void 0:y.pairingTopic};a&&J(a,o,n)}return l&&s.events.removeListener("display_uri",l),re(f,w,s,n,a,e.client,d,r)}async function X(e,n,o){if(!e.session)throw new Error("No session found on provider.");const t="eip155:".concat(n.id),a=(0,k.cK)(n.id);if(ee(e.session,t))return void e.setDefaultChain(t);try{return await ae({provider:e,payload:{method:"wallet_switchEthereumChain",params:[{chainId:a}]},chain:t,walletInfo:o}),void e.setDefaultChain(t)}catch(p){var r,i;if(4001===(null!==(r=null===p||void 0===p?void 0:p.code)&&void 0!==r?r:null===p||void 0===p||null===(i=p.data)||void 0===i||null===(i=i.originalError)||void 0===i?void 0:i.code))throw new Error("User rejected chain switch")}const s=function(e){var n,o;const t=Z(e);return null!==(n=null===t||void 0===t||null===(o=t.accounts)||void 0===o||null===(o=o[0])||void 0===o||null===(o=o.split(":"))||void 0===o||null===(o=o.slice(0,2))||void 0===o?void 0:o.join(":"))&&void 0!==n?n:null}(e.session);if(!s)throw new Error("No routable chain to send wallet_addEthereumChain");try{var c,l;await ae({provider:e,payload:{method:"wallet_addEthereumChain",params:[{chainId:a,chainName:n.name,nativeCurrency:n.nativeCurrency,rpcUrls:[n.rpc],blockExplorerUrls:[null!==(c=null===(l=n.blockExplorers)||void 0===l||null===(l=l[0])||void 0===l?void 0:l.url)&&void 0!==c?c:""]}]},chain:s,walletInfo:o})}catch(p){var d,u;if(4001===(null!==(d=null===p||void 0===p?void 0:p.code)&&void 0!==d?d:null===p||void 0===p||null===(u=p.data)||void 0===u||null===(u=u.originalError)||void 0===u?void 0:u.code))throw new Error("User rejected add chain");throw new Error("Add chain failed: ".concat((null===p||void 0===p?void 0:p.message)||String(p)))}if(await ae({provider:e,payload:{method:"wallet_switchEthereumChain",params:[{chainId:a}]},chain:t,walletInfo:o}),e.setDefaultChain(t),!ee(e.session,t))throw new Error("Target chain still not enabled by wallet")}function Z(e){var n;return null===e||void 0===e||null===(n=e.namespaces)||void 0===n?void 0:n.eip155}function ee(e,n){var o;const t=Z(e);return!(null===t||void 0===t||null===(o=t.accounts)||void 0===o||!o.some(e=>e.startsWith("".concat(n,":"))))}async function ne(e,n,o,t,a){var r,i,s;const c=t?await async function(e,n){const o=await e.getItem(W);if(!o)return null;try{const e=JSON.parse(o);return null!==e&&void 0!==e&&e[n]?e[n]:null}catch(t){return null}}(t,o):null,l=await(0,F.u)(o),d=await oe(c?{chain:c.chain,client:e.client,walletConnect:{optionalChains:c.optionalChains,pairingTopic:c.pairingTopic}}:{client:e.client,walletConnect:{}},o,a);if(!d.session)throw await d.disconnect(),new Error("No wallet connect session found on provider.");const u=null===(r=d.session)||void 0===r||null===(r=r.namespaces)||void 0===r||null===(r=r[z])||void 0===r?void 0:r.accounts,p=null===u||void 0===u||null===(i=u[0])||void 0===i?void 0:i.split(":")[2];if(!p)throw new Error("No accounts found on provider.");const h=(null===(s=e.chain)||void 0===s?void 0:s.id)||1,v=(0,V.A)(h);return re(p,e.chain&&e.chain.id===v?e.chain:(0,D.Q4)(v),d,n,t,e.client,l,a)}async function oe(e,n,t){var a,r,i,s;if(B)return B;const c=await(0,F.u)(n),l=e.walletConnect,{UniversalProvider:d}=await o.e(34876).then(o.bind(o,34876));let u=null===l||void 0===l?void 0:l.optionalChains,p=e.chain;"global.safe"===n&&(u=se.map(D.Q4),p&&!u.includes(p)&&(p=void 0));const h=await d.init({metadata:{description:(null===l||void 0===l||null===(a=l.appMetadata)||void 0===a?void 0:a.description)||(0,K.o)().description,icons:[(null===l||void 0===l||null===(r=l.appMetadata)||void 0===r?void 0:r.logoUrl)||(0,K.o)().logoUrl],name:(null===l||void 0===l||null===(i=l.appMetadata)||void 0===i?void 0:i.name)||(0,K.o)().name,url:(null===l||void 0===l||null===(s=l.appMetadata)||void 0===s?void 0:s.url)||(0,K.o)().url,redirect:{native:c.mobile.native||void 0,universal:c.mobile.universal||void 0}},projectId:(null===l||void 0===l?void 0:l.projectId)||Y});if(h.events.setMaxListeners(Number.POSITIVE_INFINITY),"walletConnect"!==n){async function v(){var e;const n=(null===(e=h.session)||void 0===e||null===(e=e.peer)||void 0===e||null===(e=e.metadata)||void 0===e||null===(e=e.redirect)||void 0===e?void 0:e.native)||c.mobile.native||c.mobile.universal;t&&n&&await t(n)}h.on("session_request_sent",v),h.events.addListener("disconnect",()=>{h.off("session_request_sent",v),B=null})}return B=h,h}function te(e){let{provider:n,address:o,client:r,chain:i,sessionRequestHandler:s,walletInfo:c}=e;return{address:(0,S.bv)(o),async sendTransaction(e){var t;const a=await ae({provider:n,payload:{method:"eth_sendTransaction",params:[{data:e.data,from:(0,S.bv)(o),gas:e.gas?(0,k.cK)(e.gas):void 0,to:e.to,value:e.value?(0,k.cK)(e.value):void 0}]},chain:"eip155:".concat(e.chainId),walletInfo:c,sessionRequestHandler:s});return(0,A.E)({chainId:e.chainId,client:r,contractAddress:null!==(t=e.to)&&void 0!==t?t:void 0,gasPrice:e.gasPrice,transactionHash:a,walletAddress:(0,S.bv)(o),walletType:"walletConnect"}),{transactionHash:a}},async signMessage(e){let{message:o}=e;const t="string"===typeof o?(0,k.i3)(o):o.raw instanceof Uint8Array?(0,k.EY)(o.raw):o.raw;return ae({provider:n,payload:{method:"personal_sign",params:[t,this.address]},chain:"eip155:".concat(i.id),walletInfo:c,sessionRequestHandler:s})},async signTypedData(e){const o=(0,L.y)(e),{domain:r,message:l,primaryType:d}=o,u=(0,t.A)({EIP712Domain:(0,a.H4)({domain:r})},o.types);(0,a.$$)({domain:r,message:l,primaryType:d,types:u});const p=(0,a.v8)({domain:null!==r&&void 0!==r?r:{},message:l,primaryType:d,types:u});return await ae({provider:n,payload:{method:"eth_signTypedData_v4",params:[this.address,p]},chain:"eip155:".concat(i.id),walletInfo:c,sessionRequestHandler:s})}}}async function ae(e){var n;const{provider:o,payload:t,chain:a,walletInfo:r,sessionRequestHandler:i}=e,s=o.request(t,a),c=(null===(n=o.session)||void 0===n||null===(n=n.peer)||void 0===n||null===(n=n.metadata)||void 0===n||null===(n=n.redirect)||void 0===n?void 0:n.native)||r.mobile.native||r.mobile.universal;return i&&c&&await i(c),s}function re(e,n,o,t,a,r,i,s){const c=te({address:e,chain:n,client:r,provider:o,sessionRequestHandler:s,walletInfo:i});async function l(){o.removeListener("accountsChanged",u),o.removeListener("chainChanged",p),o.removeListener("disconnect",d),await o.disconnect(),B=null}function d(){ie([],a),null===a||void 0===a||a.removeItem($.lastUsedChainId),l(),t.emit("disconnect",void 0)}function u(e){if(e[0]){const a=te({address:(0,S.bv)(e[0]),chain:n,client:r,provider:o,sessionRequestHandler:s,walletInfo:i});t.emit("accountChanged",a),t.emit("accountsChanged",e)}else d()}function p(e){const n=(0,D.Q4)((0,V.A)(e));t.emit("chainChanged",n),null===a||void 0===a||a.setItem($.lastUsedChainId,String(e))}return o.on("accountsChanged",u),o.on("chainChanged",p),o.on("disconnect",d),o.on("session_delete",d),[c,n,l,e=>async function(e,n,o){try{await X(e,n,o)}catch(t){const e="string"===typeof t?t:null===t||void 0===t?void 0:t.message;if(/user rejected request/i.test(e))throw new E(t);throw new R(t)}}(o,e,i)]}function ie(e,n){null===n||void 0===n||n.setItem($.requestedChains,(0,H.A)(e))}const se=[1,11155111,42161,43114,8453,1313161554,84532,56,42220,100,10,137,1101,324,534352]}}]);
//# sourceMappingURL=6665.3f378786.chunk.js.map